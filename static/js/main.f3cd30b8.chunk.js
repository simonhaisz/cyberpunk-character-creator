(this["webpackJsonpcyberpunk-character-creator"]=this["webpackJsonpcyberpunk-character-creator"]||[]).push([[0],{127:function(e,t,a){},135:function(e,t,a){"use strict";a.r(t);var n,r=a(1),c=a(0),o=a(15),i=a.n(o),l=(a(127),a(5)),s=a(20),u=a(12);!function(e){e.Street="Street",e.Normal="Normal",e.Elite="Elite"}(n||(n={}));var d=[n.Street,n.Normal,n.Elite];function j(e){switch(e){case n.Street:return 6;case n.Normal:return 12;case n.Elite:return 18;default:throw new Error("Unknown level '".concat(e,"'"))}}var m={karmaLevel:n.Normal,connectionLevel:n.Normal,nuyenLevel:n.Normal,gearLevel:n.Normal},b=a(77),f=a(13),h=a(204);function p(e,t,a,n){for(var r=0,c=Object.keys(t);r<c.length;r++){var o=c[r],i="".concat(e,".").concat(o),l=t[o];Array.isArray(l)?a[i]=n(i,l):p(i,l,a,n)}}var v=new Map;function O(e,t){var a="".concat(e.path,".").concat(e.name);if(v.has(a))return v.get(a);var n=t[e.path];if(void 0===n)throw new Error("Could not find any items under path '".concat(e.path,"'"));var r=n.find((function(t){return t.name===e.name}));if(!r)throw new Error("Could not find item with name '".concat(e.name,"' in list '").concat(JSON.stringify(n),"' under path '").concat(e.path,"'"));var c=parseFloat(r.cost);return v.set(a,c),c}var g=new Map;function x(e,t){var a,n=new Set,r=t.split("."),c=Object(f.a)(w(e,t));try{for(c.s();!(a=c.n()).done;){var o=a.value.split(".");n.add(o[r.length])}}catch(i){c.e(i)}finally{c.f()}return Array.from(n)}function y(e,t){var a,n={},r=Object(f.a)(w(e,t));try{for(r.s();!(a=r.n()).done;){var c=a.value;n[c]=e[c]}}catch(o){r.e(o)}finally{r.f()}return n}function w(e,t){for(var a=[],n=t.split("."),r=0,c=Object.keys(e);r<c.length;r++){var o=c[r],i=o.split(".");if(i.length<n.length)throw new Error("Child paths '".concat(o,"' must be longer than parent paths '").concat(t,"'"));for(var l=!0,s=0;s<n.length;s++)if(n[s]!==i[s]){l=!1;break}l&&a.push(o)}return a}var C,k,N="gear";function S(e,t){var a,n=[],r=Object(f.a)(t.map((function(t){return function(e,t){for(var a={path:e,name:"[NAME]",availability:"[AVAILABILITY]",cost:"[COST]",costLabel:"[COST]"},n=0,r=Object.keys(t);n<r.length;n++){var c=r[n],o=t[c];"Name"===c?a.name=o:"Availability"===c?a.availability=o:"Cost"===c?a.costLabel=o:"Essence"===c?a.essence=o:a[c]=o}return a}(e,t)})));try{for(r.s();!(a=r.n()).done;){var c=a.value;/^([\w-\s]+)\s+\(([\w-\s]+(,\s*)?)+\)$/i.test(c.name)?n.push.apply(n,Object(u.a)(L(e,c))):n.push(c)}}catch(l){r.e(l)}finally{r.f()}for(var o=0,i=n;o<i.length;o++){I(i[o])}return n}function L(e,t){var a=[],n=/^([\w-\s]+)\s+\(((?:(?:[\w-\s]+)(?:,\s*)?)+)\)$/i.exec(t.name);if(null===n)throw new Error("Gear item's name '".concat(t.name,"' does not contain multiple ratings"));for(var r=n[1],c=n[2].split(",").map((function(e){return e.trim()})),o=c.length,i=0;i<o;i++){for(var l={path:e,name:"".concat(r," - ").concat(c[i]),availability:"[AVAILABILITY]",cost:"[COST]",costLabel:"[COST]"},s=0,u=Object.keys(t);s<u.length;s++){var d=u[s];if("name"!==d&&"cost"!==d){var j=t[d],m=j.split(",").map((function(e){return e.trim()}));if(1===m.length)l[d]=j;else{if(m.length!==o)throw new Error("Properties should have a single value or the same amount as there are version names ".concat(o," - found ").concat(m.length));l[d]=m[i]}}}a.push(l)}return a}function I(e){var t=/^(?:x|\+)?(\d+)\s*(?:\(([\w\s]+)\))?$/i.exec(e.costLabel);if(t){if(e.cost=t[1],isNaN(parseInt(e.cost)))throw new Error("Gear item '".concat(e.name,"' has unsupported cost label '").concat(e.costLabel,"'"))}else e.cost="0"}function U(e,t,a){var n=O(e,t),r=1;void 0!==e.grade&&(r*=A(e.grade),r=A(e.grade));var c=function(e,t){var a="".concat(e.path,".").concat(e.name);if(g.has(a))return g.get(a);var n=t[e.path],r=n.find((function(t){return t.name===e.name}));if(!r)throw new Error("Could not find item with name '".concat(e.name,"' in list '").concat(JSON.stringify(n),"' under path '").concat(e.path,"'"));var c=r.availability;return g.set(a,r.availability),c}(e,t);return void 0!==c&&(r*=function(e,t){var a=D(e),n=a.rating,r=a.legality,c=j(t);if("F"===r){return n<=c?1:n<=c+2?2:n<=c+4?5:n<=c+6?10:Number.NaN}if("R"===r){var o=c+6;return n<=o?1:n<=o+2?2:n<=o+4?5:n<=o+6?10:Number.NaN}var i=c+12;return n<=i?1:n<=i+2?2:n<=i+4?5:n<=i+6?10:Number.NaN}(c,a)),n*r}function E(e,t){var a=t.name,n=t.count,r=t.grade,c=t.essence,o={path:e,name:a,count:n,grade:r,essence:c};return void 0===r&&delete o.grade,void 0===c&&delete o.essence,void 0!==r&&void 0!==c&&(o.essence=(parseFloat(c)*function(e){switch(e){case C.Used:return 1.2;case C.Alpha:return 1;case C.Beta:return.7;case C.Delta:return.5;default:throw new Error("Unknown augmentation grade '".concat(e,"'"))}}(r)).toPrecision(2)),o}function A(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:C.Alpha;switch(e){case C.Used:return.5;case C.Alpha:return 1;case C.Beta:return 5;case C.Delta:return 15;default:throw new Error("Unknown augmentation grade '".concat(e,"'"))}}function D(e){if("-"===e)return{rating:1,legality:"L"};var t=/^\+?(\d+)(R|F)?$/i.exec(e);return t?{rating:parseInt(t[1]),legality:t[2]||"L"}:(console.error("Unknown availability format '".concat(e,"' - falling back to standard cost")),{rating:1,legality:"L"})}function M(e,t,a){var n,r=0,c=Object(f.a)(e.gear);try{for(c.s();!(n=c.n()).done;){var o=n.value;r+=U(o,t,a)*parseInt(o.count)}}catch(i){c.e(i)}finally{c.f()}return r}function T(e,t){var a=function(e){switch(e){case n.Street:return 1e4;case n.Normal:return 2e4;case n.Elite:return 5e4;default:throw new Error("Unknown level '".concat(e,"'"))}}(t);return 5*Math.ceil(e/a)}function B(e){return void 0!==e.qualities.find((function(e){return"Adept"===e.name||"Magician"===e.name}))}function V(e){if(e<0||e>6)throw new Error("Professionalism must be witin the range [1..6] - found ".concat(e));return 20*(e*(e+1)/2)}function W(e){var t=Object(l.a)({},e);return void 0===t.options&&(t.options=Object(l.a)({},m)),void 0===t.professionalism&&(t.professionalism=0),void 0===t.modifiers&&(t.modifiers=[]),void 0===t.gear?t.gear=[]:t.gear=function(e){var t,a=[],n=Object(f.a)(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(/^gear\.weapons\.grenades-and\./i.test(r.path)){var c=Object(b.a)(/(^gear\.weapons\.grenades\x2Dand\.)(.*)/i,{toreplace:1,tokeep:2}).exec(r.path);if(null===c)throw new Error("'".concat(r.path,"' matched test regex but not exec regex"));var o="gear.weapons.grenades-and-rockets.".concat(c.groups.tokeep);a.push(Object(l.a)(Object(l.a)({},r),{},{path:o}))}else if(/^Bow \u2013/i.test(r.name)){var i=Object(b.a)(/(^Bow \u2013)(.*)/i,{toreplace:1,tokeep:2}).exec(r.name);if(null===i)throw new Error("'".concat(r.name,"' matched test regex but not exec regex"));var s="Bow -".concat(i.groups.tokeep);a.push(Object(l.a)(Object(l.a)({},r),{},{name:s}))}else if(/^Jammer \u2013/i.test(r.name)){var u=Object(b.a)(/(^Jammer \u2013)(.*)/i,{toreplace:1,tokeep:2}).exec(r.name);if(null===u)throw new Error("'".concat(r.name,"' matched test regex but not exec regex"));var d="Jammer -".concat(u.groups.tokeep);a.push(Object(l.a)(Object(l.a)({},r),{},{name:d}))}else a.push(r)}}catch(j){n.e(j)}finally{n.f()}return a}(t.gear),void 0===t.powers&&(t.powers=[]),void 0===t.initiateGrade&&(t.initiateGrade=0),void 0===t.metaMagics&&(t.metaMagics=[]),t}!function(e){e.Used="Used",e.Alpha="Alpha",e.Beta="Beta",e.Delta="Delta"}(C||(C={})),function(e){e.Dwarf="Dwarf",e.Elf="Elf",e.Human="Human",e.Ork="Ork",e.Troll="Troll"}(k||(k={}));var F={key:-1,name:"",streetName:"",metaType:k.Human,attributes:[{name:"Body",rating:3},{name:"Agility",rating:3},{name:"Reaction",rating:3},{name:"Strength",rating:3},{name:"Charisma",rating:3},{name:"Intuition",rating:3},{name:"Logic",rating:3},{name:"Willpower",rating:3},{name:"Edge",rating:3},{name:"Magic",rating:3}],qualities:[],activeSkills:[],knowledgeSkills:[],languageSkills:[],contacts:[],spells:[],powers:[],gear:[],options:Object(l.a)({},m),professionalism:0,initiateGrade:0,metaMagics:[],modifiers:[]};function G(){return Object(l.a)({},F)}function P(e){return"".concat("character",":").concat(e)}function R(e){if(-1===e)return G();var t=localStorage.getItem(P(e));return t?W(JSON.parse(t)):void 0}function J(e){localStorage.setItem(P(e.key),JSON.stringify(e))}var H="selected-character";function q(e,t){return"".concat("custom-item",":").concat(e,".").concat(t,"}")}function Q(e){switch(e){case k.Human:return 0;case k.Ork:case k.Dwarf:return 30;case k.Elf:return 40;case k.Troll:return 60;default:throw new Error("Unknown meta-type '".concat(e,"'"))}}function Z(e,t){var a=e.modifiers.find((function(e){return e.name===t}));return a?a.rating:0}function z(e,t){return function(e,t){var a=e.attributes.find((function(e){return e.name===t}));if(!a)throw new Error("Could not find attribute with name '".concat(t,"'"));return a.rating}(e,t)+K(e.metaType,t)}function $(e,t){return z(e,t)+Z(e,t)}function K(e,t){switch(e){case k.Dwarf:switch(t){case"Body":return 1;case"Reaction":return-1;case"Strength":return 2;case"Willpower":return 1}break;case k.Elf:switch(t){case"Agility":return 1;case"Charisma":return 2}break;case k.Human:break;case k.Ork:switch(t){case"Body":return 3;case"Strength":return 2;case"Charisma":case"Logic":return-1}break;case k.Troll:switch(t){case"Body":return 4;case"Agility":return-1;case"Strength":return 4;case"Charisma":return-2;case"Intuition":case"Logic":return-1}}return 0}function Y(e){switch(e){case 1:return-25;case 2:return-15;case 3:return 0;case 4:return 20;case 5:return 45;case 6:return 75;case 7:return 110;default:throw new Error("Unsupported attribute rating ".concat(e))}}function X(e){var t,a=B(e),n=0,r=Object(f.a)(e.attributes);try{for(r.s();!(t=r.n()).done;){var c=t.value;("Magic"!==c.name||a)&&(n+=Y(c.rating))}}catch(o){r.e(o)}finally{r.f()}return n}function _(e){switch(e){case-1:return 0;case 1:return 5;case 3:return 15;case 5:return 30;case 7:return 60;default:throw new Error("Unsupported skill rating ".concat(e))}}function ee(e){return e.map((function(e){return _(e.rating)})).reduce((function(e,t){return e+t}),0)}function te(e){switch(e){case-1:return 0;case 1:return 2;case 3:return 7;case 5:return 15;case 7:return 30;default:throw new Error("Unsupported skill rating ".concat(e))}}function ae(e){return e.map((function(e){return te(e.rating)})).reduce((function(e,t){return e+t}),0)}function ne(e){return 10*(z(e,"Intuition")+z(e,"Logic"))}function re(e){var t=ee(e.activeSkills),a=ae(e.knowledgeSkills),n=ae(e.languageSkills),r=ne(e);return t+Math.max(a+n-r,0)}function ce(e,t){var a,n=[],r=Object(f.a)(t);try{for(r.s();!(a=r.n()).done;){var c=a.value,o=c.Name,i=c.Cost;n.push({path:e,name:o,cost:i})}}catch(l){r.e(l)}finally{r.f()}return n}function oe(e,t){var a,n=0,r=Object(f.a)(e.qualities);try{for(r.s();!(a=r.n()).done;){n+=O(a.value,t)}}catch(c){r.e(c)}finally{r.f()}return n}function ie(e){switch(e){case 1:return 2;case 3:return 7;case 5:return 15;case 7:return 30;default:throw new Error}}function le(e){var t=0;return t+=ie(e.connection),t+=ie(e.loyalty)}function se(e){return 10*(z(e,"Charisma")+z(e,"Willpower"))}function ue(e){return e.contacts.map((function(e){return le(e)})).reduce((function(e,t){return e+t}),0)}function de(e,t){var a,n=[],r=Object(f.a)(t);try{for(r.s();!(a=r.n()).done;){var c=a.value.Name;n.push({path:e,name:c,cost:"5"})}}catch(o){r.e(o)}finally{r.f()}return n}var je="powers";function me(e,t){var a,n=[],r=Object(f.a)(t);try{for(r.s();!(a=r.n()).done;){var c=a.value;if("powers.adept-powers"===e){var o=c.Name,i=c.Cost,l=c.Levels;n.push({path:e,name:o,cost:i,levels:l})}else if("powers.metamagic"===e){var s=c.Name;n.push({path:e,name:s,cost:"10",levels:""})}}}catch(u){r.e(u)}finally{r.f()}return n}var be,fe=new Map;function he(e){if(e<0||e>6)throw new Error("Initiate grade must be witin the range [1..6] - found ".concat(e));return 0===e?0:10*(e*(e+1)/2+1)}function pe(e){var t=0;return t+=function(e){return 5*e.spells.length}(e),t+=he(e.initiateGrade),t+=10*e.metaMagics.length}function ve(e){var t;switch(e){case n.Street:t=400;break;case n.Normal:t=500;break;case n.Elite:t=700}return{total:t,spent:0,available:t}}function Oe(e,t){var a=function(e){switch(e){case n.Street:return 400;case n.Normal:return 500;case n.Elite:return 700;default:throw new Error("Unknown level '".concat(e,"'"))}}(e.options.karmaLevel),r=0;return r+=Q(e.metaType),r+=oe(e,t.allQualities),r+=X(e),r+=re(e),r+=function(e){var t=ue(e),a=se(e);return Math.max(t-a,0)}(e),r+=T(M(e,t.allGear,e.options.gearLevel),e.options.nuyenLevel),r+=pe(e),{total:a,spent:r+=V(e.professionalism),available:a-r}}!function(e){e.UpdateCharacter="updateCharacter",e.ImportCharacter="importCharacter",e.ClearCharacter="clearCharacter",e.SelectCharacter="selectCharacter",e.LoadQualities="loadQualities",e.LoadSkills="loadSkills",e.LoadContacts="loadContacts",e.LoadSpells="loadSpells",e.LoadPowers="loadPowers",e.LoadGear="loadGear",e.LoadCustomItems="loadCustomItems",e.AddCustomItem="addCustomItem",e.UpdateCreateOptions="updateCreateOptions"}(be||(be={}));var ge=function(e,t){switch(t.type){case be.UpdateCharacter:var a=t.data,n=ye(a,e),r=Oe(a,e);return J(a),Object(l.a)(Object(l.a)({},e),{},{selectedCharacter:a,characters:n,karma:r});case be.ImportCharacter:var c=t.data;J(W(c));var o=ye(c,e),i=Oe(c,e);return Object(l.a)(Object(l.a)({},e),{},{selectedCharacter:c,characters:o,karma:i});case be.ClearCharacter:S=e.selectedCharacter,localStorage.removeItem(P(S.key));var s=e.characters.filter((function(t){return t.key!==e.selectedCharacter.key})).map((function(e){return{key:e.key,name:e.name,streetName:e.streetName}})),u=G(),d=ve(u.options.karmaLevel);return Object(l.a)(Object(l.a)({},e),{},{characters:s,selectedCharacter:u,karma:d});case be.SelectCharacter:var j=t.data,m=R(j.key);if(!m)throw new Error("Could not find saved character ".concat(JSON.stringify(j)));var b=Oe(m,e);return Object(l.a)(Object(l.a)({},e),{},{selectedCharacter:m,karma:b});case be.LoadQualities:var f=t.data;return Object(l.a)(Object(l.a)({},e),{},{allQualities:f});case be.LoadSkills:var h=t.data;return Object(l.a)(Object(l.a)({},e),{},{allSkills:h});case be.LoadContacts:var p=t.data;return Object(l.a)(Object(l.a)({},e),{},{allContacts:p});case be.LoadGear:var v=t.data;return Object(l.a)(Object(l.a)({},e),{},{allGear:v});case be.LoadSpells:var O=t.data;return Object(l.a)(Object(l.a)({},e),{},{allSpells:O});case be.LoadPowers:var g=t.data;return Object(l.a)(Object(l.a)({},e),{},{allPowers:g});case be.LoadCustomItems:var x=t.data;return Object(l.a)(Object(l.a)({},e),{},{customItems:x});case be.AddCustomItem:var y=t.data;!function(e,t){var a=q(e,t.Name);localStorage.setItem(a,JSON.stringify(t))}(y.path,y.item);var w=Object(l.a)({},e.customItems);return w[y.path]=y.item,Object(l.a)(Object(l.a)({},e),{},{customItems:w});case be.UpdateCreateOptions:var C=t.data,k=Object(l.a)(Object(l.a)({},e.selectedCharacter),{},{options:Object(l.a)({},C)}),N=Oe(k,e);return Object(l.a)(Object(l.a)({},e),{},{selectedCharacter:k,karma:N})}var S;return Object(l.a)({},e)},xe={characters:[],selectedCharacter:G(),karma:ve(m.karmaLevel),allQualities:{positive:[],negative:[]},allSkills:{active:[],knowledge:[],language:[]},allContacts:[],allSpells:{combat:[],detection:[],health:[],illusion:[],manipulation:[]},allPowers:{adeptPowers:[]},allGear:{},customItems:{}};function ye(e,t){var a,n=Object(u.a)(t.characters);!function(e){return-1===e.key}(e)?a=n.findIndex((function(t){return t.key===e.key})):(e.key=Date.now(),a=-1);var r=e.key,c=e.name,o=e.streetName;return-1===a?n.push({key:r,name:c,streetName:o}):n[a]={key:r,name:c,streetName:o},n}var we=Object(c.createContext)((function(){})),Ce=function(){return Object(c.useContext)(we)},ke=Object(c.createContext)(xe),Ne=function(e){return Object(c.useContext)(ke)[e]},Se=a(198),Le=a(199),Ie=a(139),Ue=a(180),Ee=a(208),Ae=a(99),De=a.n(Ae),Me=a(100),Te=a.n(Me),Be=a(203),Ve=a(200),We=a(179),Fe=a(177),Ge=a(136),Pe=a(178),Re=a(45),Je=function(e){var t=e.character,a=t.name,n=t.streetName;return a||n?n?a?Object(r.jsxs)(Re.a,{children:[a," aka ",n]}):Object(r.jsx)(Re.a,{children:n}):Object(r.jsx)(Re.a,{children:a}):Object(r.jsx)(Re.a,{children:"= New Character ="})},He=function(){var e=Ce(),t=Ne("characters");return Object(r.jsx)(Fe.a,{subheader:Object(r.jsx)(Pe.a,{children:"Characters"}),children:t.map((function(t){return Object(r.jsx)(Ge.a,{onClick:function(){return function(t){var a=t;e({type:be.SelectCharacter,data:a})}(t)},children:Object(r.jsx)(Je,{character:t})},t.key)}))})},qe=a(205),Qe=a(209),Ze=a(190),ze=[k.Human,k.Ork,k.Dwarf,k.Elf,k.Troll],$e=a(206),Ke=a(191),Ye=a(193),Xe=a(192),_e=a(52),et=a.n(_e),tt=a(210),at=Object(We.a)({root:{display:"flex",flexDirection:"row",flexWrap:"wrap",justifyContent:"flex-start"},chip:{marginRight:10,marginBottom:10}}),nt=function(e){var t=e.values,a=e.createChipLabel,n=e.onDeleteValue,c=at();return Object(r.jsx)("div",{className:c.root,children:t.map((function(e){return Object(r.jsx)(Ue.a,{badgeContent:e.count,invisible:"1"===e.count,color:"secondary",max:99,anchorOrigin:{vertical:"top",horizontal:"left"},children:Object(r.jsx)(tt.a,{className:c.chip,color:"primary",label:a(e),onDelete:function(){return n(e)}})},e.name)}))})};function rt(e,t){var a,n=[],r=Object(f.a)(e);try{for(r.s();!(a=r.n()).done;){var c=a.value;(c.path===t||c.path.startsWith("".concat(t,".")))&&n.push(c)}}catch(o){r.e(o)}finally{r.f()}return n}var ct=a(74),ot=a.n(ct),it=a(183),lt=a(186),st=a(185),ut=a(182),dt=a(181),jt=a(137),mt=a(105),bt=a(55),ft=a.n(bt),ht=a(61),pt=a.n(ht),vt=Object(We.a)({root:{minWidth:78,maxWidth:78,width:78}}),Ot=function(e){var t=e.disabled,a=e.grade,n=e.onUpdateGrade,c=vt();return Object(r.jsx)(jt.a,{className:c.root,disabled:t,variant:"outlined",onClick:function(){return n(function(e){switch(e){case C.Used:return C.Alpha;case C.Alpha:return C.Beta;case C.Beta:return C.Delta;case C.Delta:return C.Used;default:throw new Error("Unknown augmentation grade '".concat(e,"'"))}}(a))},children:a})};var gt=Object(We.a)({root:{display:"flex",flexDirection:"row",padding:10,margin:10},name:{width:500,textAlign:"left"},availability:{width:100,textAlign:"center"},cost:{width:200,textAlign:"center"},buttons:{width:200,display:"flex",flexDirection:"row",justifyContent:"center"}}),xt=function(e){var t,a=e.item,n=e.createCostLabel,c=e.onUpdateItem,o=Ne("allPowers"),i=Ne("selectedCharacter").options,s=gt(),u=parseInt(a.count),d=n(a),m=u>0;t=!!a.path.startsWith(N)||!!a.path.startsWith("".concat(je,".adept-powers"))&&function(e,t){var a="".concat(e.path,".").concat(e.name);if(fe.has(a))return fe.get(a);var n=t["powers.adept-powers"];if(void 0===n)throw new Error("Could not find any powers under path 'powers.adept-powers'");var r=n.find((function(t){return t.name===e.name}));if(!r)throw new Error("Could not find power with name '".concat(e.name,"' in list '").concat(JSON.stringify(n),"' under path '").concat(e.path,"'"));var c=void 0!==r.levels&&"-"!==r.levels;return fe.set(a,c),c}(a,o);var b=a.path.startsWith(N),f=!b||function(e,t){var a=D(e),n=a.rating,r=a.legality,c=j(t);switch(r){case"L":return n<=c+12+6;case"R":return n<=c+6+6;case"F":return n<=c+6;default:throw new Error("Unknown availability legality '".concat(r,"'"))}}(a.availability,i.gearLevel),h=a.path.startsWith("".concat(N,".augmentations")),p=a.grade||C.Alpha;return Object(r.jsxs)(mt.a,{className:s.root,elevation:3,children:[Object(r.jsx)(Re.a,{className:s.name,style:{lineHeight:"36px"},children:a.name}),b?Object(r.jsx)(Re.a,{className:s.availability,style:{lineHeight:"36px"},children:a.availability}):null,Object(r.jsx)("span",{className:s.cost,children:Object(r.jsx)(Ue.a,{badgeContent:u,color:"secondary",children:Object(r.jsxs)(Re.a,{style:{lineHeight:"36px"},children:["(",d,")"]})})}),Object(r.jsxs)(dt.a,{className:s.buttons,children:[t||!m?Object(r.jsx)(jt.a,{onClick:function(){c(Object(l.a)(Object(l.a)({},a),{},{count:(u+1).toString()}))},disabled:!f,children:Object(r.jsx)(ft.a,{})}):null,t||m?Object(r.jsx)(jt.a,{onClick:function(){c(Object(l.a)(Object(l.a)({},a),{},{count:Math.max(u-1,0).toString()}))},disabled:!f,children:Object(r.jsx)(pt.a,{})}):null,h?Object(r.jsx)(Ot,{disabled:0===u,grade:p,onUpdateGrade:function(e){var t=Object(l.a)(Object(l.a)({},a),{},{grade:e});e===C.Alpha&&delete t.grade,c(t)}}):null]})]})},yt=Object(We.a)({items:{display:"flex",flexDirection:"column"}}),wt=function(e){var t=e.items,a=e.createCostLabel,n=e.onUpdateItems,o=yt(),i=function(e){var a=Object(u.a)(t);a[t.findIndex((function(t){return t.name===e.name}))]=e,n(a)};return Object(r.jsxs)(c.Fragment,{children:[Object(r.jsx)(ut.a,{}),Object(r.jsx)("div",{className:o.items,children:t?t.map((function(e){return Object(r.jsx)(xt,{item:e,createCostLabel:a,onUpdateItem:i})})):Object(r.jsx)("div",{children:"No items"})})]})},Ct=function(e){var t,a=e.open,n=e.onClose,o=e.title,i=e.allItems,d=e.createCostLabel,j=e.onUpdateAllItems,m=Object.keys(i),b=Object(u.a)(m),p=new Map,v=Object(f.a)(b);try{for(v.s();!(t=v.n()).done;){var O=t.value,g=O.split("."),x=g[g.length-1],y=Object(h.a)(x);p.set(O,y)}}catch(S){v.e(S)}finally{v.f()}var w=Object(c.useState)(b[0]),C=Object(s.a)(w,2),k=C[0],N=C[1];void 0===b.find((function(e){return e===k}))&&N(b[0]);return Object(r.jsxs)(it.a,{open:a,onClose:n,children:[Object(r.jsx)(st.a,{children:o}),Object(r.jsxs)(lt.a,{children:[b.length>1?Object(r.jsx)(qe.a,{id:"group",value:k,displayEmpty:!0,onChange:function(e){N(e.target.value)},variant:"outlined",children:b.map((function(e){return Object(r.jsx)(Ze.a,{value:e,children:p.get(e)},e)}))}):null,Object(r.jsx)(wt,{label:p.get(k),items:i[k],createCostLabel:d,onUpdateItems:function(e){var t=Object(l.a)({},i);t[k]=e,j(t)}})]})]})},kt=a(102),Nt=function(e){var t,a=e.title,n=e.items,o=e.allItems,i=e.createCostLabel,l=e.onUpdateItems,d=Object(c.useState)(!1),j=Object(s.a)(d,2),m=j[0],b=j[1],p=function(e){var t,a=new Map,n=Object.keys(e).map((function(e){return e.split(".")}));if(n.length>1){var r=!1;for(t=0;!r;){if(t>=n[0].length)throw new Error("Searched through all path components and found no differences");for(var c=1;c<n.length;c++)if(n[0][t]!==n[c][t]){r=!0;break}t++}}else{if(1!==n.length)throw new Error("There are no paths");t=n[0].length-1}var o,i=Object(f.a)(n);try{for(i.s();!(o=i.n()).done;){var l=o.value,s=l.slice(0,t).join("."),u=l[t-1];a.set(s,Object(h.a)(u))}}catch(d){i.e(d)}finally{i.f()}return a}(o),v=[],O=Object(f.a)(p.keys());try{for(O.s();!(t=O.n()).done;){var g=t.value;v.push(g)}}catch(Q){O.e(Q)}finally{O.f()}for(var x=Object(c.useState)(v[0]),w=Object(s.a)(x,2),C=w[0],k=w[1],N=Object(c.useState)(null),S=Object(s.a)(N,2),L=S[0],I=S[1],U=y(o,C),A={},D=!1,M=0,T=Object.keys(U);M<T.length;M++){var B=T[M];D=!0;var V,W=Object(u.a)(U[B]),F=rt(n,C),G=Object(f.a)(W);try{var P=function(){var e=V.value,t=F.find((function(t){return t.name===e.name}));t?(e.count=t.count,e.grade=t.grade):e.count="0"};for(G.s();!(V=G.n()).done;)P()}catch(Q){G.e(Q)}finally{G.f()}A[B]=W}var R=function(e){for(var t=Object.keys(e).map((function(e){return e.split(".")})),a=0,n=0;;n++){var r,c=void 0,o=!0,i=Object(f.a)(t);try{for(i.s();!(r=i.n()).done;){var l=r.value;if(n>=l.length){o=!1;break}if(void 0===c)c=l[n];else if(c!==l[n]){o=!1;break}}}catch(Q){i.e(Q)}finally{i.f()}if(!o)break;a++}return 0===a?[]:t[0].slice(0,a)}(o),J=R.join("."),H=function(e){var t,a=0,n=Object.keys(e).map((function(e){return e.split(".")})),r=Object(f.a)(n);try{for(r.s();!(t=r.n()).done;){var c=t.value;a=Math.max(a,c.length)}}catch(Q){r.e(Q)}finally{r.f()}return a}(o),q=R.length+1<H;return Object(r.jsxs)(c.Fragment,{children:[Object(r.jsx)(Ie.a,{onClick:function(e){q?I(e.currentTarget):(k(J),b(!0))},color:"secondary",size:"medium",disableRipple:!0,children:Object(r.jsx)(ot.a,{})}),q?Object(r.jsx)(kt.a,{anchorEl:L,open:Boolean(L),onClose:function(){return I(null)},children:v.map((function(e){return Object(r.jsx)(Ze.a,{onClick:function(){!function(e){k(e),I(null),b(!0)}(e)},children:Object(h.a)(p.get(e))},e)}))}):null,D?Object(r.jsx)(Ct,{open:m,onClose:function(){return b(!1)},title:q?"".concat(a," - ").concat(p.get(C)):a,allItems:A,createCostLabel:i,onUpdateAllItems:function(e){for(var t=Object(u.a)(n),a=function(){var a,n=c[r],o=Object(f.a)(e[n]);try{var i=function(){var e=a.value,r=parseInt(e.count)>0,c=t.findIndex((function(t){return t.path===n&&t.name===e.name}));c>-1?r?t[c]=E(n,e):t.splice(c,1):r&&t.push(E(n,e))};for(o.s();!(a=o.n()).done;)i()}catch(Q){o.e(Q)}finally{o.f()}},r=0,c=Object.keys(e);r<c.length;r++)a();l(t)}}):null]})},St=Object(We.a)({headerLabel:{lineHeight:3,fontWeight:700}}),Lt=function(e){var t,a=e.label,n=e.items,c=e.allItems,o=e.createItemLabel,i=e.createItemCostLabel,l=e.onUpdateItems,s=Ne("selectedCharacter").options,d=St(),j=0,m=Object(f.a)(n);try{for(m.s();!(t=m.n()).done;){var b=t.value;j+=U(b,c,s.gearLevel)*parseInt(b.count)}}catch(g){m.e(g)}finally{m.f()}for(var h=[],p=0,v=Object.keys(c);p<v.length;p++){var O=v[p];h.push.apply(h,Object(u.a)(c[O]))}return Object(r.jsxs)($e.a,{defaultExpanded:!1,children:[Object(r.jsxs)(Ke.a,{expandIcon:Object(r.jsx)(et.a,{}),children:[Object(r.jsx)(Xe.a,{onClick:function(e){return e.stopPropagation()},onFocus:function(e){return e.stopPropagation()},control:Object(r.jsx)(Nt,{title:a,items:n,allItems:c,createCostLabel:i,onUpdateItems:function(e){l(e)}}),label:""}),Object(r.jsxs)(Re.a,{className:d.headerLabel,children:[a," (",j,")"]})]}),Object(r.jsx)(Ye.a,{children:Object(r.jsx)(nt,{values:n,createChipLabel:o,onDeleteValue:function(e){var t=Object(u.a)(n),a=t.findIndex((function(t){return t.name===e.name}));if(a<0)throw new Error("Could not find item '".concat(e.name,"' to delete in list '").concat(JSON.stringify(t),"'"));t.splice(a,1),l(t)}})})]})},It=function(){var e=Ce(),t=Ne("selectedCharacter"),a=t.qualities,n=Ne("allQualities"),c=function(e){var t=O(e,n);return t>0?"+".concat(t):"".concat(t)};return Object(r.jsx)(Lt,{label:"Qualities",items:a,allItems:n,createItemLabel:function(e){var t=e.name,a=c(e);return"".concat(t," (").concat(a,")")},createItemCostLabel:c,onUpdateItems:function(a){var n=Object(l.a)(Object(l.a)({},t),{},{qualities:a});e({type:be.UpdateCharacter,data:n})}})},Ut=a(212),Et=Object(We.a)({root:{display:"flex",height:50},name:{width:200},slider:{width:300,marginRight:10}}),At=function(e){var t=e.property,a=e.onUpdate,n=e.min,c=e.max,o=e.step,i=e.formatDisplayValue,l=e.computeCost,s=t.name,u=t.rating,d=Et();return Object(r.jsxs)("div",{className:d.root,children:[Object(r.jsx)(Re.a,{gutterBottom:!0,className:d.name,children:s}),Object(r.jsx)("div",{className:d.slider,children:Object(r.jsx)(Ut.a,{step:o,min:n,max:c,value:u,marks:!0,valueLabelDisplay:"on",onChange:function(e,t){if(Array.isArray(t))throw new Error("Property element '".concat(e.target.id,"' has an array of values instead of a single value: [").concat(t.join(", "),"]"));a({name:s,rating:t})},valueLabelFormat:function(e,t){return i(e)}})}),Object(r.jsxs)(Re.a,{gutterBottom:!0,children:["(",l(u),")"]})]})},Dt=Object(We.a)({root:{paddingTop:50,paddingLeft:16}}),Mt=function(){var e=Ce(),t=Dt(),a=Ne("selectedCharacter"),n={name:"Professionalism",rating:a.professionalism};return Object(r.jsx)("div",{className:t.root,children:Object(r.jsx)(At,{property:n,min:0,max:6,step:1,formatDisplayValue:function(e){return e.toString()},computeCost:V,onUpdate:function(t){var n=Object(l.a)({},a);n.professionalism=t.rating,e({type:be.UpdateCharacter,data:n})}})})},Tt=Object(We.a)({header:{display:"flex",flexDirection:"row",marginLeft:5,marginRight:5,marginBottom:10,alignItems:"center"},field:{marginRight:10,marginTop:20},divider:{margin:5}}),Bt=function(){var e=Tt(),t=Ce(),a=Ne("selectedCharacter"),n=a.name,o=a.streetName,i=a.metaType,s=function(e){var a=e;t({type:be.UpdateCharacter,data:a})};return Object(r.jsxs)(c.Fragment,{children:[Object(r.jsxs)("div",{className:e.header,children:[Object(r.jsx)(Qe.a,{"id-":"name",label:"Name",value:n,onChange:function(e){return s(Object(l.a)(Object(l.a)({},a),{},{name:e.target.value}))},className:e.field,variant:"outlined"}),Object(r.jsx)(Qe.a,{"id-":"street-name",label:"Street Name",value:o,onChange:function(e){return s(Object(l.a)(Object(l.a)({},a),{},{streetName:e.target.value}))},className:e.field,variant:"outlined"}),Object(r.jsx)(qe.a,{id:"meta-type",value:i,displayEmpty:!0,onChange:function(e){return s(Object(l.a)(Object(l.a)({},a),{},{metaType:e.target.value}))},className:e.field,variant:"outlined",children:ze.map((function(e){return Object(r.jsxs)(Ze.a,{value:e,children:[e," (",Q(e),")"]},e)}))}),Object(r.jsx)(Mt,{})]}),Object(r.jsx)(It,{})]})};function Vt(e,t){var a=[];for(var n in e)n.startsWith(t)&&a.push(e[n]);return a}var Wt=a(195),Ft=Object(We.a)({content:{width:"100%"},header:{display:"flex"},name:{minWidth:300,maxWidth:300,textAlign:"left"},availability:{minWidth:100,maxWidth:100,textAlign:"center"},cost:{minWidth:100,maxWidth:100,textAlign:"right"},ul:{padding:0}}),Gt=function(e){var t=e.open,a=e.onClose,n=e.title,o=e.items,i=e.onItemSelectionChange,u=e.includeAvailability,d=e.includeCost,j=e.allowNewItems,m=e.allowMultiSelection,b=Ft(),f=Object(c.useState)(""),h=Object(s.a)(f,2),p=h[0],v=h[1],O=Object(c.useState)(""),g=Object(s.a)(O,2),x=g[0],y=g[1],w=Object(c.useState)(""),C=Object(s.a)(w,2),k=C[0],N=C[1],S=function(e){var t=e.target.value;switch(e.target.id){case"new-item-name":v(t);break;case"new-item-availability":y(t);break;case"new-item-cost":N(t)}};return Object(r.jsxs)(it.a,{open:t,onClose:a,children:[Object(r.jsx)(st.a,{children:n}),Object(r.jsx)(lt.a,{className:b.content,children:Object(r.jsxs)(Fe.a,{children:[Object(r.jsxs)(Ge.a,{className:b.header,children:[Object(r.jsx)(Re.a,{className:b.name,children:"Name"}),u?Object(r.jsx)(Re.a,{className:b.availability,children:"i.availability"}):null,d?Object(r.jsx)(Re.a,{className:b.cost,children:"Cost"}):null]},"header"),j?Object(r.jsxs)(Ge.a,{children:[Object(r.jsx)(Qe.a,{id:"new-item-name",label:"Custom",value:p,onChange:S,className:b.name,variant:"outlined"}),u?Object(r.jsx)(Qe.a,{id:"new-item-availability",label:"Availability",value:x,onChange:S,className:b.availability,variant:"outlined"}):null,d?Object(r.jsx)(Qe.a,{id:"new-item-cost",label:"Cost",value:k,onChange:S,className:b.cost,variant:"outlined"}):null,Object(r.jsx)(Ie.a,{"aria-label":"create",onClick:function(){var e={Name:p,selected:!0};u&&(e.Availability=x),d&&(e.Cost=k),i(e),v(""),y(""),N("")},color:"secondary",size:"small",children:Object(r.jsx)(ft.a,{})})]},"new-item"):null,o.map((function(e){return Object(r.jsxs)(Ge.a,{children:[Object(r.jsx)(Wt.a,{className:b.name,children:e.Name}),u?Object(r.jsx)(Wt.a,{className:b.availability,children:e.Availability}):null,d?Object(r.jsx)(Wt.a,{className:b.cost,children:e.Cost}):null,m?Object(r.jsxs)(c.Fragment,{children:[Object(r.jsx)(Ie.a,{"aria-label":"add",onClick:function(){return i(Object(l.a)(Object(l.a)({},e),{},{selected:!0}))},color:"secondary",size:"small",children:Object(r.jsx)(ft.a,{})}),Object(r.jsx)(Ie.a,{"aria-label":"remove",onClick:function(){return i(Object(l.a)(Object(l.a)({},e),{},{selected:!1}))},disabled:!e.selected,color:"secondary",size:"small",children:Object(r.jsx)(pt.a,{})})]}):Object(r.jsx)(Ie.a,{"aria-label":e.selected?"remove":"add",onClick:function(){return i(Object(l.a)(Object(l.a)({},e),{},{selected:!e.selected}))},color:"secondary",size:"small",children:e.selected?Object(r.jsx)(pt.a,{}):Object(r.jsx)(ft.a,{})})]},e.Name)}))]})})]})},Pt=function(e){var t=e[Object.keys(e)[0]];if(void 0===t)throw new Error("Could not find a name for value '".concat(JSON.stringify(e),"'"));return t},Rt=Object(We.a)({editButton:{paddingLeft:10}}),Jt=function(e){var t=e.breadcrums,a=e.values,n=e.selectedValueNames,o=e.addValue,i=e.removeValue,l=e.includeAvailability,u=void 0!==l&&l,d=e.includeCost,j=void 0!==d&&d,m=e.allowNewValues,b=void 0!==m&&m,f=e.createValue,h=e.allowMultiSelection,p=void 0!==h&&h,v=Rt(),O=Object(c.useState)(!1),g=Object(s.a)(O,2),x=g[0],y=g[1],w=t.join(" - "),C=a.map((function(e){return function(e,t,a,n){var r=Pt(e),c=a?function(e){var t=e.Availability;return void 0===t?"-":t}(e):void 0,o=n?function(e){var t=e.Cost;return void 0===t?"0":t}(e):void 0,i=void 0!==t.find((function(e){return e===r}));return{Name:r,Cost:o,Availability:c,selected:i}}(e,n,u,j)}));return Object(r.jsxs)(c.Fragment,{children:[Object(r.jsx)(Ie.a,{"aria-label":"add",onClick:function(){return y(!0)},color:"secondary",size:"medium",className:v.editButton,disableRipple:!0,children:Object(r.jsx)(ot.a,{})}),Object(r.jsx)(Gt,{open:x,onClose:function(){return y(!1)},title:w,items:C,onItemSelectionChange:function(e){var t=e.Name,n=e.Availability,r=e.Cost;if(e.selected){if(o(t),void 0===a.find((function(e){return Pt(e)===t}))){var c={Name:t,Availability:n,Cost:r};if(!f)throw new Error("Attempting to create new item '".concat(JSON.stringify(c),"' with no createValue prop"));f(c)}}else i(t)},includeAvailability:u,includeCost:j,allowNewItems:b,allowMultiSelection:p})]})},Ht=function(e){var t=e.skill,a=e.onUpdate,n=e.computeCost;return Object(r.jsx)(At,{property:t,onUpdate:a,min:1,max:7,step:2,formatDisplayValue:function(e){return e.toString()},computeCost:n})},qt=Object(We.a)({header:{display:"flex",flexDirection:"row",marginBottom:20,paddingLeft:16,paddingTop:12},headerLabel:{lineHeight:3,fontWeight:700}}),Qt=function(e){var t=e.breadcrums,a=e.skills,n=e.allSkills,o=e.headerLabel,i=e.computeSkillCost,l=e.onSkillsUpdated,s=qt(),d=Ce(),j=Ne("customItems");a.sort((function(e,t){return e.name.localeCompare(t.name)}));var m=t.join(".");n.push.apply(n,Object(u.a)(Vt(j,m))),n.sort((function(e,t){return e.Name.localeCompare(t.Name)}));var b=function(e){var t=Object(u.a)(a),n=a.findIndex((function(t){return t.name===e.name}));n>-1?e.rating>0?t[n]=e:t.splice(n,1):e.rating>0&&t.push(e),l(t)};return Object(r.jsx)(c.Fragment,{children:Object(r.jsxs)($e.a,{defaultExpanded:!1,children:[Object(r.jsxs)(Ke.a,{expandIcon:Object(r.jsx)(et.a,{}),children:[Object(r.jsx)(Xe.a,{onClick:function(e){return e.stopPropagation()},onFocus:function(e){return e.stopPropagation()},control:Object(r.jsx)(Jt,{breadcrums:t,values:n,selectedValueNames:a.map((function(e){return e.name})),addValue:function(e){b({name:e,rating:1})},removeValue:function(e){b({name:e,rating:-1})},allowNewValues:!0,createValue:function(e){var t={path:"".concat(m,".").concat(e.Name),item:e};d({type:be.AddCustomItem,data:t})}}),label:""}),Object(r.jsx)(Re.a,{className:s.headerLabel,children:o})]}),Object(r.jsx)(Ye.a,{children:Object(r.jsx)(Fe.a,{children:a.map((function(e){return Object(r.jsx)(Ge.a,{children:Object(r.jsx)(Ht,{skill:e,onUpdate:b,computeCost:i})},e.name)}))})})]})})},Zt=["Skills","Active"],zt=function(){var e=Ce(),t=Ne("selectedCharacter"),a=Ne("allSkills"),n=t.activeSkills,c=ee(n),o="Active Skills (".concat(c,")"),i=Object(u.a)(a.active);return Object(r.jsx)(Qt,{breadcrums:Zt,skills:n,allSkills:i,headerLabel:o,computeSkillCost:_,onSkillsUpdated:function(a){var n=Object(l.a)(Object(l.a)({},t),{},{activeSkills:a});e({type:be.UpdateCharacter,data:n})}})},$t=["Skills","Knowledge"],Kt=function(){var e=Ce(),t=Ne("selectedCharacter"),a=Ne("allSkills"),n=t.knowledgeSkills,c=ae(n),o=ne(t),i=c-o,s="Knowledge Skills (".concat(c," - ").concat(o," = ").concat(i,")"),d=Object(u.a)(a.knowledge);return Object(r.jsx)(Qt,{breadcrums:$t,skills:n,allSkills:d,headerLabel:s,computeSkillCost:te,onSkillsUpdated:function(a){var n=Object(l.a)(Object(l.a)({},t),{},{knowledgeSkills:a});e({type:be.UpdateCharacter,data:n})}})},Yt=["Skills","Language"],Xt=function(){var e=Ce(),t=Ne("selectedCharacter"),a=Ne("allSkills"),n=t.languageSkills,c=ae(n),o="Language Skills (".concat(c,") + Native"),i=Object(u.a)(a.language);return Object(r.jsx)(Qt,{breadcrums:Yt,skills:n,allSkills:i,headerLabel:o,computeSkillCost:te,onSkillsUpdated:function(a){var n=Object(l.a)(Object(l.a)({},t),{},{languageSkills:a});e({type:be.UpdateCharacter,data:n})}})},_t=function(){return Object(r.jsxs)(c.Fragment,{children:[Object(r.jsx)(zt,{}),Object(r.jsx)(Kt,{}),Object(r.jsx)(Xt,{})]})},ea=a(76),ta=a.n(ea),aa=Object(We.a)({root:{paddingLeft:20,paddingRight:20},badge:{marginLeft:50}}),na=function(){var e=aa(),t=Ne("karma"),a=t.total,n=t.spent,c=t.available;return Object(r.jsxs)("div",{className:e.root,children:[Object(r.jsx)(Ue.a,{className:e.badge,badgeContent:a,color:"primary",max:999,showZero:!0,children:Object(r.jsx)(ta.a,{})}),Object(r.jsx)(Ue.a,{className:e.badge,badgeContent:n,color:"secondary",max:999,showZero:!0,children:Object(r.jsx)(ta.a,{})}),Object(r.jsx)(Ue.a,{className:e.badge,badgeContent:c,color:"primary",max:999,showZero:!0,children:Object(r.jsx)(ta.a,{})})]})},ra=function(e){var t=e.attribute,a=e.metaType,n=e.onUpdate,c=K(a,t.name);return Object(r.jsx)(At,{property:t,onUpdate:n,min:1,max:7,step:1,formatDisplayValue:function(e){return(e+c).toString()},computeCost:Y})},ca=Object(We.a)({header:{marginBottom:20,paddingLeft:16,paddingTop:12,fontWeight:700}}),oa=function(){var e=Ce(),t=Ne("selectedCharacter"),a=ca(),n=t.attributes,o=t.metaType,i=n.filter((function(e){return B(t)||"Magic"!==e.name})),s=X(t),d=function(a){var r=Object(u.a)(n),c=r.findIndex((function(e){return e.name===a.name}));r[c]=a,e({type:be.UpdateCharacter,data:Object(l.a)(Object(l.a)({},t),{},{attributes:r})})};return Object(r.jsxs)(c.Fragment,{children:[Object(r.jsxs)(Re.a,{className:a.header,children:["Attributes (",s,")"]}),Object(r.jsx)(Fe.a,{children:i.map((function(e){return Object(r.jsx)(Ge.a,{children:Object(r.jsx)(ra,{attribute:e,metaType:o,onUpdate:d})},e.name)}))})]})},ia=function(){return Object(r.jsx)(oa,{})},la=Object(We.a)({headerLabel:{fontWeight:700},details:{display:"flex",flexDirection:"column"},rating:{marginTop:30}}),sa=function(e){var t=e.contact,a=e.onUpdate,o=Ne("selectedCharacter").options,i=la(),s=le(t),u={name:"Connection",rating:t.connection},d={name:"Loyalty",rating:t.loyalty},j=function(e){switch(e){case n.Street:return 3;case n.Normal:return 5;case n.Elite:return 7;default:throw new Error("Unknown level '".concat(e,"'"))}}(o.connectionLevel);return Object(r.jsx)(c.Fragment,{children:Object(r.jsxs)($e.a,{defaultExpanded:!1,children:[Object(r.jsx)(Ke.a,{expandIcon:Object(r.jsx)(et.a,{}),children:Object(r.jsxs)(Re.a,{className:i.headerLabel,children:[t.name," (",s,")"]})}),Object(r.jsx)(Ye.a,{children:Object(r.jsxs)("div",{className:i.details,children:[Object(r.jsx)("div",{className:i.rating,children:Object(r.jsx)(At,{property:u,onUpdate:function(e){var n=Object(l.a)(Object(l.a)({},t),{},{connection:e.rating});a(n)},min:1,max:j,step:2,formatDisplayValue:function(e){return e.toString()},computeCost:ie})}),Object(r.jsx)("div",{className:i.rating,children:Object(r.jsx)(At,{property:d,onUpdate:function(e){var n=Object(l.a)(Object(l.a)({},t),{},{loyalty:e.rating});a(n)},min:1,max:5,step:2,formatDisplayValue:function(e){return e.toString()},computeCost:ie})})]})})]})})},ua=Object(We.a)({header:{display:"flex",flexDirection:"row"},headerLabel:{lineHeight:3,fontWeight:700}}),da=["Contacts"],ja=da.join("."),ma=function(){var e=ua(),t=Ce(),a=Ne("selectedCharacter"),n=Ne("allContacts"),o=Ne("customItems"),i=a.contacts;i.sort((function(e,t){return e.name.localeCompare(t.name)}));var s=ue(a),d=se(a),j=Math.max(s-d,0),m="Contacts (".concat(s," - ").concat(d," = ").concat(j,")");n.push.apply(n,Object(u.a)(Vt(o,ja))),n.sort((function(e,t){return e.Name.localeCompare(t.Name)}));var b=function(e){var n=Object(u.a)(i),r=i.findIndex((function(t){return t.name===e.name}));r>-1?e.connection>0&&e.loyalty>0?n[r]=e:n.splice(r,1):e.connection>0&&e.loyalty>0&&n.push(e);var c=Object(l.a)(Object(l.a)({},a),{},{contacts:n});t({type:be.UpdateCharacter,data:c})};return Object(r.jsxs)(c.Fragment,{children:[Object(r.jsxs)("div",{className:e.header,children:[Object(r.jsx)(Jt,{breadcrums:da,values:n,selectedValueNames:i.map((function(e){return e.name})),addValue:function(e){b({name:e,connection:1,loyalty:1})},removeValue:function(e){b({name:e,connection:-1,loyalty:-1})},allowNewValues:!0,createValue:function(e){var a={path:"".concat(ja,".").concat(e.Name),item:e};t({type:be.AddCustomItem,data:a})}}),Object(r.jsx)(Re.a,{className:e.headerLabel,children:m})]}),Object(r.jsx)(Fe.a,{children:i.map((function(e){return Object(r.jsx)(sa,{contact:e,onUpdate:b},e.name)}))})]})},ba=function(){return Object(r.jsx)(ma,{})},fa=Object(We.a)({root:{paddingTop:50,paddingLeft:16}}),ha=function(){var e=Ce(),t=fa(),a=Ne("selectedCharacter"),n={name:"Initiate Grade",rating:a.initiateGrade};return Object(r.jsx)("div",{className:t.root,children:Object(r.jsx)(At,{property:n,min:0,max:6,step:1,formatDisplayValue:function(e){return"".concat(e)},computeCost:he,onUpdate:function(t){var n=Object(l.a)({},a);n.initiateGrade=t.rating,e({type:be.UpdateCharacter,data:n})}})})},pa=Object(We.a)({header:{marginTop:10,marginLeft:5},section:{display:"flex",flexDirection:"row",marginBottom:10}}),va=function(){var e=pa(),t=Ce(),a=Ne("selectedCharacter"),n=a.spells,o=a.powers,i=a.metaMagics,s=Ne("allSpells"),d=Ne("allPowers"),j={},m={};for(var b in d)if("powers.adept-powers"===b)j[b]=Object(u.a)(d[b]);else{if("powers.metamagic"!==b)throw new Error("Unknown group of powers '".concat(b,"'"));m[b]=Object(u.a)(d[b])}var f=a.qualities.find((function(e){return"Magician"===e.name})),h=a.qualities.find((function(e){return"Adept"===e.name})),p=function(e){var t=function(e,t){return O(e,t)}(e,d);return"".concat(t)};return Object(r.jsxs)(c.Fragment,{children:[f?Object(r.jsx)(Lt,{label:"Spells",items:n,allItems:s,createItemLabel:function(e){var t=e.name;return"".concat(t," (5)")},createItemCostLabel:function(e){return"5"},onUpdateItems:function(e){var n=Object(l.a)(Object(l.a)({},a),{},{spells:e});t({type:be.UpdateCharacter,data:n})}}):null,h?Object(r.jsx)(Lt,{label:"Powers",items:o,allItems:j,createItemLabel:function(e){var t=e.name,a=p(e);return"".concat(t," (").concat(a,")")},createItemCostLabel:p,onUpdateItems:function(e){var n=Object(l.a)(Object(l.a)({},a),{},{powers:e});t({type:be.UpdateCharacter,data:n})}}):null,Object(r.jsx)(Re.a,{className:e.header,children:"Initiation"}),Object(r.jsx)(ut.a,{}),Object(r.jsx)(ha,{}),Object(r.jsx)(Lt,{label:"Metamagics",items:i,allItems:m,createItemLabel:function(e){var t=e.name;return"".concat(t," (10)")},createItemCostLabel:function(e){return"10"},onUpdateItems:function(e){var n=Object(l.a)(Object(l.a)({},a),{},{metaMagics:e});t({type:be.UpdateCharacter,data:n})}})]})},Oa=function(){var e=Ce(),t=Ne("selectedCharacter"),a=t.options,n=t.gear,o=Ne("allGear"),i=function(e){var t=U(e,o,a.gearLevel);return"\xa5".concat(t)},s=function(e){var t=e.name,a=i(e),n="".concat(t," (").concat(a,")");return e.path.startsWith("".concat(N,".augmentations"))&&(n+=" [".concat(e.grade||C.Alpha,": ").concat(e.essence||0,"E]")),n};return Object(r.jsx)(c.Fragment,{children:x(o,N).map((function(a){return Object(r.jsx)(Lt,{label:Object(h.a)(a),items:rt(n,"".concat(N,".").concat(a)),allItems:y(o,"".concat(N,".").concat(a)),createItemLabel:s,createItemCostLabel:i,onUpdateItems:function(r){return function(a,r){var c=n.filter((function(e){return!e.path.startsWith("".concat(N,".").concat(a))}));c.push.apply(c,Object(u.a)(r));var o=Object(l.a)(Object(l.a)({},t),{},{gear:c});e({type:be.UpdateCharacter,data:o})}(a,r)}},a)}))})},ga=a(214),xa=Object(We.a)((function(e){return{root:{display:"flex",flexDirection:"row",marginLeft:10,marginTop:10},name:{lineHeight:"40px"},value:{marginLeft:5,color:e.palette.getContrastText(e.palette.primary.main),backgroundColor:e.palette.primary.main}}})),ya=function(e){var t=e.name,a=e.value,n=xa();return Object(r.jsxs)("div",{className:n.root,children:[Object(r.jsx)(Re.a,{className:n.name,children:t}),Object(r.jsx)(ga.a,{className:n.value,children:a})]})},wa=Object(We.a)((function(e){return{root:{display:"flex",flexDirection:"row",marginLeft:10,marginTop:10,alignItems:"center",marginRight:5},label:{display:"flex",flexDirection:"column"},name:{lineHeight:"40px"},value:{marginLeft:5,color:e.palette.getContrastText(e.palette.primary.main),backgroundColor:e.palette.primary.main},button:{padding:0,marginLeft:5,lineHeight:1.2}}})),Ca=function(e){var t=e.name,a=e.value,n=e.modifier,c=e.updateModifier,o=wa();return Object(r.jsxs)("div",{className:o.root,children:[Object(r.jsx)(Re.a,{className:o.name,children:t}),Object(r.jsx)(Ue.a,{badgeContent:n,color:"secondary",max:9,children:Object(r.jsx)(ga.a,{className:o.value,children:a+n})}),Object(r.jsxs)(dt.a,{orientation:"vertical",children:[Object(r.jsx)(jt.a,{className:o.button,onClick:function(){c(n+1)},children:"+"}),Object(r.jsx)(jt.a,{className:o.button,onClick:function(){c(n-1)},children:"-"})]})]})},ka=Object(We.a)({header:{marginTop:10,marginLeft:5},section:{display:"flex",flexDirection:"row",marginBottom:10}}),Na=function(){var e,t,a=ka(),n=Ce(),o=Ne("selectedCharacter"),i=z(o,"Body"),s=z(o,"Agility"),d=z(o,"Reaction"),j=z(o,"Strength"),m=z(o,"Charisma"),b=z(o,"Intuition"),h=z(o,"Logic"),p=z(o,"Willpower"),v=6,O=Object(f.a)(o.gear);try{for(O.s();!(t=O.n()).done;){var g=t.value;void 0!==g.essence&&(v-=parseFloat(g.essence))}}catch(A){O.e(A)}finally{O.f()}var x=B(o),y=z(o,"Magic");y-=Math.ceil(6-v);var w=(null===(e=o.activeSkills.find((function(e){return"Athletics"===e.name})))||void 0===e?void 0:e.rating)||0,C=$(o,"Reaction")+$(o,"Intuition"),N=8+Math.ceil($(o,"Body")/2),S=8+Math.ceil($(o,"Willpower")/2),L=s;o.metaType!==k.Dwarf&&(L+=1);var I=L+w;o.metaType!==k.Dwarf&&(I+=2);var U=2*I,E=function(e){var t=e.name,a=e.value,c=Z(o,t);return Object(r.jsx)(Ca,{name:t,value:a,modifier:c,updateModifier:function(e){var a=Object(u.a)(o.modifiers),r=a.findIndex((function(e){return e.name===t}));r>-1&&a.splice(r,1),a.push({name:t,rating:e});var c=Object(l.a)(Object(l.a)({},o),{},{modifiers:a});n({type:be.UpdateCharacter,data:c})}})};return Object(r.jsxs)(c.Fragment,{children:[Object(r.jsx)(Re.a,{className:a.header,children:"Attributes"}),Object(r.jsx)(ut.a,{}),Object(r.jsxs)("div",{className:a.section,children:[Object(r.jsx)(E,{name:"Body",value:i}),Object(r.jsx)(E,{name:"Agility",value:s}),Object(r.jsx)(E,{name:"Reaction",value:d}),Object(r.jsx)(E,{name:"Strength",value:j})]}),Object(r.jsxs)("div",{className:a.section,children:[Object(r.jsx)(E,{name:"Charisma",value:m}),Object(r.jsx)(E,{name:"Intuition",value:b}),Object(r.jsx)(E,{name:"Logic",value:h}),Object(r.jsx)(E,{name:"Willpower",value:p})]}),Object(r.jsxs)("div",{className:a.section,children:[Object(r.jsx)(ya,{name:"Essence",value:v}),x?Object(r.jsx)(ya,{name:"Magic",value:y}):null]}),Object(r.jsx)(Re.a,{className:a.header,children:"Initiative"}),Object(r.jsx)(ut.a,{}),Object(r.jsxs)("div",{className:a.section,children:[Object(r.jsx)(E,{name:"Initiative",value:C}),Object(r.jsx)(E,{name:"Initiative Passes",value:1})]}),Object(r.jsx)(Re.a,{className:a.header,children:"Condition Monitor"}),Object(r.jsx)(ut.a,{}),Object(r.jsxs)("div",{className:a.section,children:[Object(r.jsx)(ya,{name:"Physical Boxes",value:N}),Object(r.jsx)(ya,{name:"Stun Boxes",value:S})]}),Object(r.jsx)(Re.a,{className:a.header,children:"Movement"}),Object(r.jsx)(ut.a,{}),Object(r.jsxs)("div",{className:a.section,children:[Object(r.jsx)(ya,{name:"Sneaking",value:L}),Object(r.jsx)(ya,{name:"Walking",value:I}),Object(r.jsx)(ya,{name:"Running",value:U})]})]})};function Sa(e){return"".concat("/cyberpunk-character-creator","/").concat(e)}var La=a(196),Ia=a(197),Ua=function(e){var t=e.open,a=e.onChoice,n=e.content,c=function(){a(!1)};return Object(r.jsxs)(it.a,{open:t,onClose:c,children:[Object(r.jsx)(lt.a,{children:Object(r.jsx)(La.a,{children:n})}),Object(r.jsxs)(Ia.a,{children:[Object(r.jsx)(jt.a,{onClick:function(){a(!0)},color:"secondary",variant:"outlined",children:"Yes"}),Object(r.jsx)(jt.a,{onClick:c,color:"secondary",variant:"outlined",autoFocus:!0,children:"No"})]})]})},Ea=a(97),Aa=a.n(Ea),Da=a(207),Ma=function(e){var t=e.saveData;return Object(r.jsxs)(c.Fragment,{children:[Object(r.jsx)("input",{accept:"application/json",hidden:!0,id:"import-file",type:"file",onChange:function(e){var a=e.target.files;if(a&&0!==a.length){var n=a[0],r=new FileReader;r.onload=function(e){if(!e.target)throw new Error("Failed to load data from file '".concat(n.name,"'"));var a=e.target.result;if(!a)throw new Error("File '".concat(n.name,"' has no data"));t(a)},r.readAsText(n)}else console.log("No files selected")}}),Object(r.jsx)("label",{htmlFor:"import-file",children:Object(r.jsx)(Da.a,{title:"Import Character",children:Object(r.jsx)(Ie.a,{color:"secondary",component:"span",children:Object(r.jsx)(Aa.a,{})})})})]})},Ta=a(98),Ba=a.n(Ta),Va=function(e){var t=e.filename,a=e.generateData;return Object(r.jsx)(Da.a,{title:"Export Character",children:Object(r.jsx)(Ie.a,{onClick:function(){var e=a(),n=document.createElement("a");n.setAttribute("href","data:application/json;charset=utf-8,"+encodeURIComponent(e)),n.setAttribute("download",t),n.style.display="none",document.body.appendChild(n),n.click(),document.body.removeChild(n)},color:"secondary",children:Object(r.jsx)(Ba.a,{})})})},Wa=a(194),Fa=a(213),Ga=Object(We.a)({control:{margin:8,minWidth:100},label:{padding:4}}),Pa=function(e){var t=e.id,a=e.label,n=e.value,c=e.updateValue,o="".concat(t,"-level-select"),i="".concat(o,"-label"),l=Ga();return Object(r.jsxs)(Wa.a,{className:l.control,children:[Object(r.jsx)(Fa.a,{id:i,className:l.label,children:a}),Object(r.jsx)(qe.a,{labelId:i,id:o,value:n,onChange:function(e,t){c(e.target.value)},variant:"outlined",children:d.map((function(e){return Object(r.jsx)(Ze.a,{value:e,children:e},e)}))})]})},Ra=Object(We.a)({root:{display:"flex",flexDirection:"row"}}),Ja=function(){var e=Ce(),t=Ne("selectedCharacter").options,a=t.karmaLevel,n=t.connectionLevel,c=t.nuyenLevel,o=t.gearLevel,i=Ra(),s=function(t){var a=t;e({type:be.UpdateCreateOptions,data:a})};return Object(r.jsxs)("div",{className:i.root,children:[Object(r.jsx)(Pa,{id:"karma",label:"Karma",value:a,updateValue:function(e){return s(Object(l.a)(Object(l.a)({},t),{},{karmaLevel:e}))}}),Object(r.jsx)(Pa,{id:"connection",label:"Connection",value:n,updateValue:function(e){return s(Object(l.a)(Object(l.a)({},t),{},{connectionLevel:e}))}}),Object(r.jsx)(Pa,{id:"nuyen",label:"Nuyen",value:c,updateValue:function(e){return s(Object(l.a)(Object(l.a)({},t),{},{nuyenLevel:e}))}}),Object(r.jsx)(Pa,{id:"gear",label:"Gear",value:o,updateValue:function(e){return s(Object(l.a)(Object(l.a)({},t),{},{gearLevel:e}))}})]})},Ha=Object(We.a)({bar:{flexGrow:1,display:"flex",alignItems:"center"}}),qa=function(){var e=Ha(),t=Ce(),a=Ne("selectedCharacter"),n=Ne("allQualities"),o=Ne("allGear"),i=a.options,l=Object(c.useState)(!1),u=Object(s.a)(l,2),d=u[0],j=u[1],m=Object(c.useState)(0),b=Object(s.a)(m,2),f=b[0],h=b[1];Object(c.useEffect)((function(){fetch(Sa("data/qualities.json")).then((function(e){return e.json()})).then((function(e){var a=function(e){var t={};return p("qualities",e,t,ce),t}(e);t({type:be.LoadQualities,data:a})})).catch((function(e){console.error("Error occured loading qualities: ".concat(e.message,"\n").concat(e.stack))})),fetch(Sa("data/skills.json")).then((function(e){return e.json()})).then((function(e){var a=e;t({type:be.LoadSkills,data:a})})).catch((function(e){console.error("Error occured loading skills: ".concat(e.message,"\n").concat(e.stack))})),fetch(Sa("data/contacts.json")).then((function(e){return e.json()})).then((function(e){var a=e.all;t({type:be.LoadContacts,data:a})})).catch((function(e){console.error("Error occured loading contacts: ".concat(e.message,"\n").concat(e.stack))})),fetch(Sa("data/magic.json")).then((function(e){return e.json()})).then((function(e){var a=function(e){var t={};return p("spells",e,t,de),t}(e.spells);t({type:be.LoadSpells,data:a});var n=function(e){var t={};return p(je,e,t,me),t}(e.powers);t({type:be.LoadPowers,data:n})})).catch((function(e){console.error("Error occured loading magic: ".concat(e.message,"\n").concat(e.stack))})),fetch(Sa("data/gear.json")).then((function(e){return e.json()})).then((function(e){var a=function(e){var t={};return p(N,e,t,S),t}(e);t({type:be.LoadGear,data:a})})).catch((function(e){console.error("Error occured loading gear: ".concat(e.message,"\n").concat(e.stack))}))}),[t]);var v,O=Object(c.useState)(!1),g=Object(s.a)(O,2),x=g[0],y=g[1],w=Q(a.metaType)+oe(a,n)+V(a.professionalism),C=X(a),k=re(a),L=ue(a),I=pe(a),U=M(a,o,i.gearLevel),E=T(U,a.options.nuyenLevel);v=U<1e3?"\xa5".concat(U):U<1e6?"\xa5".concat(Math.round(U/100)/10,"K"):"\xa5".concat(Math.round(U/1e5)/10,"M");var A,D=B(a);switch(f){case 0:A=Object(r.jsx)(Bt,{});break;case 1:A=Object(r.jsx)(ia,{});break;case 2:A=Object(r.jsx)(_t,{});break;case 3:A=Object(r.jsx)(ba,{});break;case 4:A=Object(r.jsx)(Oa,{});break;case 5:A=Object(r.jsx)(va,{});break;case 6:A=Object(r.jsx)(Na,{});break;default:throw new Error("Unknown tab index ".concat(f))}var W;W=a.streetName.length>0?a.streetName:a.name.length>0?a.name:"[New Character]";var F="".concat(W,".json");return Object(r.jsxs)("div",{children:[Object(r.jsxs)(Se.a,{position:"sticky",color:"default",children:[Object(r.jsxs)(Le.a,{children:[Object(r.jsx)(Da.a,{title:"Characters",children:Object(r.jsx)(Ie.a,{edge:"start",onClick:function(){j(!0)},"aria-label":"characters",children:Object(r.jsx)(De.a,{})})}),Object(r.jsxs)("div",{className:e.bar,children:[Object(r.jsx)(Je,{character:a}),Object(r.jsx)(na,{}),Object(r.jsx)(Ja,{})]}),Object(r.jsx)(Ma,{saveData:function(e){var a=JSON.parse(e);t({type:be.ImportCharacter,data:a})}}),Object(r.jsx)(Va,{filename:F,generateData:function(){return JSON.stringify(a)}}),Object(r.jsx)(Ie.a,{"aria-label":"clear",onClick:function(){y(!0)},color:"secondary",children:Object(r.jsx)(Te.a,{})})]}),Object(r.jsxs)(Be.a,{value:f,onChange:function(e,t){h(t)},variant:"scrollable",children:[Object(r.jsx)(Ve.a,{label:Object(r.jsx)(Ue.a,{badgeContent:w,color:"default",showZero:!0,max:999,children:"Character"})}),Object(r.jsx)(Ve.a,{label:Object(r.jsx)(Ue.a,{badgeContent:C,color:"default",showZero:!0,max:999,children:"Attributes"})}),Object(r.jsx)(Ve.a,{label:Object(r.jsx)(Ue.a,{badgeContent:k,color:"default",showZero:!0,max:999,children:"Skills"})}),Object(r.jsx)(Ve.a,{label:Object(r.jsx)(Ue.a,{badgeContent:L,color:"default",showZero:!0,max:999,children:"Contacts"})}),Object(r.jsx)(Ve.a,{label:Object(r.jsx)(Ue.a,{badgeContent:v,color:"default",showZero:!0,max:1e6,anchorOrigin:{vertical:"top",horizontal:"left"},children:Object(r.jsx)(Ue.a,{badgeContent:E,color:"default",showZero:!0,max:999,anchorOrigin:{vertical:"top",horizontal:"right"},children:"Gear"})})}),Object(r.jsx)(Ve.a,{disabled:!D,label:Object(r.jsx)(Ue.a,{badgeContent:I,color:"default",showZero:!0,max:999,children:"Magic"})}),Object(r.jsx)(Ve.a,{label:"Stats"})]})]}),A,Object(r.jsx)(Ee.a,{open:d,onClose:function(){j(!1)},children:Object(r.jsx)(He,{})}),Object(r.jsx)(Ua,{open:x,onChoice:function(e){e&&t({type:be.ClearCharacter}),y(!1)},content:"Are you sure you want to delete this character? All data will be lost forever."})]})},Qa=a(101),Za=a(201),za=a(202),$a=Object(Qa.a)({palette:{type:"dark"}}),Ka=function(){var e=Object(c.useReducer)(ge,xe,(function(e){var t=function(){for(var e=[G()],t=0;t<localStorage.length;t++){var a=localStorage.key(t);if(null!==a&&/^character:\d+$/i.test(a)){var n=localStorage.getItem(a);if(n){var r=JSON.parse(n),c=r.key,o=r.name,i=r.streetName;e.push({key:c,name:o,streetName:i})}}}return e.sort((function(e,t){return e.key-t.key})),e}(),a=function(){var e=localStorage.getItem(H);return e?parseInt(e):-1}(),n=e.selectedCharacter;if(a>-1){var r=t.find((function(e){return e.key===a}));if(r){var c=R(r.key);c&&(n=c)}}return Object(l.a)(Object(l.a)({},e),{},{characters:t,selectedCharacter:n})})),t=Object(s.a)(e,2),a=t[0],n=t[1];return Object(r.jsx)(we.Provider,{value:n,children:Object(r.jsx)(ke.Provider,{value:a,children:Object(r.jsxs)(Za.a,{theme:$a,children:[Object(r.jsx)(za.a,{}),Object(r.jsx)(qa,{})]})})})};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(Object(r.jsx)(Ka,{}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[135,1,2]]]);
//# sourceMappingURL=main.f3cd30b8.chunk.js.map