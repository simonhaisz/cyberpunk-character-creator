(this["webpackJsonpcyberpunk-character-creator"]=this["webpackJsonpcyberpunk-character-creator"]||[]).push([[0],{125:function(e,t,a){},133:function(e,t,a){"use strict";a.r(t);var n,r=a(1),c=a(0),i=a(15),o=a.n(i),l=(a(125),a(5)),s=a(19),u=a(11);!function(e){e.Street="Street",e.Normal="Normal",e.Elite="Elite"}(n||(n={}));var d=[n.Street,n.Normal,n.Elite];function j(e){switch(e){case n.Street:return 6;case n.Normal:return 12;case n.Elite:return 18;default:throw new Error("Unknown level '".concat(e,"'"))}}var b={karmaLevel:n.Normal,connectionLevel:n.Normal,nuyenLevel:n.Normal,gearLevel:n.Normal},m=a(75),h=a(13),f=a(198);function v(e,t,a,n){for(var r=0,c=Object.keys(t);r<c.length;r++){var i=c[r],o="".concat(e,".").concat(i),l=t[i];Array.isArray(l)?a[o]=n(o,l):v(o,l,a,n)}}var O=new Map;function p(e,t){var a="".concat(e.path,".").concat(e.name);if(O.has(a))return O.get(a);var n=t[e.path];if(void 0===n)throw new Error("Could not find any items under path '".concat(e.path,"'"));var r=n.find((function(t){return t.name===e.name}));if(!r)throw new Error("Could not find item with name '".concat(e.name,"' in list '").concat(JSON.stringify(n),"' under path '").concat(e.path,"'"));var c=parseInt(r.cost);return O.set(a,c),c}var g=new Map;function x(e,t){var a,n=new Set,r=t.split("."),c=Object(h.a)(C(e,t));try{for(c.s();!(a=c.n()).done;){var i=a.value.split(".");n.add(i[r.length])}}catch(o){c.e(o)}finally{c.f()}return Array.from(n)}function y(e,t){var a,n={},r=Object(h.a)(C(e,t));try{for(r.s();!(a=r.n()).done;){var c=a.value;n[c]=e[c]}}catch(i){r.e(i)}finally{r.f()}return n}function C(e,t){for(var a=[],n=t.split("."),r=0,c=Object.keys(e);r<c.length;r++){var i=c[r],o=i.split(".");if(o.length<n.length)throw new Error("Child paths '".concat(i,"' must be longer than parent paths '").concat(t,"'"));for(var l=!0,s=0;s<n.length;s++)if(n[s]!==o[s]){l=!1;break}l&&a.push(i)}return a}var w,k,N="gear";function S(e,t){var a,n=[],r=Object(h.a)(t.map((function(t){return function(e,t){for(var a={path:e,name:"[NAME]",availability:"[AVAILABILITY]",cost:"[COST]",costLabel:"[COST]"},n=0,r=Object.keys(t);n<r.length;n++){var c=r[n],i=t[c];"Name"===c?a.name=i:"Availability"===c?a.availability=i:"Cost"===c?a.costLabel=i:"Essence"===c?a.essence=i:a[c]=i}return a}(e,t)})));try{for(r.s();!(a=r.n()).done;){var c=a.value;/^([\w-\s]+)\s+\(([\w-\s]+(,\s*)?)+\)$/i.test(c.name)?n.push.apply(n,Object(u.a)(L(e,c))):n.push(c)}}catch(l){r.e(l)}finally{r.f()}for(var i=0,o=n;i<o.length;i++){I(o[i])}return n}function L(e,t){var a=[],n=/^([\w-\s]+)\s+\(((?:(?:[\w-\s]+)(?:,\s*)?)+)\)$/i.exec(t.name);if(null===n)throw new Error("Gear item's name '".concat(t.name,"' does not contain multiple ratings"));for(var r=n[1],c=n[2].split(",").map((function(e){return e.trim()})),i=c.length,o=0;o<i;o++){for(var l={path:e,name:"".concat(r," - ").concat(c[o]),availability:"[AVAILABILITY]",cost:"[COST]",costLabel:"[COST]"},s=0,u=Object.keys(t);s<u.length;s++){var d=u[s];if("name"!==d&&"cost"!==d){var j=t[d],b=j.split(",").map((function(e){return e.trim()}));if(1===b.length)l[d]=j;else{if(b.length!==i)throw new Error("Properties should have a single value or the same amount as there are version names ".concat(i," - found ").concat(b.length));l[d]=b[o]}}}a.push(l)}return a}function I(e){var t=/^(?:x|\+)?(\d+)\s*(?:\(([\w\s]+)\))?$/i.exec(e.costLabel);if(t){if(e.cost=t[1],isNaN(parseInt(e.cost)))throw new Error("Gear item '".concat(e.name,"' has unsupported cost label '").concat(e.costLabel,"'"))}else e.cost="0"}function E(e,t,a){var n=p(e,t),r=1;void 0!==e.grade&&(r*=A(e.grade),r=A(e.grade));var c=function(e,t){var a="".concat(e.path,".").concat(e.name);if(g.has(a))return g.get(a);var n=t[e.path],r=n.find((function(t){return t.name===e.name}));if(!r)throw new Error("Could not find item with name '".concat(e.name,"' in list '").concat(JSON.stringify(n),"' under path '").concat(e.path,"'"));var c=r.availability;return g.set(a,r.availability),c}(e,t);return void 0!==c&&(r*=function(e,t){var a=D(e),n=a.rating,r=a.legality,c=j(t);if("F"===r){return n<=c?1:n<=c+2?2:n<=c+4?5:n<=c+6?10:Number.NaN}if("R"===r){var i=c+6;return n<=i?1:n<=i+2?2:n<=i+4?5:n<=i+6?10:Number.NaN}var o=c+12;return n<=o?1:n<=o+2?2:n<=o+4?5:n<=o+6?10:Number.NaN}(c,a)),n*r}function U(e,t){var a=t.name,n=t.count,r=t.grade,c=t.essence,i={path:e,name:a,count:n,grade:r,essence:c};return void 0===r&&delete i.grade,void 0===c&&delete i.essence,void 0!==r&&void 0!==c&&(i.essence=(parseFloat(c)*function(e){switch(e){case w.Used:return 1.2;case w.Alpha:return 1;case w.Beta:return.7;case w.Delta:return.5;default:throw new Error("Unknown augmentation grade '".concat(e,"'"))}}(r)).toPrecision(2)),i}function A(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:w.Alpha;switch(e){case w.Used:return.5;case w.Alpha:return 1;case w.Beta:return 5;case w.Delta:return 15;default:throw new Error("Unknown augmentation grade '".concat(e,"'"))}}function D(e){if("-"===e)return{rating:1,legality:"L"};var t=/^\+?(\d+)(R|F)?$/i.exec(e);return t?{rating:parseInt(t[1]),legality:t[2]||"L"}:(console.error("Unknown availability format '".concat(e,"' - falling back to standard cost")),{rating:1,legality:"L"})}function T(e,t,a){var n,r=0,c=Object(h.a)(e.gear);try{for(c.s();!(n=c.n()).done;){var i=n.value;r+=E(i,t,a)*parseInt(i.count)}}catch(o){c.e(o)}finally{c.f()}return r}function B(e,t){var a=function(e){switch(e){case n.Street:return 1e4;case n.Normal:return 2e4;case n.Elite:return 5e4;default:throw new Error("Unknown level '".concat(e,"'"))}}(t);return 5*Math.ceil(e/a)}function W(e){return void 0!==e.qualities.find((function(e){return"Adept"===e.name||"Magician"===e.name}))}function V(e){if(e<0||e>6)throw new Error("Professionalism must be witin the range [1..6] - found ".concat(e));return 20*(e*(e+1)/2)}function M(e){var t=Object(l.a)({},e);return void 0===t.options&&(t.options=Object(l.a)({},b)),void 0===t.professionalism&&(t.professionalism=0),void 0===t.modifiers&&(t.modifiers=[]),void 0===t.gear?t.gear=[]:t.gear=function(e){var t,a=[],n=Object(h.a)(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(/^gear\.weapons\.grenades-and\./i.test(r.path)){var c=Object(m.a)(/(^gear\.weapons\.grenades\x2Dand\.)(.*)/i,{toreplace:1,tokeep:2}).exec(r.path);if(null===c)throw new Error("'".concat(r.path,"' matched test regex but not exec regex"));var i="gear.weapons.grenades-and-rockets.".concat(c.groups.tokeep);a.push(Object(l.a)(Object(l.a)({},r),{},{path:i}))}else if(/^Bow \u2013/i.test(r.name)){var o=Object(m.a)(/(^Bow \u2013)(.*)/i,{toreplace:1,tokeep:2}).exec(r.name);if(null===o)throw new Error("'".concat(r.name,"' matched test regex but not exec regex"));var s="Bow -".concat(o.groups.tokeep);a.push(Object(l.a)(Object(l.a)({},r),{},{name:s}))}else if(/^Jammer \u2013/i.test(r.name)){var u=Object(m.a)(/(^Jammer \u2013)(.*)/i,{toreplace:1,tokeep:2}).exec(r.name);if(null===u)throw new Error("'".concat(r.name,"' matched test regex but not exec regex"));var d="Jammer -".concat(u.groups.tokeep);a.push(Object(l.a)(Object(l.a)({},r),{},{name:d}))}else a.push(r)}}catch(j){n.e(j)}finally{n.f()}return a}(t.gear),t}!function(e){e.Used="Used",e.Alpha="Alpha",e.Beta="Beta",e.Delta="Delta"}(w||(w={})),function(e){e.Dwarf="Dwarf",e.Elf="Elf",e.Human="Human",e.Ork="Ork",e.Troll="Troll"}(k||(k={}));var F={key:-1,name:"",streetName:"",metaType:k.Human,attributes:[{name:"Body",rating:3},{name:"Agility",rating:3},{name:"Reaction",rating:3},{name:"Strength",rating:3},{name:"Charisma",rating:3},{name:"Intuition",rating:3},{name:"Logic",rating:3},{name:"Willpower",rating:3},{name:"Edge",rating:3},{name:"Magic",rating:3}],qualities:[],activeSkills:[],knowledgeSkills:[],languageSkills:[],contacts:[],spells:[],gear:[],options:Object(l.a)({},b),professionalism:0,modifiers:[]};function R(){return Object(l.a)({},F)}function J(e){return"".concat("character",":").concat(e)}function G(e){if(-1===e)return R();var t=localStorage.getItem(J(e));return t?M(JSON.parse(t)):void 0}function H(e){localStorage.setItem(J(e.key),JSON.stringify(e))}var P="selected-character";function Q(e,t){return"".concat("custom-item",":").concat(e,".").concat(t,"}")}function Z(e){switch(e){case k.Human:return 0;case k.Ork:case k.Dwarf:return 30;case k.Elf:return 40;case k.Troll:return 60;default:throw new Error("Unknown meta-type '".concat(e,"'"))}}function z(e,t){var a=e.modifiers.find((function(e){return e.name===t}));return a?a.rating:0}function q(e,t){return function(e,t){var a=e.attributes.find((function(e){return e.name===t}));if(!a)throw new Error("Could not find attribute with name '".concat(t,"'"));return a.rating}(e,t)+K(e.metaType,t)}function $(e,t){return q(e,t)+z(e,t)}function K(e,t){switch(e){case k.Dwarf:switch(t){case"Body":return 1;case"Reaction":return-1;case"Strength":return 2;case"Willpower":return 1}break;case k.Elf:switch(t){case"Agility":return 1;case"Charisma":return 2}break;case k.Human:break;case k.Ork:switch(t){case"Body":return 3;case"Strength":return 2;case"Charisma":case"Logic":return-1}break;case k.Troll:switch(t){case"Body":return 4;case"Agility":return-1;case"Strength":return 4;case"Charisma":return-2;case"Intuition":case"Logic":return-1}}return 0}function Y(e){switch(e){case 1:return-25;case 2:return-15;case 3:return 0;case 4:return 20;case 5:return 45;case 6:return 75;case 7:return 110;default:throw new Error("Unsupported attribute rating ".concat(e))}}function X(e){var t,a=W(e),n=0,r=Object(h.a)(e.attributes);try{for(r.s();!(t=r.n()).done;){var c=t.value;("Magic"!==c.name||a)&&(n+=Y(c.rating))}}catch(i){r.e(i)}finally{r.f()}return n}function _(e){switch(e){case-1:return 0;case 1:return 5;case 3:return 15;case 5:return 30;case 7:return 60;default:throw new Error("Unsupported skill rating ".concat(e))}}function ee(e){return e.map((function(e){return _(e.rating)})).reduce((function(e,t){return e+t}),0)}function te(e){switch(e){case-1:return 0;case 1:return 2;case 3:return 7;case 5:return 15;case 7:return 30;default:throw new Error("Unsupported skill rating ".concat(e))}}function ae(e){return e.map((function(e){return te(e.rating)})).reduce((function(e,t){return e+t}),0)}function ne(e){var t=e.attributes.find((function(e){return"Intuition"===e.name}));if(void 0===t)throw new Error("Character '".concat(e.streetName,"' has no attribute 'Intuition'"));var a=e.attributes.find((function(e){return"Logic"===e.name}));if(void 0===a)throw new Error("Character '".concat(e.streetName,"' has no attribute 'Logic'"));return 10*(t.rating+a.rating)}function re(e){var t=ee(e.activeSkills),a=ae(e.knowledgeSkills),n=ae(e.languageSkills),r=ne(e);return t+Math.max(a+n-r,0)}var ce;function ie(e,t){var a,n=[],r=Object(h.a)(t);try{for(r.s();!(a=r.n()).done;){var c=a.value,i=c.Name,o=c.Cost;n.push({path:e,name:i,cost:o})}}catch(l){r.e(l)}finally{r.f()}return n}function oe(e,t){var a,n=0,r=Object(h.a)(e.qualities);try{for(r.s();!(a=r.n()).done;){n+=p(a.value,t)}}catch(c){r.e(c)}finally{r.f()}return n}function le(e){var t;switch(e){case n.Street:t=400;break;case n.Normal:t=500;break;case n.Elite:t=700}return{total:t,spent:0,available:t}}function se(e,t,a){var n=e.total,r=0;return r+=Z(t.metaType),r+=oe(t,a.allQualities),r+=X(t),r+=re(t),r+=B(T(t,a.allGear,t.options.gearLevel),t.options.nuyenLevel),{total:n,spent:r+=V(t.professionalism),available:n-r}}!function(e){e.UpdateCharacter="updateCharacter",e.ImportCharacter="importCharacter",e.ClearCharacter="clearCharacter",e.SelectCharacter="selectCharacter",e.LoadQualities="loadQualities",e.LoadSkills="loadSkills",e.LoadContacts="loadContacts",e.LoadSpells="loadSpells",e.LoadGear="loadGear",e.LoadCustomItems="loadCustomItems",e.AddCustomItem="addCustomItem",e.UpdateCreateOptions="updateCreateOptions"}(ce||(ce={}));var ue=function(e,t){switch(t.type){case ce.UpdateCharacter:var a=t.data,r=je(a,e),c=se(e.karma,a,e);return H(a),Object(l.a)(Object(l.a)({},e),{},{selectedCharacter:a,characters:r,karma:c});case ce.ImportCharacter:var i=t.data;H(M(i));var o=je(i,e),s=se(e.karma,i,e);return Object(l.a)(Object(l.a)({},e),{},{selectedCharacter:i,characters:o,karma:s});case ce.ClearCharacter:L=e.selectedCharacter,localStorage.removeItem(J(L.key));var u=e.characters.filter((function(t){return t.key!==e.selectedCharacter.key})).map((function(e){return{key:e.key,name:e.name,streetName:e.streetName}})),d=R(),j=le(d.options.karmaLevel);return Object(l.a)(Object(l.a)({},e),{},{characters:u,selectedCharacter:d,karma:j});case ce.SelectCharacter:var b=t.data,m=G(b.key);if(!m)throw new Error("Could not find saved character ".concat(JSON.stringify(b)));var h=se(e.karma,m,e);return Object(l.a)(Object(l.a)({},e),{},{selectedCharacter:m,karma:h});case ce.LoadQualities:var f=t.data;return Object(l.a)(Object(l.a)({},e),{},{allQualities:f});case ce.LoadSkills:var v=t.data;return Object(l.a)(Object(l.a)({},e),{},{allSkills:v});case ce.LoadContacts:var O=t.data;return Object(l.a)(Object(l.a)({},e),{},{allContacts:O});case ce.LoadGear:var p=t.data;return Object(l.a)(Object(l.a)({},e),{},{allGear:p});case ce.LoadSpells:var g=t.data;return Object(l.a)(Object(l.a)({},e),{},{allSpells:g});case ce.LoadCustomItems:var x=t.data;return Object(l.a)(Object(l.a)({},e),{},{customItems:x});case ce.AddCustomItem:var y=t.data;!function(e,t){var a=Q(e,t.Name);localStorage.setItem(a,JSON.stringify(t))}(y.path,y.item);var C=Object(l.a)({},e.customItems);return C[y.path]=y.item,Object(l.a)(Object(l.a)({},e),{},{customItems:C});case ce.UpdateCreateOptions:var w=t.data,k=Object(l.a)(Object(l.a)({},e.selectedCharacter),{},{options:w}),N=function(e){switch(e){case n.Street:return 400;case n.Normal:return 500;case n.Elite:return 700;default:throw new Error("Unknown level '".concat(e,"'"))}}(w.karmaLevel),S=se(Object(l.a)(Object(l.a)({},e.karma),{},{total:N}),k,e);return Object(l.a)(Object(l.a)({},e),{},{selectedCharacter:k,karma:S})}var L;return Object(l.a)({},e)},de={characters:[],selectedCharacter:R(),karma:le(b.karmaLevel),allQualities:{positive:[],negative:[]},allSkills:{active:[],knowledge:[],language:[]},allContacts:[],allSpells:{combat:[],detection:[],health:[],illusion:[],manipulation:[]},allGear:{},customItems:{}};function je(e,t){var a,n=Object(u.a)(t.characters);!function(e){return-1===e.key}(e)?a=n.findIndex((function(t){return t.key===e.key})):(e.key=Date.now(),a=-1);var r=e.key,c=e.name,i=e.streetName;return-1===a?n.push({key:r,name:c,streetName:i}):n[a]={key:r,name:c,streetName:i},n}var be=Object(c.createContext)((function(){})),me=function(){return Object(c.useContext)(be)},he=Object(c.createContext)(de),fe=function(e){return Object(c.useContext)(he)[e]},ve=a(192),Oe=a(193),pe=a(137),ge=a(174),xe=a(202),ye=a(96),Ce=a.n(ye),we=a(97),ke=a.n(we),Ne=a(197),Se=a(194),Le=a(173),Ie=a(171),Ee=a(134),Ue=a(172),Ae=a(42),De=function(e){var t=e.character,a=t.name,n=t.streetName;return a||n?n?a?Object(r.jsxs)(Ae.a,{children:[a," aka ",n]}):Object(r.jsx)(Ae.a,{children:n}):Object(r.jsx)(Ae.a,{children:a}):Object(r.jsx)(Ae.a,{children:"= New Character ="})},Te=function(){var e=me(),t=fe("characters");return Object(r.jsx)(Ie.a,{subheader:Object(r.jsx)(Ue.a,{children:"Characters"}),children:t.map((function(t){return Object(r.jsx)(Ee.a,{onClick:function(){return function(t){var a=t;e({type:ce.SelectCharacter,data:a})}(t)},children:Object(r.jsx)(De,{character:t})},t.key)}))})},Be=a(199),We=a(203),Ve=a(184),Me=[k.Human,k.Ork,k.Dwarf,k.Elf,k.Troll],Fe=a(200),Re=a(185),Je=a(187),Ge=a(186),He=a(50),Pe=a.n(He),Qe=a(204),Ze=Object(Le.a)({root:{display:"flex",flexDirection:"row",flexWrap:"wrap",justifyContent:"flex-start"},chip:{marginRight:10,marginBottom:10}}),ze=function(e){var t=e.values,a=e.createChipLabel,n=e.onDeleteValue,c=Ze();return Object(r.jsx)("div",{className:c.root,children:t.map((function(e){return Object(r.jsx)(ge.a,{badgeContent:e.count,invisible:"1"===e.count,color:"secondary",max:99,anchorOrigin:{vertical:"top",horizontal:"left"},children:Object(r.jsx)(Qe.a,{className:c.chip,color:"primary",label:a(e),onDelete:function(){return n(e)}})},e.name)}))})};function qe(e,t){var a,n=[],r=Object(h.a)(e);try{for(r.s();!(a=r.n()).done;){var c=a.value;(c.path===t||c.path.startsWith("".concat(t,".")))&&n.push(c)}}catch(i){r.e(i)}finally{r.f()}return n}var $e=a(72),Ke=a.n($e),Ye=a(177),Xe=a(180),_e=a(179),et=a(176),tt=a(175),at=a(135),nt=a(101),rt=a(54),ct=a.n(rt),it=a(60),ot=a.n(it),lt=Object(Le.a)({root:{minWidth:78,maxWidth:78,width:78}}),st=function(e){var t=e.disabled,a=e.grade,n=e.onUpdateGrade,c=lt();return Object(r.jsx)(at.a,{className:c.root,disabled:t,variant:"outlined",onClick:function(){return n(function(e){switch(e){case w.Used:return w.Alpha;case w.Alpha:return w.Beta;case w.Beta:return w.Delta;case w.Delta:return w.Used;default:throw new Error("Unknown augmentation grade '".concat(e,"'"))}}(a))},children:a})};var ut=Object(Le.a)({root:{display:"flex",flexDirection:"row",padding:10,margin:10},name:{width:500,textAlign:"left"},availability:{width:100,textAlign:"center"},cost:{width:200,textAlign:"center"}}),dt=function(e){var t=e.item,a=e.createCostLabel,n=e.onUpdateItem,c=fe("selectedCharacter").options,i=ut(),o=parseInt(t.count),s=a(t),u=o>0,d=t.path.startsWith(N),b=t.path.startsWith(N),m=!b||function(e,t){var a=D(e),n=a.rating,r=a.legality,c=j(t);switch(r){case"L":return n<=c+12+6;case"R":return n<=c+6+6;case"F":return n<=c+6;default:throw new Error("Unknown availability legality '".concat(r,"'"))}}(t.availability,c.gearLevel),h=t.path.startsWith("".concat(N,".augmentations")),f=t.grade||w.Alpha;return Object(r.jsxs)(nt.a,{className:i.root,elevation:3,children:[Object(r.jsx)(Ae.a,{className:i.name,style:{lineHeight:"36px"},children:t.name}),b?Object(r.jsx)(Ae.a,{className:i.availability,style:{lineHeight:"36px"},children:t.availability}):null,Object(r.jsx)("span",{className:i.cost,children:Object(r.jsx)(ge.a,{badgeContent:o,color:"secondary",children:Object(r.jsxs)(Ae.a,{style:{lineHeight:"36px"},children:["(",s,")"]})})}),Object(r.jsxs)(tt.a,{children:[d||!u?Object(r.jsx)(at.a,{onClick:function(){n(Object(l.a)(Object(l.a)({},t),{},{count:(o+1).toString()}))},disabled:!m,children:Object(r.jsx)(ct.a,{})}):null,d||u?Object(r.jsx)(at.a,{onClick:function(){n(Object(l.a)(Object(l.a)({},t),{},{count:Math.max(o-1,0).toString()}))},disabled:!m,children:Object(r.jsx)(ot.a,{})}):null,h?Object(r.jsx)(st,{disabled:0===o,grade:f,onUpdateGrade:function(e){var a=Object(l.a)(Object(l.a)({},t),{},{grade:e});e===w.Alpha&&delete a.grade,n(a)}}):null]})]})},jt=Object(Le.a)({items:{display:"flex",flexDirection:"column"}}),bt=function(e){var t=e.items,a=e.createCostLabel,n=e.onUpdateItems,i=jt(),o=function(e){var a=Object(u.a)(t);a[t.findIndex((function(t){return t.name===e.name}))]=e,n(a)};return Object(r.jsxs)(c.Fragment,{children:[Object(r.jsx)(et.a,{}),Object(r.jsx)("div",{className:i.items,children:t?t.map((function(e){return Object(r.jsx)(dt,{item:e,createCostLabel:a,onUpdateItem:o})})):Object(r.jsx)("div",{children:"No items"})})]})},mt=function(e){var t,a=e.open,n=e.onClose,i=e.title,o=e.allItems,d=e.createCostLabel,j=e.onUpdateAllItems,b=Object.keys(o),m=Object(u.a)(b),v=new Map,O=Object(h.a)(m);try{for(O.s();!(t=O.n()).done;){var p=t.value,g=p.split("."),x=g[g.length-1],y=Object(f.a)(x);v.set(p,y)}}catch(S){O.e(S)}finally{O.f()}var C=Object(c.useState)(m[0]),w=Object(s.a)(C,2),k=w[0],N=w[1];void 0===m.find((function(e){return e===k}))&&N(m[0]);return Object(r.jsxs)(Ye.a,{open:a,onClose:n,children:[Object(r.jsx)(_e.a,{children:i}),Object(r.jsxs)(Xe.a,{children:[m.length>1?Object(r.jsx)(Be.a,{id:"group",value:k,displayEmpty:!0,onChange:function(e){N(e.target.value)},variant:"outlined",children:m.map((function(e){return Object(r.jsx)(Ve.a,{value:e,children:v.get(e)},e)}))}):null,Object(r.jsx)(bt,{label:v.get(k),items:o[k],createCostLabel:d,onUpdateItems:function(e){var t=Object(l.a)({},o);t[k]=e,j(t)}})]})]})},ht=a(99),ft=function(e){var t,a=e.title,n=e.items,i=e.allItems,o=e.createCostLabel,l=e.onUpdateItems,d=Object(c.useState)(!1),j=Object(s.a)(d,2),b=j[0],m=j[1],v=function(e){var t,a=new Map,n=Object.keys(e).map((function(e){return e.split(".")}));if(n.length>1){var r=!1;for(t=0;!r;){if(t>=n[0].length)throw new Error("Searched through all path components and found no differences");for(var c=1;c<n.length;c++)if(n[0][t]!==n[c][t]){r=!0;break}t++}}else{if(1!==n.length)throw new Error("There are no paths");t=n[0].length-1}var i,o=Object(h.a)(n);try{for(o.s();!(i=o.n()).done;){var l=i.value,s=l.slice(0,t).join("."),u=l[t-1];a.set(s,Object(f.a)(u))}}catch(d){o.e(d)}finally{o.f()}return a}(i),O=[],p=Object(h.a)(v.keys());try{for(p.s();!(t=p.n()).done;){var g=t.value;O.push(g)}}catch(Z){p.e(Z)}finally{p.f()}for(var x=Object(c.useState)(O[0]),C=Object(s.a)(x,2),w=C[0],k=C[1],N=Object(c.useState)(null),S=Object(s.a)(N,2),L=S[0],I=S[1],E=y(i,w),A={},D=!1,T=0,B=Object.keys(E);T<B.length;T++){var W=B[T];D=!0;var V,M=Object(u.a)(E[W]),F=qe(n,w),R=Object(h.a)(M);try{var J=function(){var e=V.value,t=F.find((function(t){return t.name===e.name}));t?(e.count=t.count,e.grade=t.grade):e.count="0"};for(R.s();!(V=R.n()).done;)J()}catch(Z){R.e(Z)}finally{R.f()}A[W]=M}var G=function(e){for(var t=Object.keys(e).map((function(e){return e.split(".")})),a=0,n=0;;n++){var r,c=void 0,i=!0,o=Object(h.a)(t);try{for(o.s();!(r=o.n()).done;){var l=r.value;if(n>=l.length){i=!1;break}if(void 0===c)c=l[n];else if(c!==l[n]){i=!1;break}}}catch(Z){o.e(Z)}finally{o.f()}if(!i)break;a++}return 0===a?[]:t[0].slice(0,a)}(i),H=G.join("."),P=function(e){var t,a=0,n=Object.keys(e).map((function(e){return e.split(".")})),r=Object(h.a)(n);try{for(r.s();!(t=r.n()).done;){var c=t.value;a=Math.max(a,c.length)}}catch(Z){r.e(Z)}finally{r.f()}return a}(i),Q=G.length+1<P;return Object(r.jsxs)(c.Fragment,{children:[Object(r.jsx)(pe.a,{onClick:function(e){Q?I(e.currentTarget):(k(H),m(!0))},color:"secondary",size:"medium",disableRipple:!0,children:Object(r.jsx)(Ke.a,{})}),Q?Object(r.jsx)(ht.a,{anchorEl:L,open:Boolean(L),onClose:function(){return I(null)},children:O.map((function(e){return Object(r.jsx)(Ve.a,{onClick:function(){!function(e){k(e),I(null),m(!0)}(e)},children:Object(f.a)(v.get(e))},e)}))}):null,D?Object(r.jsx)(mt,{open:b,onClose:function(){return m(!1)},title:Q?"".concat(a," - ").concat(v.get(w)):a,allItems:A,createCostLabel:o,onUpdateAllItems:function(e){for(var t=Object(u.a)(n),a=function(){var a,n=c[r],i=Object(h.a)(e[n]);try{var o=function(){var e=a.value,r=parseInt(e.count)>0,c=t.findIndex((function(t){return t.path===n&&t.name===e.name}));c>-1?r?t[c]=U(n,e):t.splice(c,1):r&&t.push(U(n,e))};for(i.s();!(a=i.n()).done;)o()}catch(Z){i.e(Z)}finally{i.f()}},r=0,c=Object.keys(e);r<c.length;r++)a();l(t)}}):null]})},vt=Object(Le.a)({headerLabel:{lineHeight:3,fontWeight:700}}),Ot=function(e){var t,a=e.label,n=e.items,c=e.allItems,i=e.createItemLabel,o=e.createItemCostLabel,l=e.onUpdateItems,s=fe("selectedCharacter").options,d=vt(),j=0,b=Object(h.a)(n);try{for(b.s();!(t=b.n()).done;){var m=t.value;j+=E(m,c,s.gearLevel)*parseInt(m.count)}}catch(g){b.e(g)}finally{b.f()}for(var f=[],v=0,O=Object.keys(c);v<O.length;v++){var p=O[v];f.push.apply(f,Object(u.a)(c[p]))}return Object(r.jsxs)(Fe.a,{defaultExpanded:!1,children:[Object(r.jsxs)(Re.a,{expandIcon:Object(r.jsx)(Pe.a,{}),children:[Object(r.jsx)(Ge.a,{onClick:function(e){return e.stopPropagation()},onFocus:function(e){return e.stopPropagation()},control:Object(r.jsx)(ft,{title:a,items:n,allItems:c,createCostLabel:o,onUpdateItems:function(e){l(e)}}),label:""}),Object(r.jsxs)(Ae.a,{className:d.headerLabel,children:[a," (",j,")"]})]}),Object(r.jsx)(Je.a,{children:Object(r.jsx)(ze,{values:n,createChipLabel:i,onDeleteValue:function(e){var t=Object(u.a)(n),a=t.findIndex((function(t){return t.name===e.name}));if(a<0)throw new Error("Could not find item '".concat(e.name,"' to delete in list '").concat(JSON.stringify(t),"'"));t.splice(a,1),l(t)}})})]})},pt=function(){var e=me(),t=fe("selectedCharacter"),a=t.qualities,n=fe("allQualities"),c=function(e){var t=p(e,n);return t>0?"+".concat(t):"".concat(t)};return Object(r.jsx)(Ot,{label:"Qualities",items:a,allItems:n,createItemLabel:function(e){var t=e.name,a=c(e);return"".concat(t," (").concat(a,")")},createItemCostLabel:c,onUpdateItems:function(a){var n=Object(l.a)(Object(l.a)({},t),{},{qualities:a});e({type:ce.UpdateCharacter,data:n})}})},gt=a(206),xt=Object(Le.a)({root:{display:"flex",height:50},name:{width:200},slider:{width:300,marginRight:10}}),yt=function(e){var t=e.property,a=e.onUpdate,n=e.min,c=e.max,i=e.step,o=e.formatDisplayValue,l=e.computeCost,s=t.name,u=t.rating,d=xt();return Object(r.jsxs)("div",{className:d.root,children:[Object(r.jsx)(Ae.a,{gutterBottom:!0,className:d.name,children:s}),Object(r.jsx)("div",{className:d.slider,children:Object(r.jsx)(gt.a,{step:i,min:n,max:c,value:u,marks:!0,valueLabelDisplay:"on",onChange:function(e,t){if(Array.isArray(t))throw new Error("Property element '".concat(e.target.id,"' has an array of values instead of a single value: [").concat(t.join(", "),"]"));a({name:s,rating:t})},valueLabelFormat:function(e,t){return o(e)}})}),Object(r.jsxs)(Ae.a,{gutterBottom:!0,children:["(",l(u),")"]})]})},Ct=Object(Le.a)({root:{paddingTop:50,paddingLeft:16}}),wt=function(){var e=me(),t=Ct(),a=fe("selectedCharacter"),n={name:"Professionalism",rating:a.professionalism};return Object(r.jsx)("div",{className:t.root,children:Object(r.jsx)(yt,{property:n,min:0,max:6,step:1,formatDisplayValue:function(e){return e.toString()},computeCost:V,onUpdate:function(t){var n=Object(l.a)({},a);n.professionalism=t.rating,e({type:ce.UpdateCharacter,data:n})}})})},kt=Object(Le.a)({header:{display:"flex",flexDirection:"row",marginLeft:5,marginRight:5,marginBottom:10,alignItems:"center"},field:{marginRight:10,marginTop:20},divider:{margin:5}}),Nt=function(){var e=kt(),t=me(),a=fe("selectedCharacter"),n=a.name,i=a.streetName,o=a.metaType,s=function(e){var a=e;t({type:ce.UpdateCharacter,data:a})};return Object(r.jsxs)(c.Fragment,{children:[Object(r.jsxs)("div",{className:e.header,children:[Object(r.jsx)(We.a,{"id-":"name",label:"Name",value:n,onChange:function(e){return s(Object(l.a)(Object(l.a)({},a),{},{name:e.target.value}))},className:e.field,variant:"outlined"}),Object(r.jsx)(We.a,{"id-":"street-name",label:"Street Name",value:i,onChange:function(e){return s(Object(l.a)(Object(l.a)({},a),{},{streetName:e.target.value}))},className:e.field,variant:"outlined"}),Object(r.jsx)(Be.a,{id:"meta-type",value:o,displayEmpty:!0,onChange:function(e){return s(Object(l.a)(Object(l.a)({},a),{},{metaType:e.target.value}))},className:e.field,variant:"outlined",children:Me.map((function(e){return Object(r.jsxs)(Ve.a,{value:e,children:[e," (",Z(e),")"]},e)}))}),Object(r.jsx)(wt,{})]}),Object(r.jsx)(pt,{})]})};function St(e,t){var a=[];for(var n in e)n.startsWith(t)&&a.push(e[n]);return a}var Lt=a(189),It=Object(Le.a)({content:{width:"100%"},header:{display:"flex"},name:{minWidth:300,maxWidth:300,textAlign:"left"},availability:{minWidth:100,maxWidth:100,textAlign:"center"},cost:{minWidth:100,maxWidth:100,textAlign:"right"},ul:{padding:0}}),Et=function(e){var t=e.open,a=e.onClose,n=e.title,i=e.items,o=e.onItemSelectionChange,u=e.includeAvailability,d=e.includeCost,j=e.allowNewItems,b=e.allowMultiSelection,m=It(),h=Object(c.useState)(""),f=Object(s.a)(h,2),v=f[0],O=f[1],p=Object(c.useState)(""),g=Object(s.a)(p,2),x=g[0],y=g[1],C=Object(c.useState)(""),w=Object(s.a)(C,2),k=w[0],N=w[1],S=function(e){var t=e.target.value;switch(e.target.id){case"new-item-name":O(t);break;case"new-item-availability":y(t);break;case"new-item-cost":N(t)}};return Object(r.jsxs)(Ye.a,{open:t,onClose:a,children:[Object(r.jsx)(_e.a,{children:n}),Object(r.jsx)(Xe.a,{className:m.content,children:Object(r.jsxs)(Ie.a,{children:[Object(r.jsxs)(Ee.a,{className:m.header,children:[Object(r.jsx)(Ae.a,{className:m.name,children:"Name"}),u?Object(r.jsx)(Ae.a,{className:m.availability,children:"i.availability"}):null,d?Object(r.jsx)(Ae.a,{className:m.cost,children:"Cost"}):null]},"header"),j?Object(r.jsxs)(Ee.a,{children:[Object(r.jsx)(We.a,{id:"new-item-name",label:"Custom",value:v,onChange:S,className:m.name,variant:"outlined"}),u?Object(r.jsx)(We.a,{id:"new-item-availability",label:"Availability",value:x,onChange:S,className:m.availability,variant:"outlined"}):null,d?Object(r.jsx)(We.a,{id:"new-item-cost",label:"Cost",value:k,onChange:S,className:m.cost,variant:"outlined"}):null,Object(r.jsx)(pe.a,{"aria-label":"create",onClick:function(){var e={Name:v,selected:!0};u&&(e.Availability=x),d&&(e.Cost=k),o(e),O(""),y(""),N("")},color:"secondary",size:"small",children:Object(r.jsx)(ct.a,{})})]},"new-item"):null,i.map((function(e){return Object(r.jsxs)(Ee.a,{children:[Object(r.jsx)(Lt.a,{className:m.name,children:e.Name}),u?Object(r.jsx)(Lt.a,{className:m.availability,children:e.Availability}):null,d?Object(r.jsx)(Lt.a,{className:m.cost,children:e.Cost}):null,b?Object(r.jsxs)(c.Fragment,{children:[Object(r.jsx)(pe.a,{"aria-label":"add",onClick:function(){return o(Object(l.a)(Object(l.a)({},e),{},{selected:!0}))},color:"secondary",size:"small",children:Object(r.jsx)(ct.a,{})}),Object(r.jsx)(pe.a,{"aria-label":"remove",onClick:function(){return o(Object(l.a)(Object(l.a)({},e),{},{selected:!1}))},disabled:!e.selected,color:"secondary",size:"small",children:Object(r.jsx)(ot.a,{})})]}):Object(r.jsx)(pe.a,{"aria-label":e.selected?"remove":"add",onClick:function(){return o(Object(l.a)(Object(l.a)({},e),{},{selected:!e.selected}))},color:"secondary",size:"small",children:e.selected?Object(r.jsx)(ot.a,{}):Object(r.jsx)(ct.a,{})})]},e.Name)}))]})})]})},Ut=function(e){var t=e[Object.keys(e)[0]];if(void 0===t)throw new Error("Could not find a name for value '".concat(JSON.stringify(e),"'"));return t},At=Object(Le.a)({editButton:{paddingLeft:10}}),Dt=function(e){var t=e.breadcrums,a=e.values,n=e.selectedValueNames,i=e.addValue,o=e.removeValue,l=e.includeAvailability,u=void 0!==l&&l,d=e.includeCost,j=void 0!==d&&d,b=e.allowNewValues,m=void 0!==b&&b,h=e.createValue,f=e.allowMultiSelection,v=void 0!==f&&f,O=At(),p=Object(c.useState)(!1),g=Object(s.a)(p,2),x=g[0],y=g[1],C=t.join(" - "),w=a.map((function(e){return function(e,t,a,n){var r=Ut(e),c=a?function(e){var t=e.Availability;return void 0===t?"-":t}(e):void 0,i=n?function(e){var t=e.Cost;return void 0===t?"0":t}(e):void 0,o=void 0!==t.find((function(e){return e===r}));return{Name:r,Cost:i,Availability:c,selected:o}}(e,n,u,j)}));return Object(r.jsxs)(c.Fragment,{children:[Object(r.jsx)(pe.a,{"aria-label":"add",onClick:function(){return y(!0)},color:"secondary",size:"medium",className:O.editButton,disableRipple:!0,children:Object(r.jsx)(Ke.a,{})}),Object(r.jsx)(Et,{open:x,onClose:function(){return y(!1)},title:C,items:w,onItemSelectionChange:function(e){var t=e.Name,n=e.Availability,r=e.Cost;if(e.selected){if(i(t),void 0===a.find((function(e){return Ut(e)===t}))){var c={Name:t,Availability:n,Cost:r};if(!h)throw new Error("Attempting to create new item '".concat(JSON.stringify(c),"' with no createValue prop"));h(c)}}else o(t)},includeAvailability:u,includeCost:j,allowNewItems:m,allowMultiSelection:v})]})},Tt=function(e){var t=e.skill,a=e.onUpdate,n=e.computeCost;return Object(r.jsx)(yt,{property:t,onUpdate:a,min:1,max:7,step:2,formatDisplayValue:function(e){return e.toString()},computeCost:n})},Bt=Object(Le.a)({header:{display:"flex",flexDirection:"row",marginBottom:20,paddingLeft:16,paddingTop:12},headerLabel:{lineHeight:3,fontWeight:700}}),Wt=function(e){var t=e.breadcrums,a=e.skills,n=e.allSkills,i=e.headerLabel,o=e.computeSkillCost,l=e.onSkillsUpdated,s=Bt(),d=me(),j=fe("customItems");a.sort((function(e,t){return e.name.localeCompare(t.name)}));var b=t.join(".");n.push.apply(n,Object(u.a)(St(j,b))),n.sort((function(e,t){return e.Name.localeCompare(t.Name)}));var m=function(e){var t=Object(u.a)(a),n=a.findIndex((function(t){return t.name===e.name}));n>-1?e.rating>0?t[n]=e:t.splice(n,1):e.rating>0&&t.push(e),l(t)};return Object(r.jsx)(c.Fragment,{children:Object(r.jsxs)(Fe.a,{defaultExpanded:!1,children:[Object(r.jsxs)(Re.a,{expandIcon:Object(r.jsx)(Pe.a,{}),children:[Object(r.jsx)(Ge.a,{onClick:function(e){return e.stopPropagation()},onFocus:function(e){return e.stopPropagation()},control:Object(r.jsx)(Dt,{breadcrums:t,values:n,selectedValueNames:a.map((function(e){return e.name})),addValue:function(e){m({name:e,rating:1})},removeValue:function(e){m({name:e,rating:-1})},allowNewValues:!0,createValue:function(e){var t={path:"".concat(b,".").concat(e.Name),item:e};d({type:ce.AddCustomItem,data:t})}}),label:""}),Object(r.jsx)(Ae.a,{className:s.headerLabel,children:i})]}),Object(r.jsx)(Je.a,{children:Object(r.jsx)(Ie.a,{children:a.map((function(e){return Object(r.jsx)(Ee.a,{children:Object(r.jsx)(Tt,{skill:e,onUpdate:m,computeCost:o})},e.name)}))})})]})})},Vt=["Skills","Active"],Mt=function(){var e=me(),t=fe("selectedCharacter"),a=fe("allSkills"),n=t.activeSkills,c=ee(n),i="Active Skills (".concat(c,")"),o=Object(u.a)(a.active);return Object(r.jsx)(Wt,{breadcrums:Vt,skills:n,allSkills:o,headerLabel:i,computeSkillCost:_,onSkillsUpdated:function(a){var n=Object(l.a)(Object(l.a)({},t),{},{activeSkills:a});e({type:ce.UpdateCharacter,data:n})}})},Ft=["Skills","Knowledge"],Rt=function(){var e=me(),t=fe("selectedCharacter"),a=fe("allSkills"),n=t.knowledgeSkills,c=ae(n),i=ne(t),o=c-i,s="Knowledge Skills (".concat(c," - ").concat(i," = ").concat(o,")"),d=Object(u.a)(a.knowledge);return Object(r.jsx)(Wt,{breadcrums:Ft,skills:n,allSkills:d,headerLabel:s,computeSkillCost:te,onSkillsUpdated:function(a){var n=Object(l.a)(Object(l.a)({},t),{},{knowledgeSkills:a});e({type:ce.UpdateCharacter,data:n})}})},Jt=["Skills","Language"],Gt=function(){var e=me(),t=fe("selectedCharacter"),a=fe("allSkills"),n=t.languageSkills,c=ae(n),i="Language Skills (".concat(c,") + Native"),o=Object(u.a)(a.language);return Object(r.jsx)(Wt,{breadcrums:Jt,skills:n,allSkills:o,headerLabel:i,computeSkillCost:te,onSkillsUpdated:function(a){var n=Object(l.a)(Object(l.a)({},t),{},{languageSkills:a});e({type:ce.UpdateCharacter,data:n})}})},Ht=function(){return Object(r.jsxs)(c.Fragment,{children:[Object(r.jsx)(Mt,{}),Object(r.jsx)(Rt,{}),Object(r.jsx)(Gt,{})]})},Pt=a(74),Qt=a.n(Pt),Zt=Object(Le.a)({root:{paddingLeft:20,paddingRight:20},badge:{marginLeft:50}}),zt=function(){var e=Zt(),t=fe("karma"),a=t.total,n=t.spent,c=t.available;return Object(r.jsxs)("div",{className:e.root,children:[Object(r.jsx)(ge.a,{className:e.badge,badgeContent:a,color:"primary",max:999,showZero:!0,children:Object(r.jsx)(Qt.a,{})}),Object(r.jsx)(ge.a,{className:e.badge,badgeContent:n,color:"secondary",max:999,showZero:!0,children:Object(r.jsx)(Qt.a,{})}),Object(r.jsx)(ge.a,{className:e.badge,badgeContent:c,color:"primary",max:999,showZero:!0,children:Object(r.jsx)(Qt.a,{})})]})},qt=function(e){var t=e.attribute,a=e.metaType,n=e.onUpdate,c=K(a,t.name);return Object(r.jsx)(yt,{property:t,onUpdate:n,min:1,max:7,step:1,formatDisplayValue:function(e){return(e+c).toString()},computeCost:Y})},$t=Object(Le.a)({header:{marginBottom:20,paddingLeft:16,paddingTop:12,fontWeight:700}}),Kt=function(){var e=me(),t=fe("selectedCharacter"),a=$t(),n=t.attributes,i=t.metaType,o=n.filter((function(e){return W(t)||"Magic"!==e.name})),s=X(t),d=function(a){var r=Object(u.a)(n),c=r.findIndex((function(e){return e.name===a.name}));r[c]=a,e({type:ce.UpdateCharacter,data:Object(l.a)(Object(l.a)({},t),{},{attributes:r})})};return Object(r.jsxs)(c.Fragment,{children:[Object(r.jsxs)(Ae.a,{className:a.header,children:["Attributes (",s,")"]}),Object(r.jsx)(Ie.a,{children:o.map((function(e){return Object(r.jsx)(Ee.a,{children:Object(r.jsx)(qt,{attribute:e,metaType:i,onUpdate:d})},e.name)}))})]})},Yt=function(){return Object(r.jsx)(Kt,{})};function Xt(e){switch(e){case 1:return 2;case 3:return 7;case 5:return 15;case 7:return 30;default:throw new Error}}function _t(e){var t=0;return t+=Xt(e.connection),t+=Xt(e.loyalty)}function ea(e){return e.contacts.map((function(e){return _t(e)})).reduce((function(e,t){return e+t}),0)}var ta=Object(Le.a)({headerLabel:{fontWeight:700},details:{display:"flex",flexDirection:"column"},rating:{marginTop:30}}),aa=function(e){var t=e.contact,a=e.onUpdate,i=fe("selectedCharacter").options,o=ta(),s=_t(t),u={name:"Connection",rating:t.connection},d={name:"Loyalty",rating:t.loyalty},j=function(e){switch(e){case n.Street:return 3;case n.Normal:return 5;case n.Elite:return 7;default:throw new Error("Unknown level '".concat(e,"'"))}}(i.connectionLevel);return Object(r.jsx)(c.Fragment,{children:Object(r.jsxs)(Fe.a,{defaultExpanded:!1,children:[Object(r.jsx)(Re.a,{expandIcon:Object(r.jsx)(Pe.a,{}),children:Object(r.jsxs)(Ae.a,{className:o.headerLabel,children:[t.name," (",s,")"]})}),Object(r.jsx)(Je.a,{children:Object(r.jsxs)("div",{className:o.details,children:[Object(r.jsx)("div",{className:o.rating,children:Object(r.jsx)(yt,{property:u,onUpdate:function(e){var n=Object(l.a)(Object(l.a)({},t),{},{connection:e.rating});a(n)},min:1,max:j,step:2,formatDisplayValue:function(e){return e.toString()},computeCost:Xt})}),Object(r.jsx)("div",{className:o.rating,children:Object(r.jsx)(yt,{property:d,onUpdate:function(e){var n=Object(l.a)(Object(l.a)({},t),{},{loyalty:e.rating});a(n)},min:1,max:5,step:2,formatDisplayValue:function(e){return e.toString()},computeCost:Xt})})]})})]})})},na=Object(Le.a)({header:{display:"flex",flexDirection:"row"},headerLabel:{lineHeight:3,fontWeight:700}}),ra=["Contacts"],ca=ra.join("."),ia=function(){var e=na(),t=me(),a=fe("selectedCharacter"),n=fe("allContacts"),i=fe("customItems"),o=a.contacts;o.sort((function(e,t){return e.name.localeCompare(t.name)}));var s=ea(a),d=function(e){var t=e.attributes.find((function(e){return"Charisma"===e.name}));if(void 0===t)throw new Error("Character '".concat(e.streetName,"' has no attribute 'Charisma'"));var a=e.attributes.find((function(e){return"Willpower"===e.name}));if(void 0===a)throw new Error("Character '".concat(e.streetName,"' has no attribute 'Willpower'"));return 10*(t.rating+a.rating)}(a),j=s-d,b="Contacts (".concat(s," - ").concat(d," = ").concat(j,")");n.push.apply(n,Object(u.a)(St(i,ca))),n.sort((function(e,t){return e.Name.localeCompare(t.Name)}));var m=function(e){var n=Object(u.a)(o),r=o.findIndex((function(t){return t.name===e.name}));r>-1?e.connection>0&&e.loyalty>0?n[r]=e:n.splice(r,1):e.connection>0&&e.loyalty>0&&n.push(e);var c=Object(l.a)(Object(l.a)({},a),{},{contacts:n});t({type:ce.UpdateCharacter,data:c})};return Object(r.jsxs)(c.Fragment,{children:[Object(r.jsxs)("div",{className:e.header,children:[Object(r.jsx)(Dt,{breadcrums:ra,values:n,selectedValueNames:o.map((function(e){return e.name})),addValue:function(e){m({name:e,connection:1,loyalty:1})},removeValue:function(e){m({name:e,connection:-1,loyalty:-1})},allowNewValues:!0,createValue:function(e){var a={path:"".concat(ca,".").concat(e.Name),item:e};t({type:ce.AddCustomItem,data:a})}}),Object(r.jsx)(Ae.a,{className:e.headerLabel,children:b})]}),Object(r.jsx)(Ie.a,{children:o.map((function(e){return Object(r.jsx)(aa,{contact:e,onUpdate:m},e.name)}))})]})},oa=function(){return Object(r.jsx)(ia,{})},la=function(){var e=me(),t=fe("selectedCharacter"),a=t.spells,n=fe("allSpells");return Object(r.jsx)(Ot,{label:"Spells",items:a,allItems:n,createItemLabel:function(e){var t=e.name;return"".concat(t," (5)")},createItemCostLabel:function(e){return"5"},onUpdateItems:function(a){var n=Object(l.a)(Object(l.a)({},t),{},{spells:a});e({type:ce.UpdateCharacter,data:n})}})},sa=function(){var e=me(),t=fe("selectedCharacter"),a=t.options,n=t.gear,i=fe("allGear"),o=function(e){var t=E(e,i,a.gearLevel);return"\xa5".concat(t)},s=function(e){var t=e.name,a=o(e),n="".concat(t," (").concat(a,")");return e.path.startsWith("".concat(N,".augmentations"))&&(n+=" [".concat(e.grade||w.Alpha,": ").concat(e.essence||0,"E]")),n};return Object(r.jsx)(c.Fragment,{children:x(i,N).map((function(a){return Object(r.jsx)(Ot,{label:Object(f.a)(a),items:qe(n,"".concat(N,".").concat(a)),allItems:y(i,"".concat(N,".").concat(a)),createItemLabel:s,createItemCostLabel:o,onUpdateItems:function(r){return function(a,r){var c=n.filter((function(e){return!e.path.startsWith("".concat(N,".").concat(a))}));c.push.apply(c,Object(u.a)(r));var i=Object(l.a)(Object(l.a)({},t),{},{gear:c});e({type:ce.UpdateCharacter,data:i})}(a,r)}},a)}))})};function ua(e,t){var a,n=[],r=Object(h.a)(t);try{for(r.s();!(a=r.n()).done;){var c=a.value.Name;n.push({path:e,name:c,cost:"5"})}}catch(i){r.e(i)}finally{r.f()}return n}var da=a(208),ja=Object(Le.a)((function(e){return{root:{display:"flex",flexDirection:"row",marginLeft:10,marginTop:10},name:{lineHeight:"40px"},value:{marginLeft:5,color:e.palette.getContrastText(e.palette.primary.main),backgroundColor:e.palette.primary.main}}})),ba=function(e){var t=e.name,a=e.value,n=ja();return Object(r.jsxs)("div",{className:n.root,children:[Object(r.jsx)(Ae.a,{className:n.name,children:t}),Object(r.jsx)(da.a,{className:n.value,children:a})]})},ma=Object(Le.a)((function(e){return{root:{display:"flex",flexDirection:"row",marginLeft:10,marginTop:10,alignItems:"center",marginRight:5},label:{display:"flex",flexDirection:"column"},name:{lineHeight:"40px"},value:{marginLeft:5,color:e.palette.getContrastText(e.palette.primary.main),backgroundColor:e.palette.primary.main},button:{padding:0,marginLeft:5,lineHeight:1.2}}})),ha=function(e){var t=e.name,a=e.value,n=e.modifier,c=e.updateModifier,i=ma();return Object(r.jsxs)("div",{className:i.root,children:[Object(r.jsx)(Ae.a,{className:i.name,children:t}),Object(r.jsx)(ge.a,{badgeContent:n,color:"secondary",max:9,children:Object(r.jsx)(da.a,{className:i.value,children:a+n})}),Object(r.jsxs)(tt.a,{orientation:"vertical",children:[Object(r.jsx)(at.a,{className:i.button,onClick:function(){c(n+1)},children:"+"}),Object(r.jsx)(at.a,{className:i.button,onClick:function(){c(n-1)},children:"-"})]})]})},fa=Object(Le.a)({header:{marginTop:10,marginLeft:5},section:{display:"flex",flexDirection:"row",marginBottom:10}}),va=function(){var e,t,a=fa(),n=me(),i=fe("selectedCharacter"),o=q(i,"Body"),s=q(i,"Agility"),d=q(i,"Reaction"),j=q(i,"Strength"),b=q(i,"Charisma"),m=q(i,"Intuition"),f=q(i,"Logic"),v=q(i,"Willpower"),O=6,p=Object(h.a)(i.gear);try{for(p.s();!(t=p.n()).done;){var g=t.value;void 0!==g.essence&&(O-=parseFloat(g.essence))}}catch(A){p.e(A)}finally{p.f()}var x=W(i),y=q(i,"Magic");y-=Math.ceil(6-O);var C=(null===(e=i.activeSkills.find((function(e){return"Athletics"===e.name})))||void 0===e?void 0:e.rating)||0,w=$(i,"Reaction")+$(i,"Intuition"),N=8+Math.ceil($(i,"Body")/2),S=8+Math.ceil($(i,"Willpower")/2),L=s;i.metaType!==k.Dwarf&&(L+=1);var I=L+C;i.metaType!==k.Dwarf&&(I+=2);var E=2*I,U=function(e){var t=e.name,a=e.value,c=z(i,t);return Object(r.jsx)(ha,{name:t,value:a,modifier:c,updateModifier:function(e){var a=Object(u.a)(i.modifiers),r=a.findIndex((function(e){return e.name===t}));r>-1&&a.splice(r,1),a.push({name:t,rating:e});var c=Object(l.a)(Object(l.a)({},i),{},{modifiers:a});n({type:ce.UpdateCharacter,data:c})}})};return Object(r.jsxs)(c.Fragment,{children:[Object(r.jsx)(Ae.a,{className:a.header,children:"Attributes"}),Object(r.jsx)(et.a,{}),Object(r.jsxs)("div",{className:a.section,children:[Object(r.jsx)(U,{name:"Body",value:o}),Object(r.jsx)(U,{name:"Agility",value:s}),Object(r.jsx)(U,{name:"Reaction",value:d}),Object(r.jsx)(U,{name:"Strength",value:j})]}),Object(r.jsxs)("div",{className:a.section,children:[Object(r.jsx)(U,{name:"Charisma",value:b}),Object(r.jsx)(U,{name:"Intuition",value:m}),Object(r.jsx)(U,{name:"Logic",value:f}),Object(r.jsx)(U,{name:"Willpower",value:v})]}),Object(r.jsxs)("div",{className:a.section,children:[Object(r.jsx)(ba,{name:"Essence",value:O}),x?Object(r.jsx)(ba,{name:"Magic",value:y}):null]}),Object(r.jsx)(Ae.a,{className:a.header,children:"Initiative"}),Object(r.jsx)(et.a,{}),Object(r.jsxs)("div",{className:a.section,children:[Object(r.jsx)(U,{name:"Initiative",value:w}),Object(r.jsx)(U,{name:"Initiative Passes",value:1})]}),Object(r.jsx)(Ae.a,{className:a.header,children:"Condition Monitor"}),Object(r.jsx)(et.a,{}),Object(r.jsxs)("div",{className:a.section,children:[Object(r.jsx)(ba,{name:"Physical Boxes",value:N}),Object(r.jsx)(ba,{name:"Stun Boxes",value:S})]}),Object(r.jsx)(Ae.a,{className:a.header,children:"Movement"}),Object(r.jsx)(et.a,{}),Object(r.jsxs)("div",{className:a.section,children:[Object(r.jsx)(ba,{name:"Sneaking",value:L}),Object(r.jsx)(ba,{name:"Walking",value:I}),Object(r.jsx)(ba,{name:"Running",value:E})]})]})};function Oa(e){return"".concat("/cyberpunk-character-creator","/").concat(e)}var pa=a(190),ga=a(191),xa=function(e){var t=e.open,a=e.onChoice,n=e.content,c=function(){a(!1)};return Object(r.jsxs)(Ye.a,{open:t,onClose:c,children:[Object(r.jsx)(Xe.a,{children:Object(r.jsx)(pa.a,{children:n})}),Object(r.jsxs)(ga.a,{children:[Object(r.jsx)(at.a,{onClick:function(){a(!0)},color:"secondary",variant:"outlined",children:"Yes"}),Object(r.jsx)(at.a,{onClick:c,color:"secondary",variant:"outlined",autoFocus:!0,children:"No"})]})]})},ya=a(94),Ca=a.n(ya),wa=a(201),ka=function(e){var t=e.saveData;return Object(r.jsxs)(c.Fragment,{children:[Object(r.jsx)("input",{accept:"application/json",hidden:!0,id:"import-file",type:"file",onChange:function(e){var a=e.target.files;if(a&&0!==a.length){var n=a[0],r=new FileReader;r.onload=function(e){if(!e.target)throw new Error("Failed to load data from file '".concat(n.name,"'"));var a=e.target.result;if(!a)throw new Error("File '".concat(n.name,"' has no data"));t(a)},r.readAsText(n)}else console.log("No files selected")}}),Object(r.jsx)("label",{htmlFor:"import-file",children:Object(r.jsx)(wa.a,{title:"Import Character",children:Object(r.jsx)(pe.a,{color:"secondary",component:"span",children:Object(r.jsx)(Ca.a,{})})})})]})},Na=a(95),Sa=a.n(Na),La=function(e){var t=e.filename,a=e.generateData;return Object(r.jsx)(wa.a,{title:"Export Character",children:Object(r.jsx)(pe.a,{onClick:function(){var e=a(),n=document.createElement("a");n.setAttribute("href","data:application/json;charset=utf-8,"+encodeURIComponent(e)),n.setAttribute("download",t),n.style.display="none",document.body.appendChild(n),n.click(),document.body.removeChild(n)},color:"secondary",children:Object(r.jsx)(Sa.a,{})})})},Ia=a(188),Ea=a(207),Ua=Object(Le.a)({control:{margin:8,minWidth:100},label:{padding:4}}),Aa=function(e){var t=e.id,a=e.label,n=e.value,c=e.updateValue,i="".concat(t,"-level-select"),o="".concat(i,"-label"),l=Ua();return Object(r.jsxs)(Ia.a,{className:l.control,children:[Object(r.jsx)(Ea.a,{id:o,className:l.label,children:a}),Object(r.jsx)(Be.a,{labelId:o,id:i,value:n,onChange:function(e,t){c(e.target.value)},variant:"outlined",children:d.map((function(e){return Object(r.jsx)(Ve.a,{value:e,children:e},e)}))})]})},Da=Object(Le.a)({root:{display:"flex",flexDirection:"row"}}),Ta=function(){var e=me(),t=fe("selectedCharacter").options,a=t.karmaLevel,n=t.connectionLevel,c=t.nuyenLevel,i=t.gearLevel,o=Da(),s=function(t){var a=t;e({type:ce.UpdateCreateOptions,data:a})};return Object(r.jsxs)("div",{className:o.root,children:[Object(r.jsx)(Aa,{id:"karma",label:"Karma",value:a,updateValue:function(e){return s(Object(l.a)(Object(l.a)({},t),{},{karmaLevel:e}))}}),Object(r.jsx)(Aa,{id:"connection",label:"Connection",value:n,updateValue:function(e){return s(Object(l.a)(Object(l.a)({},t),{},{connectionLevel:e}))}}),Object(r.jsx)(Aa,{id:"nuyen",label:"Nuyen",value:c,updateValue:function(e){return s(Object(l.a)(Object(l.a)({},t),{},{nuyenLevel:e}))}}),Object(r.jsx)(Aa,{id:"gear",label:"Gear",value:i,updateValue:function(e){return s(Object(l.a)(Object(l.a)({},t),{},{gearLevel:e}))}})]})},Ba=Object(Le.a)({bar:{flexGrow:1,display:"flex",alignItems:"center"}}),Wa=function(){var e=Ba(),t=me(),a=fe("selectedCharacter"),n=fe("allQualities"),i=fe("allGear"),o=a.options,l=Object(c.useState)(!1),u=Object(s.a)(l,2),d=u[0],j=u[1],b=Object(c.useState)(0),m=Object(s.a)(b,2),h=m[0],f=m[1];Object(c.useEffect)((function(){fetch(Oa("data/qualities.json")).then((function(e){return e.json()})).then((function(e){var a=function(e){var t={};return v("qualities",e,t,ie),t}(e);t({type:ce.LoadQualities,data:a})})).catch((function(e){console.error("Error occured loading qualities: ".concat(e.message,"\n").concat(e.stack))})),fetch(Oa("data/skills.json")).then((function(e){return e.json()})).then((function(e){var a=e;t({type:ce.LoadSkills,data:a})})).catch((function(e){console.error("Error occured loading skills: ".concat(e.message,"\n").concat(e.stack))})),fetch(Oa("data/contacts.json")).then((function(e){return e.json()})).then((function(e){var a=e.all;t({type:ce.LoadContacts,data:a})})).catch((function(e){console.error("Error occured loading contacts: ".concat(e.message,"\n").concat(e.stack))})),fetch(Oa("data/magic.json")).then((function(e){return e.json()})).then((function(e){var a=function(e){var t={};return v("spells",e,t,ua),t}(e.spells);t({type:ce.LoadSpells,data:a})})).catch((function(e){console.error("Error occured loading magic: ".concat(e.message,"\n").concat(e.stack))})),fetch(Oa("data/gear.json")).then((function(e){return e.json()})).then((function(e){var a=function(e){var t={};return v(N,e,t,S),t}(e);t({type:ce.LoadGear,data:a})})).catch((function(e){console.error("Error occured loading gear: ".concat(e.message,"\n").concat(e.stack))}))}),[t]);var O,p=Object(c.useState)(!1),g=Object(s.a)(p,2),x=g[0],y=g[1],C=Z(a.metaType)+oe(a,n)+V(a.professionalism),w=X(a),k=re(a),L=ea(a),I=5*a.spells.length,E=T(a,i,o.gearLevel),U=B(E,a.options.nuyenLevel);O=E<1e3?"\xa5".concat(E):E<1e6?"\xa5".concat(Math.round(E/100)/10,"K"):"\xa5".concat(Math.round(E/1e5)/10,"M");var A,D=W(a);switch(h){case 0:A=Object(r.jsx)(Nt,{});break;case 1:A=Object(r.jsx)(Yt,{});break;case 2:A=Object(r.jsx)(Ht,{});break;case 3:A=Object(r.jsx)(oa,{});break;case 4:A=Object(r.jsx)(sa,{});break;case 5:A=Object(r.jsx)(la,{});break;case 6:A=Object(r.jsx)(va,{});break;default:throw new Error("Unknown tab index ".concat(h))}var M="".concat(a.streetName,".json");return Object(r.jsxs)("div",{children:[Object(r.jsxs)(ve.a,{position:"sticky",color:"default",children:[Object(r.jsxs)(Oe.a,{children:[Object(r.jsx)(wa.a,{title:"Characters",children:Object(r.jsx)(pe.a,{edge:"start",onClick:function(){j(!0)},"aria-label":"characters",children:Object(r.jsx)(Ce.a,{})})}),Object(r.jsxs)("div",{className:e.bar,children:[Object(r.jsx)(De,{character:a}),Object(r.jsx)(zt,{}),Object(r.jsx)(Ta,{})]}),Object(r.jsx)(ka,{saveData:function(e){var a=JSON.parse(e);t({type:ce.ImportCharacter,data:a})}}),Object(r.jsx)(La,{filename:M,generateData:function(){return JSON.stringify(a)}}),Object(r.jsx)(pe.a,{"aria-label":"clear",onClick:function(){y(!0)},color:"secondary",children:Object(r.jsx)(ke.a,{})})]}),Object(r.jsxs)(Ne.a,{value:h,onChange:function(e,t){f(t)},variant:"scrollable",children:[Object(r.jsx)(Se.a,{label:Object(r.jsx)(ge.a,{badgeContent:C,color:"default",showZero:!0,max:999,children:"Character"})}),Object(r.jsx)(Se.a,{label:Object(r.jsx)(ge.a,{badgeContent:w,color:"default",showZero:!0,max:999,children:"Attributes"})}),Object(r.jsx)(Se.a,{label:Object(r.jsx)(ge.a,{badgeContent:k,color:"default",showZero:!0,max:999,children:"Skills"})}),Object(r.jsx)(Se.a,{label:Object(r.jsx)(ge.a,{badgeContent:L,color:"default",showZero:!0,max:999,children:"Contacts"})}),Object(r.jsx)(Se.a,{label:Object(r.jsx)(ge.a,{badgeContent:O,color:"default",showZero:!0,max:1e6,anchorOrigin:{vertical:"top",horizontal:"left"},children:Object(r.jsx)(ge.a,{badgeContent:U,color:"default",showZero:!0,max:999,anchorOrigin:{vertical:"top",horizontal:"right"},children:"Gear"})})}),Object(r.jsx)(Se.a,{disabled:!D,label:Object(r.jsx)(ge.a,{badgeContent:I,color:"default",showZero:!0,max:999,children:"Magic"})}),Object(r.jsx)(Se.a,{label:"Stats"})]})]}),A,Object(r.jsx)(xe.a,{open:d,onClose:function(){j(!1)},children:Object(r.jsx)(Te,{})}),Object(r.jsx)(xa,{open:x,onChoice:function(e){e&&t({type:ce.ClearCharacter}),y(!1)},content:"Are you sure you want to delete this character? All data will be lost forever."})]})},Va=a(98),Ma=a(195),Fa=a(196),Ra=Object(Va.a)({palette:{type:"dark"}}),Ja=function(){var e=Object(c.useReducer)(ue,de,(function(e){var t=function(){for(var e=[R()],t=0;t<localStorage.length;t++){var a=localStorage.key(t);if(null!==a&&/^character:\d+$/i.test(a)){var n=localStorage.getItem(a);if(n){var r=JSON.parse(n),c=r.key,i=r.name,o=r.streetName;e.push({key:c,name:i,streetName:o})}}}return e.sort((function(e,t){return e.key-t.key})),e}(),a=function(){var e=localStorage.getItem(P);return e?parseInt(e):-1}(),n=e.selectedCharacter;if(a>-1){var r=t.find((function(e){return e.key===a}));if(r){var c=G(r.key);c&&(n=c)}}return Object(l.a)(Object(l.a)({},e),{},{characters:t,selectedCharacter:n})})),t=Object(s.a)(e,2),a=t[0],n=t[1];return Object(r.jsx)(be.Provider,{value:n,children:Object(r.jsx)(he.Provider,{value:a,children:Object(r.jsxs)(Ma.a,{theme:Ra,children:[Object(r.jsx)(Fa.a,{}),Object(r.jsx)(Wa,{})]})})})};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(Object(r.jsx)(Ja,{}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[133,1,2]]]);
//# sourceMappingURL=main.489f42a3.chunk.js.map