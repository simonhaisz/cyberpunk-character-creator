(this["webpackJsonpcyberpunk-character-creator"]=this["webpackJsonpcyberpunk-character-creator"]||[]).push([[0],{106:function(e,a,t){e.exports=t(121)},111:function(e,a,t){},121:function(e,a,t){"use strict";t.r(a);var n,r=t(0),l=t.n(r),c=t(13),o=t.n(c),i=(t(111),t(7)),u=t(15);function s(e){return void 0!==e.qualities.positive.find((function(e){return"Adept"===e||"Magician"===e}))}!function(e){e.Dwarf="Dwarf",e.Elf="Elf",e.Human="Human",e.Ork="Ork",e.Troll="Troll"}(n||(n={}));var m=-1,d={key:m,name:"",streetName:"",metaType:n.Human,attributes:[{name:"Body",rating:3},{name:"Agility",rating:3},{name:"Reaction",rating:3},{name:"Strength",rating:3},{name:"Charisma",rating:3},{name:"Intuition",rating:3},{name:"Logic",rating:3},{name:"Willpower",rating:3},{name:"Edge",rating:3},{name:"Magic",rating:3}],qualities:{positive:[],negative:[]},activeSkills:[],knowledgeSkills:[],languageSkills:[],contacts:[],spells:{combat:[],detection:[],health:[],illusion:[],manipulation:[]},gear:[]};function f(){return Object(i.a)({},d)}var v="character";function h(e){return"".concat(v,":").concat(e)}function p(e){if(-1===e)return f();var a=localStorage.getItem(h(e));return a?JSON.parse(a):void 0}var b="selected-character";var g="custom-item";function y(e,a){return"".concat(g,":").concat(e,".").concat(a,"}")}function E(e){switch(e){case n.Human:return 0;case n.Ork:return 40;case n.Dwarf:return 50;case n.Elf:return 60;case n.Troll:return 80;default:throw new Error("Unknown meta-type '".concat(e,"'"))}}function C(e){switch(e){case 1:return-25;case 2:return-15;case 3:return 0;case 4:return 20;case 5:return 45;case 6:return 75;case 7:return 110;default:throw new Error("Unsupported attribute rating ".concat(e))}}function w(e){var a=s(e),t=0,n=!0,r=!1,l=void 0;try{for(var c,o=e.attributes[Symbol.iterator]();!(n=(c=o.next()).done);n=!0){var i=c.value;("Magic"!==i.name||a)&&(t+=C(i.rating))}}catch(u){r=!0,l=u}finally{try{n||null==o.return||o.return()}finally{if(r)throw l}}return t}function k(e){switch(e){case-1:return 0;case 1:return 5;case 3:return 15;case 5:return 30;default:throw new Error("Unsupported skill rating ".concat(e))}}function O(e){return e.map((function(e){return k(e.rating)})).reduce((function(e,a){return e+a}),0)}function j(e){switch(e){case 1:return 2;case 3:return 7;case 5:return 15;default:throw new Error("Unsupported skill rating ".concat(e))}}function S(e){return e.map((function(e){return j(e.rating)})).reduce((function(e,a){return e+a}),0)}function N(e){var a=e.attributes.find((function(e){return"Intuition"===e.name}));if(void 0===a)throw new Error("Character '".concat(e.streetName,"' has no attribute 'Intuition'"));var t=e.attributes.find((function(e){return"Logic"===e.name}));if(void 0===t)throw new Error("Character '".concat(e.streetName,"' has no attribute 'Logic'"));return 10*(a.rating+t.rating)}function x(e,a){var t=0,n=!0,r=!1,l=void 0;try{for(var c,o=function(){var e=c.value,n=a.find((function(a){return a.Name===e}));if(!n)throw new Error("Could not find quality with name '".concat(e,"' in list '").concat(JSON.stringify(a),"'"));t+=parseInt(n.Cost)},i=e[Symbol.iterator]();!(n=(c=i.next()).done);n=!0)o()}catch(u){r=!0,l=u}finally{try{n||null==i.return||i.return()}finally{if(r)throw l}}return t}function I(e,a){var t=0;return t+=x(e.positive,a.positive),t+=x(e.negative,a.negative)}var L,U=500;function A(){return{total:U,spent:0,available:U}}function V(e,a,t){var n=e.total,r=0;return r+=E(a.metaType),r+=I(a.qualities,t.allQualities),r+=w(a),{total:n,spent:r+=function(e){var a=O(e.activeSkills),t=S(e.knowledgeSkills),n=S(e.languageSkills),r=N(e);return a+Math.max(t+n-r,0)}(a),available:n-r}}!function(e){e.UpdateCharacter="updateCharacter",e.SaveCharacter="saveCharacter",e.ClearCharacter="clearCharacter",e.SelectCharacter="selectCharacter",e.LoadQualities="loadQualities",e.LoadSkills="loadSkills",e.LoadContacts="loadContacts",e.LoadSpells="loadSpells",e.LoadGear="loadGear",e.LoadCustomItems="loadCustomItems",e.AddCustomItem="addCustomItem"}(L||(L={}));var W=function(e,a){switch(a.type){case L.UpdateCharacter:var t=a.data,n=V(e.karma,t,e);return Object(i.a)({},e,{selectedCharacter:t,karma:n});case L.SaveCharacter:if(e.selectedCharacter.key===m){if(function(e){return JSON.stringify(d)===JSON.stringify(e)}(e.selectedCharacter))break;e.selectedCharacter.key=Date.now();var r=e.selectedCharacter,l=r.key,c=r.name,o=r.streetName;e.characters.push({key:l,name:c,streetName:o})}return function(e){localStorage.setItem(h(e.key),JSON.stringify(e))}(e.selectedCharacter),Object(i.a)({},e);case L.ClearCharacter:!function(e){localStorage.removeItem(h(e.key))}(e.selectedCharacter);var u=e.characters.filter((function(a){return a.key!==e.selectedCharacter.key})).map((function(e){return{key:e.key,name:e.name,streetName:e.streetName}}));return Object(i.a)({},e,{characters:u,selectedCharacter:f(),karma:A()});case L.SelectCharacter:var s=a.data,v=p(s.key);if(!v)throw new Error("Could not find saved character ".concat(JSON.stringify(s)));var b=V(e.karma,v,e);return Object(i.a)({},e,{selectedCharacter:v,karma:b});case L.LoadQualities:var g=a.data;return Object(i.a)({},e,{allQualities:g});case L.LoadSkills:var E=a.data;return Object(i.a)({},e,{allSkills:E});case L.LoadContacts:var C=a.data;return Object(i.a)({},e,{allContacts:C});case L.LoadGear:var w=a.data;return Object(i.a)({},e,{allGear:w});case L.LoadSpells:var k=a.data;return Object(i.a)({},e,{allSpells:k});case L.LoadCustomItems:var O=a.data;return Object(i.a)({},e,{customItems:O});case L.AddCustomItem:var j=a.data;!function(e,a){var t=y(e,a.Name);localStorage.setItem(t,JSON.stringify(a))}(j.path,j.item);var S=Object(i.a)({},e.customItems);return S[j.path]=j.item,Object(i.a)({},e,{customItems:S})}return Object(i.a)({},e)},D={characters:[],selectedCharacter:f(),karma:A(),allQualities:{positive:[],negative:[]},allSkills:{active:[],knowledge:[],language:[]},allContacts:[],allSpells:{combat:[],detection:[],health:[],illusion:[],manipulation:[]},allGear:{},customItems:{}},T=Object(r.createContext)((function(){})),B=function(){return Object(r.useContext)(T)},F=Object(r.createContext)(D),J=function(e){return Object(r.useContext)(F)[e]},M=t(178),H=t(179),R=t(124),G=t(188),P=t(82),q=t.n(P),Q=t(83),z=t.n(Q),$=t(84),Z=t.n($),K=t(183),Y=t(180),X=t(164),_=t(162),ee=t(122),ae=t(163),te=t(48),ne=function(e){var a=e.character,t=a.name,n=a.streetName;return t||n?n?t?l.a.createElement(te.a,null,t," aka ",n):l.a.createElement(te.a,null,n):l.a.createElement(te.a,null,t):l.a.createElement(te.a,null,"= New Character =")},re=function(){var e=B(),a=J("characters");return l.a.createElement(_.a,{subheader:l.a.createElement(ae.a,null,"Characters")},a.map((function(a){return l.a.createElement(ee.a,{key:a.key,onClick:function(){return function(a){var t=a;e({type:L.SelectCharacter,data:t})}(a)}},l.a.createElement(ne,{character:a}))})))},le=t(185),ce=t(184),oe=t(173),ie=[n.Human,n.Ork,n.Dwarf,n.Elf,n.Troll],ue=t(187),se=t(171),me=t(172),de=t(29),fe=t.n(de),ve=t(51),he=t(186),pe=t(8),be=t(170),ge=t(68),ye=t.n(ge),Ee=t(165),Ce=t(167),we=t(166),ke=t(47),Oe=t.n(ke),je=t(53),Se=t.n(je),Ne=Object(X.a)({content:{width:"100%"},header:{display:"flex"},name:{minWidth:300,maxWidth:300,textAlign:"left"},availability:{minWidth:100,maxWidth:100,textAlign:"center"},cost:{minWidth:100,maxWidth:100,textAlign:"right"},ul:{padding:0}}),xe=function(e){var a=e.open,t=e.onClose,n=e.title,c=e.items,o=e.onItemSelectionChange,s=e.includeAvailability,m=e.includeCost,d=e.allowNewItems,f=e.allowMultiSelection,v=Ne(),h=Object(r.useState)(""),p=Object(u.a)(h,2),b=p[0],g=p[1],y=Object(r.useState)(""),E=Object(u.a)(y,2),C=E[0],w=E[1],k=Object(r.useState)(""),O=Object(u.a)(k,2),j=O[0],S=O[1],N=function(e){var a=e.target.value;switch(e.target.id){case"new-item-name":g(a);break;case"new-item-availability":w(a);break;case"new-item-cost":S(a)}};return l.a.createElement(Ee.a,{open:a,onClose:t},l.a.createElement(we.a,null,n),l.a.createElement(Ce.a,{className:v.content},l.a.createElement(_.a,null,l.a.createElement(ee.a,{key:"header",className:v.header},l.a.createElement(te.a,{className:v.name},"Name"),s?l.a.createElement(te.a,{className:v.availability},"i.availability"):null,m?l.a.createElement(te.a,{className:v.cost},"Cost"):null),d?l.a.createElement(ee.a,{key:"new-item"},l.a.createElement(ce.a,{id:"new-item-name",label:"Custom",value:b,onChange:N,className:v.name,variant:"outlined"}),s?l.a.createElement(ce.a,{id:"new-item-availability",label:"Availability",value:C,onChange:N,className:v.availability,variant:"outlined"}):null,m?l.a.createElement(ce.a,{id:"new-item-cost",label:"Cost",value:j,onChange:N,className:v.cost,variant:"outlined"}):null,l.a.createElement(R.a,{"aria-label":"create",onClick:function(){var e={Name:b,selected:!0};s&&(e.Availability=C),m&&(e.Cost=j),o(e),g(""),w(""),S("")},color:"secondary",size:"small"},l.a.createElement(Oe.a,null))):null,c.map((function(e){return l.a.createElement(ee.a,{key:e.Name},l.a.createElement(be.a,{className:v.name},e.Name),s?l.a.createElement(be.a,{className:v.availability},e.Availability):null,m?l.a.createElement(be.a,{className:v.cost},e.Cost):null,f?l.a.createElement(r.Fragment,null,l.a.createElement(R.a,{"aria-label":"add",onClick:function(){return o(Object(i.a)({},e,{selected:!0}))},color:"secondary",size:"small"},l.a.createElement(Oe.a,null)),l.a.createElement(R.a,{"aria-label":"remove",onClick:function(){return o(Object(i.a)({},e,{selected:!1}))},disabled:!e.selected,color:"secondary",size:"small"},l.a.createElement(Se.a,null))):l.a.createElement(R.a,{"aria-label":e.selected?"remove":"add",onClick:function(){return o(Object(i.a)({},e,{selected:!e.selected}))},color:"secondary",size:"small"},e.selected?l.a.createElement(Se.a,null):l.a.createElement(Oe.a,null)))})))))},Ie=function(e){var a=e[Object.keys(e)[0]];if(void 0===a)throw new Error("Could not find a name for value '".concat(JSON.stringify(e),"'"));return a},Le=Object(X.a)({editButton:{paddingLeft:10}}),Ue=function(e){var a=e.breadcrums,t=e.values,n=e.selectedValueNames,c=e.addValue,o=e.removeValue,i=e.includeAvailability,s=void 0!==i&&i,m=e.includeCost,d=void 0!==m&&m,f=e.allowNewValues,v=void 0!==f&&f,h=e.createValue,p=e.allowMultiSelection,b=void 0!==p&&p,g=Le(),y=Object(r.useState)(!1),E=Object(u.a)(y,2),C=E[0],w=E[1],k=a.join(" - "),O=t.map((function(e){return function(e,a,t,n){var r=Ie(e),l=t?function(e){var a=e.Availability;return void 0===a?"-":a}(e):void 0,c=n?function(e){var a=e.Cost;return void 0===a?"0":a}(e):void 0,o=void 0!==a.find((function(e){return e===r}));return{Name:r,Cost:c,Availability:l,selected:o}}(e,n,s,d)}));return l.a.createElement(r.Fragment,null,l.a.createElement(R.a,{"aria-label":"add",onClick:function(){return w(!0)},color:"secondary",size:"medium",className:g.editButton,disableRipple:!0},l.a.createElement(ye.a,null)),l.a.createElement(xe,{open:C,onClose:function(){return w(!1)},title:k,items:O,onItemSelectionChange:function(e){var a=e.Name,n=e.Availability,r=e.Cost;if(e.selected){if(c(a),void 0===t.find((function(e){return Ie(e)===a}))){var l={Name:a,Availability:n,Cost:r};if(!h)throw new Error("Attempting to create new item '".concat(JSON.stringify(l),"' with no createValue prop"));h(l)}}else o(a)},includeAvailability:s,includeCost:d,allowNewItems:v,allowMultiSelection:b}))};function Ae(e,a){var t=[];for(var n in e)n.startsWith(a)&&t.push(e[n]);return t}var Ve=Object(X.a)({header:{display:"flex",flexDirection:"row"},headerLabel:{lineHeight:3,marginLeft:16}}),We=function(e){var a=e.fontWeight,t=e.breadcrums,n=e.names,c=e.allValues,o=e.onNamesUpdated,i=Ve(),u=B();n.sort();var s=J("customItems"),m=t.join(".");c.push.apply(c,Object(pe.a)(Ae(s,m))),c.sort((function(e,a){if(void 0===e.Name||void 0===a.Name)throw new Error("Value missing 'Name' property under '".concat(m,"': ").concat(JSON.stringify(c)));return e.Name.localeCompare(a.Name)}));var d=t[t.length-1];return l.a.createElement(r.Fragment,null,l.a.createElement("div",{className:i.header},l.a.createElement(Ue,{breadcrums:t,values:c,selectedValueNames:n,addValue:function(e){var a=[].concat(Object(pe.a)(n),[e]);o(a)},removeValue:function(e){var a=Object(pe.a)(n),t=a.findIndex((function(a){return a===e}));if(t<0)throw new Error("Could not find value with name '".concat(e,"'"));a.splice(t,1),o(a)},allowNewValues:!0,createValue:function(e){var a={path:"".concat(m,".").concat(e.Name),item:e};u({type:L.AddCustomItem,data:a})},includeCost:!0}),l.a.createElement(te.a,{className:i.headerLabel,style:{fontWeight:a}},d)),l.a.createElement(_.a,null,n.map((function(e){return l.a.createElement(ee.a,{key:e},l.a.createElement(be.a,null,e," (",function(e){var a=c.find((function(a){return a.Name===e}));if(!a)throw new Error("Could not find value with name '".concat(e,"'"));return parseInt(a.Cost)}(e),")"))}))))},De=[700,600,500,400,300,200,100],Te=function e(a){var t=a.rootCost,n=void 0===t?-1:t,c=a.parentPath,o=a.name,u=a.value,s=a.all,m=a.onValueUpdated,d=Object(he.a)(o),f=De[c.split(".").length-1];if(Object(ve.isArray)(u)){var v=function(e,a){var t=[],n=!0,r=!1,l=void 0;try{for(var c,o=e.split(".")[Symbol.iterator]();!(n=(c=o.next()).done);n=!0){var i=c.value;t.push(Object(he.a)(i))}}catch(u){r=!0,l=u}finally{try{n||null==o.return||o.return()}finally{if(r)throw l}}return t.push(Object(he.a)(a)),t}(c,o),h=u,p=s;return l.a.createElement(We,{fontWeight:f-100,breadcrums:v,names:h,allValues:p,onNamesUpdated:function(e){m(e)}})}for(var b=1===c.split(".").length,g=[],y=function(){var a=C[E],t=s[a],n="".concat(c,".").concat(a),r=Object(ve.isArray)(t)?[]:{},o=u[a]||r;g.push(l.a.createElement(e,{key:a,parentPath:n,name:a,value:o,all:t,onValueUpdated:function(e){var t=Object(i.a)({},u);t[a]=e,m(t)}}))},E=0,C=Object.keys(s);E<C.length;E++)y();return l.a.createElement(r.Fragment,null,l.a.createElement(ue.a,{defaultExpanded:!0},l.a.createElement(se.a,{expandIcon:l.a.createElement(fe.a,null)},l.a.createElement(te.a,{style:{fontWeight:f}},d,b?" (".concat(n,")"):null)),l.a.createElement(me.a,null,l.a.createElement("div",null,g))))};var Be=function(e){var a=e.rootCost,t=e.rootName,n=e.rootValue,c=e.rootAll,o=e.onRootUpdated;return l.a.createElement(r.Fragment,null,l.a.createElement(Te,{rootCost:a,parentPath:t,name:t,value:n,all:c,onValueUpdated:o}))},Fe=Object(X.a)({header:{display:"flex",flexDirection:"row",marginLeft:5,marginRight:5,marginBottom:10},field:{marginRight:10,marginTop:20},divider:{margin:5}}),Je=function(){var e=Fe(),a=B(),t=J("selectedCharacter"),n=J("allQualities"),c=t.name,o=t.streetName,u=t.metaType,s=t.qualities,m=I(s,n),d=function(e){var t=e;a({type:L.UpdateCharacter,data:t})};return l.a.createElement(r.Fragment,null,l.a.createElement("div",{className:e.header},l.a.createElement(ce.a,{"id-":"name",label:"Name",value:c,onChange:function(e){return d(Object(i.a)({},t,{name:e.target.value}))},className:e.field,variant:"outlined"}),l.a.createElement(ce.a,{"id-":"street-name",label:"Street Name",value:o,onChange:function(e){return d(Object(i.a)({},t,{streetName:e.target.value}))},className:e.field,variant:"outlined"}),l.a.createElement(le.a,{id:"meta-type",value:u,displayEmpty:!0,onChange:function(e){return d(Object(i.a)({},t,{metaType:e.target.value}))},className:e.field,variant:"outlined"},ie.map((function(e){return l.a.createElement(oe.a,{key:e,value:e},e," (",E(e),")")})))),l.a.createElement(Be,{rootCost:m,rootName:"qualities",rootValue:s,rootAll:n,onRootUpdated:function(e){var n=Object(i.a)({},t,{qualities:e});a({type:L.UpdateCharacter,data:n})}}))},Me=t(174),He=t(190),Re=Object(X.a)({root:{display:"flex",height:50,marginTop:20},name:{width:200},slider:{width:300,marginRight:10}}),Ge=function(e){var a=e.property,t=e.onUpdate,n=e.min,r=e.max,c=e.step,o=e.formatDisplayValue,i=e.computeCost,u=a.name,s=a.rating,m=Re();return l.a.createElement("div",{className:m.root},l.a.createElement(te.a,{gutterBottom:!0,className:m.name},u),l.a.createElement("div",{className:m.slider},l.a.createElement(He.a,{step:c,min:n,max:r,value:s,marks:!0,valueLabelDisplay:"on",onChange:function(e,a){if(Array.isArray(a))throw new Error("Property element '".concat(e.target.id,"' has an array of values instead of a single value: [").concat(a.join(", "),"]"));t({name:u,rating:a})},valueLabelFormat:function(e,a){return o(e)}})),l.a.createElement(te.a,{gutterBottom:!0},"(",i(s),")"))},Pe=function(e){var a=e.skill,t=e.onUpdate,n=e.computeCost;return l.a.createElement(Ge,{property:a,onUpdate:t,min:1,max:5,step:2,formatDisplayValue:function(e){return e.toString()},computeCost:n})},qe=Object(X.a)({header:{display:"flex",flexDirection:"row",marginBottom:20,paddingLeft:16,paddingTop:12},headerLabel:{lineHeight:3,fontWeight:700}}),Qe=function(e){var a=e.breadcrums,t=e.skills,n=e.allSkills,c=e.headerLabel,o=e.computeSkillCost,i=e.onSkillsUpdated,u=qe(),s=B(),m=J("customItems");t.sort((function(e,a){return e.name.localeCompare(a.name)}));var d=a.join(".");n.push.apply(n,Object(pe.a)(Ae(m,d))),n.sort((function(e,a){return e.Name.localeCompare(a.Name)}));var f=function(e){var a=Object(pe.a)(t),n=t.findIndex((function(a){return a.name===e.name}));n>-1?e.rating>0?a[n]=e:a.splice(n,1):e.rating>0&&a.push(e),i(a)};return l.a.createElement(r.Fragment,null,l.a.createElement(ue.a,{defaultExpanded:!0},l.a.createElement(se.a,{expandIcon:l.a.createElement(fe.a,null)},l.a.createElement(Me.a,{onClick:function(e){return e.stopPropagation()},onFocus:function(e){return e.stopPropagation()},control:l.a.createElement(Ue,{breadcrums:a,values:n,selectedValueNames:t.map((function(e){return e.name})),addValue:function(e){f({name:e,rating:1})},removeValue:function(e){f({name:e,rating:-1})},allowNewValues:!0,createValue:function(e){var a={path:"".concat(d,".").concat(e.Name),item:e};s({type:L.AddCustomItem,data:a})}}),label:""}),l.a.createElement(te.a,{className:u.headerLabel},c)),l.a.createElement(me.a,null,l.a.createElement(_.a,null,t.map((function(e){return l.a.createElement(ee.a,{key:e.name},l.a.createElement(Pe,{skill:e,onUpdate:f,computeCost:o}))}))))))},ze=["Skills","Active"],$e=function(){var e=B(),a=J("selectedCharacter"),t=J("allSkills"),n=a.activeSkills,r=O(n),c="Active Skills (".concat(r,")"),o=Object(pe.a)(t.active);return l.a.createElement(Qe,{breadcrums:ze,skills:n,allSkills:o,headerLabel:c,computeSkillCost:k,onSkillsUpdated:function(t){var n=Object(i.a)({},a,{activeSkills:t});e({type:L.UpdateCharacter,data:n})}})},Ze=["Skills","Knowledge"],Ke=function(){var e=B(),a=J("selectedCharacter"),t=J("allSkills"),n=a.knowledgeSkills,r=S(n),c=N(a),o=r-c,u="Knowledge Skills (".concat(r," - ").concat(c," = ").concat(o,")"),s=Object(pe.a)(t.knowledge);return l.a.createElement(Qe,{breadcrums:Ze,skills:n,allSkills:s,headerLabel:u,computeSkillCost:j,onSkillsUpdated:function(t){var n=Object(i.a)({},a,{knowledgeSkills:t});e({type:L.UpdateCharacter,data:n})}})},Ye=["Skills","Language"],Xe=function(){var e=B(),a=J("selectedCharacter"),t=J("allSkills"),n=a.languageSkills,r=S(n),c="Language Skills (".concat(r,") + Native"),o=Object(pe.a)(t.language);return l.a.createElement(Qe,{breadcrums:Ye,skills:n,allSkills:o,headerLabel:c,computeSkillCost:j,onSkillsUpdated:function(t){var n=Object(i.a)({},a,{languageSkills:t});e({type:L.UpdateCharacter,data:n})}})},_e=function(){return l.a.createElement(r.Fragment,null,l.a.createElement($e,null),l.a.createElement(Ke,null),l.a.createElement(Xe,null))},ea=t(175),aa=t(70),ta=t.n(aa),na=Object(X.a)({badge:{marginLeft:50}}),ra=function(){var e=na(),a=J("karma"),t=a.total,n=a.spent,c=a.available;return l.a.createElement(r.Fragment,null,l.a.createElement(ea.a,{className:e.badge,badgeContent:t,color:"primary",max:1e3,showZero:!0},l.a.createElement(ta.a,null)),l.a.createElement(ea.a,{className:e.badge,badgeContent:n,color:"error",max:1e3,showZero:!0},l.a.createElement(ta.a,null)),l.a.createElement(ea.a,{className:e.badge,badgeContent:c,color:"secondary",max:1e3,showZero:!0},l.a.createElement(ta.a,null)))},la=function(e){var a=e.attribute,t=e.metaType,r=e.onUpdate,c=function(e,a){switch(e){case n.Dwarf:switch(a.name){case"Body":return 1;case"Reaction":return-1;case"Strength":return 2;case"Willpower":return 1}break;case n.Elf:switch(a.name){case"Agility":return 1;case"Charisma":return 2}break;case n.Human:switch(a.name){case"Edge":return 1}break;case n.Ork:switch(a.name){case"Body":return 3;case"Strength":return 2;case"Charisma":case"Logic":return-1}break;case n.Troll:switch(a.name){case"Body":return 4;case"Agility":return-1;case"Strength":return 4;case"Charisma":return-2;case"Intuition":case"Logic":return-1}}return 0}(t,a);return l.a.createElement(Ge,{property:a,onUpdate:r,min:1,max:7,step:1,formatDisplayValue:function(e){return(e+c).toString()},computeCost:C})},ca=Object(X.a)({header:{marginBottom:20,paddingLeft:16,paddingTop:12,fontWeight:700}}),oa=function(){var e=B(),a=J("selectedCharacter"),t=ca(),n=a.attributes,c=a.metaType,o=n.filter((function(e){return s(a)||"Magic"!==e.name})),u=w(a),m=function(t){var r=Object(pe.a)(n),l=r.findIndex((function(e){return e.name===t.name}));r[l]=t,e({type:L.UpdateCharacter,data:Object(i.a)({},a,{attributes:r})})};return l.a.createElement(r.Fragment,null,l.a.createElement(te.a,{className:t.header},"Attributes (",u,")"),l.a.createElement(_.a,null,o.map((function(e){return l.a.createElement(ee.a,{key:e.name},l.a.createElement(la,{attribute:e,metaType:c,onUpdate:m}))}))))},ia=function(){return l.a.createElement(oa,null)};function ua(e){switch(e){case 1:return 2;case 3:return 7;case 5:return 15;default:throw new Error}}function sa(e){var a=0;return a+=ua(e.connection),a+=ua(e.loyalty)}var ma=Object(X.a)({headerLabel:{fontWeight:700},details:{display:"flex",flexDirection:"column"},rating:{marginBottom:20}}),da=function(e){var a=e.contact,t=e.onUpdate,n=ma(),c=sa(a),o={name:"Connection",rating:a.connection},u={name:"Loyalty",rating:a.loyalty};return l.a.createElement(r.Fragment,null,l.a.createElement(ue.a,{defaultExpanded:!0},l.a.createElement(se.a,{expandIcon:l.a.createElement(fe.a,null)},l.a.createElement(te.a,{className:n.headerLabel},a.name," (",c,")")),l.a.createElement(me.a,null,l.a.createElement("div",{className:n.details},l.a.createElement("div",{className:n.rating},l.a.createElement(Ge,{property:o,onUpdate:function(e){var n=Object(i.a)({},a,{connection:e.rating});t(n)},min:1,max:3,step:2,formatDisplayValue:function(e){return e.toString()},computeCost:ua})),l.a.createElement("div",{className:n.rating},l.a.createElement(Ge,{property:u,onUpdate:function(e){var n=Object(i.a)({},a,{loyalty:e.rating});t(n)},min:1,max:5,step:2,formatDisplayValue:function(e){return e.toString()},computeCost:ua}))))))},fa=Object(X.a)({header:{display:"flex",flexDirection:"row"},headerLabel:{lineHeight:3,fontWeight:700}}),va=["Contacts"],ha=va.join("."),pa=function(){var e=fa(),a=B(),t=J("selectedCharacter"),n=J("allContacts"),c=J("customItems"),o=t.contacts;o.sort((function(e,a){return e.name.localeCompare(a.name)}));var u=function(e){return e.contacts.map((function(e){return sa(e)})).reduce((function(e,a){return e+a}),0)}(t),s=function(e){var a=e.attributes.find((function(e){return"Charisma"===e.name}));if(void 0===a)throw new Error("Character '".concat(e.streetName,"' has no attribute 'Charisma'"));var t=e.attributes.find((function(e){return"Willpower"===e.name}));if(void 0===t)throw new Error("Character '".concat(e.streetName,"' has no attribute 'Willpower'"));return 10*(a.rating+t.rating)}(t),m=u-s,d="Contacts (".concat(u," - ").concat(s," = ").concat(m,")");n.push.apply(n,Object(pe.a)(Ae(c,ha))),n.sort((function(e,a){return e.Name.localeCompare(a.Name)}));var f=function(e){var n=Object(pe.a)(o),r=o.findIndex((function(a){return a.name===e.name}));r>-1?e.connection>0&&e.loyalty>0?n[r]=e:n.splice(r,1):e.connection>0&&e.loyalty>0&&n.push(e);var l=Object(i.a)({},t,{contacts:n});a({type:L.UpdateCharacter,data:l})};return l.a.createElement(r.Fragment,null,l.a.createElement("div",{className:e.header},l.a.createElement(Ue,{breadcrums:va,values:n,selectedValueNames:o.map((function(e){return e.name})),addValue:function(e){f({name:e,connection:1,loyalty:1})},removeValue:function(e){f({name:e,connection:-1,loyalty:-1})},allowNewValues:!0,createValue:function(e){var t={path:"".concat(ha,".").concat(e.Name),item:e};a({type:L.AddCustomItem,data:t})}}),l.a.createElement(te.a,{className:e.headerLabel},d)),l.a.createElement(_.a,null,o.map((function(e){return l.a.createElement(ee.a,{key:e.name},l.a.createElement(da,{contact:e,onUpdate:f}))}))))},ba=function(){return l.a.createElement(pa,null)};function ga(e){return 5*e.length}var ya=function(){var e=B(),a=J("selectedCharacter"),t=a.spells,n=J("allSpells"),r=function(e){var a=0;return a+=ga(e.spells.combat),a+=ga(e.spells.detection),a+=ga(e.spells.health),a+=ga(e.spells.illusion),a+=ga(e.spells.manipulation)}(a);return l.a.createElement(Be,{rootCost:r,rootName:"spells",rootValue:t,rootAll:n,onRootUpdated:function(t){var n=Object(i.a)({},a,{spells:t});e({type:L.UpdateCharacter,data:n})}})};function Ea(e,a){var t={},n=!0,r=!1,l=void 0;try{for(var c,o=Ca(e,a)[Symbol.iterator]();!(n=(c=o.next()).done);n=!0){var i=c.value;t[i]=e[i]}}catch(u){r=!0,l=u}finally{try{n||null==o.return||o.return()}finally{if(r)throw l}}return t}function Ca(e,a){for(var t=[],n=a.split("."),r=0,l=Object.keys(e);r<l.length;r++){var c=l[r],o=c.split(".");if(o.length<n.length)throw new Error("Child paths '".concat(c,"' must be longer than parent paths '").concat(a,"'"));for(var i=!0,u=0;u<n.length;u++)if(n[u]!==o[u]){i=!1;break}i&&t.push(c)}return t}var wa=t(191),ka=Object(X.a)({root:{display:"flex",flexDirection:"row",flexWrap:"wrap",justifyContent:"flex-start"},chip:{marginRight:10,marginBottom:10}}),Oa=function(e){var a=e.values,t=e.createChipLabel,n=e.onDeleteValue,r=ka();return l.a.createElement("div",{className:r.root},a.map((function(e){return l.a.createElement(wa.a,{className:r.chip,color:"primary",label:t(e),onDelete:function(){return n(e)}})})))};function ja(e,a){var t=[],n=!0,r=!1,l=void 0;try{for(var c,o=e[Symbol.iterator]();!(n=(c=o.next()).done);n=!0){var i=c.value;(i.path===a||i.path.startsWith("".concat(a,".")))&&t.push(i)}}catch(u){r=!0,l=u}finally{try{n||null==o.return||o.return()}finally{if(r)throw l}}return t}var Sa=t(177),Na=t(176),xa=t(125),Ia=t(88),La=Object(X.a)({root:{display:"flex",flexDirection:"row",padding:10,margin:10},name:{width:400,textAlign:"left"},cost:{width:150}}),Ua=function(e){var a=e.item,t=e.onUpdateItem,n=La(),r=parseInt(a.count);return l.a.createElement(Ia.a,{className:n.root,elevation:3},l.a.createElement(te.a,{className:n.name,style:{lineHeight:"36px"}},a.name),l.a.createElement("span",{className:n.cost},l.a.createElement(ea.a,{badgeContent:r,color:"secondary"},l.a.createElement(te.a,{style:{lineHeight:"36px"}},"(",a.cost,")"))),l.a.createElement(Na.a,null,l.a.createElement(xa.a,{onClick:function(){t(Object(i.a)({},a,{count:(r+1).toString()}))}},l.a.createElement(Oe.a,null)),l.a.createElement(xa.a,{onClick:function(){t(Object(i.a)({},a,{count:Math.max(r-1,0).toString()}))}},l.a.createElement(Se.a,null))))},Aa=Object(X.a)({items:{display:"flex",flexDirection:"column"}}),Va=function(e){var a=e.items,t=e.onUpdateItems,n=Aa(),c=function(e){var n=Object(pe.a)(a);n[a.findIndex((function(a){return a.name===e.name}))]=e,t(n)};return l.a.createElement(r.Fragment,null,l.a.createElement(Sa.a,null),l.a.createElement("div",{className:n.items},a?a.map((function(e){return l.a.createElement(Ua,{item:e,onUpdateItem:c})})):l.a.createElement("div",null,"No items")))},Wa=function(e){var a=e.open,t=e.onClose,n=e.title,c=e.allItems,o=e.onUpdateAllItems,s=Object.keys(c),m=Object(pe.a)(s),d=new Map,f=!0,v=!1,h=void 0;try{for(var p,b=m[Symbol.iterator]();!(f=(p=b.next()).done);f=!0){var g=p.value,y=g.split("."),E=y[y.length-1],C=Object(he.a)(E);d.set(g,C)}}catch(S){v=!0,h=S}finally{try{f||null==b.return||b.return()}finally{if(v)throw h}}var w=Object(r.useState)(m[0]),k=Object(u.a)(w,2),O=k[0],j=k[1];void 0===m.find((function(e){return e===O}))&&j(m[0]);return l.a.createElement(Ee.a,{open:a,onClose:t},l.a.createElement(we.a,null,n),l.a.createElement(Ce.a,null,m.length>1?l.a.createElement(le.a,{id:"group",value:O,displayEmpty:!0,onChange:function(e){j(e.target.value)},variant:"outlined"},m.map((function(e){return l.a.createElement(oe.a,{key:e,value:e},d.get(e))}))):null,l.a.createElement(Va,{label:d.get(O),items:c[O],onUpdateItems:function(e){var a=Object(i.a)({},c);a[O]=e,o(a)}})))},Da=t(86),Ta="gear";function Ba(e){var a={};return function e(a,t,n){for(var r=0,l=Object.keys(t);r<l.length;r++){var c=l[r],o="".concat(a,".").concat(c),i=t[c];if(Object(ve.isArray)(i)){var u=i,s=[],m=!0,d=!1,f=void 0;try{for(var v,h=u.map((function(e){return Fa(a,e)}))[Symbol.iterator]();!(m=(v=h.next()).done);m=!0){var p=v.value;/^([\w-\s]+)\s+\(([\w-\s]+(,\s*)?)+\)$/i.test(p.name)?s.push.apply(s,Object(pe.a)(Ja(a,p))):s.push(p)}}catch(y){d=!0,f=y}finally{try{m||null==h.return||h.return()}finally{if(d)throw f}}for(var b=0,g=s;b<g.length;b++){Ma(g[b])}n[o]=s}else e(o,i,n)}}(Ta,e,a),a}function Fa(e,a){for(var t={path:e,name:"[NAME]",availability:"[AVAILABILITY]",cost:"[COST]",costLabel:"[COST]"},n=0,r=Object.keys(a);n<r.length;n++){var l=r[n],c=a[l];"Name"===l?t.name=c:"Availability"===l?t.availability=c:"Cost"===l?t.costLabel=c:t[l]=c}return t}function Ja(e,a){var t=[],n=/^([\w-\s]+)\s+\(((?:(?:[\w-\s]+)(?:,\s*)?)+)\)$/i.exec(a.name);if(null===n)throw new Error("Gear item's name '".concat(a.name,"' does not contain multiple ratings"));for(var r=n[1],l=n[2].split(",").map((function(e){return e.trim()})),c=l.length,o=0;o<c;o++){for(var i={path:e,name:"".concat(r," - ").concat(l[o]),availability:"[AVAILABILITY]",cost:"[COST]",costLabel:"[COST]"},u=0,s=Object.keys(a);u<s.length;u++){var m=s[u];if("name"!==m&&"cost"!==m){var d=a[m],f=d.split(",").map((function(e){return e.trim()}));if(1===f.length)i[m]=d;else{if(f.length!==c)throw new Error("Properties should have a single value or the same amount as there are version names ".concat(c," - found ").concat(f.length));i[m]=f[o]}}}t.push(i)}return t}function Ma(e){var a=/^(?:x|\+)?(\d+)\s*(?:\(([\w\s]+)\))?$/i.exec(e.costLabel);if(a){if(e.cost=a[1],isNaN(parseInt(e.cost)))throw new Error("Gear item '".concat(e.name,"' has unsupported cost label '").concat(e.costLabel,"'"))}else e.cost="0"}var Ha=new Map;function Ra(e,a){var t="".concat(e.path,".").concat(e.name);if(Ha.has(t))return Ha.get(t);var n=a[e.path],r=n.find((function(a){return a.name===e.name}));if(!r)throw new Error("Could not find gear with name '".concat(e.name,"' in list '").concat(JSON.stringify(n),"' under path '").concat(e.path,"'"));var l=parseInt(r.cost);return Ha.set(t,l),l}function Ga(e,a){var t=a.name,n=a.count,r=a.grade,l={path:e,name:t,count:n,grade:r};return void 0!==r&&(l.grade=r),l}var Pa=function(e){var a=e.title,t=e.items,n=e.allItems,c=e.onUpdateItems,o=Object(r.useState)(!1),i=Object(u.a)(o,2),s=i[0],m=i[1],d=function(e){for(var a=new Map,t=Object.keys(e).map((function(e){return e.split(".")})),n=!1,r=0;!n;){if(r>=t[0].length)throw new Error("Searched through all path components and found no differences");for(var l=1;l<t.length;l++)if(t[0][r]!==t[l][r]){n=!0;break}r++}var c=!0,o=!1,i=void 0;try{for(var u,s=t[Symbol.iterator]();!(c=(u=s.next()).done);c=!0){var m=u.value,d=m.slice(0,r).join("."),f=m[r-1];a.set(d,Object(he.a)(f))}}catch(v){o=!0,i=v}finally{try{c||null==s.return||s.return()}finally{if(o)throw i}}return a}(n),f=[],v=!0,h=!1,p=void 0;try{for(var b,g=d.keys()[Symbol.iterator]();!(v=(b=g.next()).done);v=!0){var y=b.value;f.push(y)}}catch(H){h=!0,p=H}finally{try{v||null==g.return||g.return()}finally{if(h)throw p}}for(var E=Object(r.useState)(f[0]),C=Object(u.a)(E,2),w=C[0],k=C[1],O=Object(r.useState)(null),j=Object(u.a)(O,2),S=j[0],N=j[1],x=Ea(n,w),I={},L=0,U=Object.keys(x);L<U.length;L++){var A=U[L],V=Object(pe.a)(x[A]),W=ja(t,w),D=!0,T=!1,B=void 0;try{for(var F,J=function(){var e=F.value,a=W.find((function(a){return a.name===e.name}));e.count=a?a.count:"0"},M=V[Symbol.iterator]();!(D=(F=M.next()).done);D=!0)J()}catch(H){T=!0,B=H}finally{try{D||null==M.return||M.return()}finally{if(T)throw B}}I[A]=V}return l.a.createElement(r.Fragment,null,l.a.createElement(R.a,{onClick:function(e){return N(e.currentTarget)},color:"secondary",size:"medium",disableRipple:!0},l.a.createElement(ye.a,null)),l.a.createElement(Da.a,{anchorEl:S,open:Boolean(S),onClose:function(){return N(null)}},f.map((function(e){return l.a.createElement(oe.a,{key:e,onClick:function(){!function(e){k(e),N(null),m(!0)}(e)}},Object(he.a)(d.get(e)))}))),l.a.createElement(Wa,{open:s,onClose:function(){return m(!1)},title:"".concat(a," - ").concat(d.get(w)),allItems:I,onUpdateAllItems:function(e){for(var a=Object(pe.a)(t),n=function(){var t=l[r],n=!0,c=!1,o=void 0;try{for(var i,u=function(){var e=i.value,n=parseInt(e.count)>0,r=a.findIndex((function(a){return a.path===t&&a.name===e.name}));r>-1?n?a[r]=Ga(t,e):a.splice(r,1):n&&a.push(Ga(t,e))},s=e[t][Symbol.iterator]();!(n=(i=s.next()).done);n=!0)u()}catch(H){c=!0,o=H}finally{try{n||null==s.return||s.return()}finally{if(c)throw o}}},r=0,l=Object.keys(e);r<l.length;r++)n();c(a)}}))},qa=Object(X.a)({headerLabel:{lineHeight:3,fontWeight:700}}),Qa=function(e){var a=e.label,t=e.items,n=e.allItems,r=e.createItemLabel,c=e.onUpdateItems,o=qa(),i=0,u=!0,s=!1,m=void 0;try{for(var d,f=t[Symbol.iterator]();!(u=(d=f.next()).done);u=!0){var v=d.value;i+=Ra(v,n)*parseInt(v.count)}}catch(y){s=!0,m=y}finally{try{u||null==f.return||f.return()}finally{if(s)throw m}}for(var h=[],p=0,b=Object.keys(n);p<b.length;p++){var g=b[p];h.push.apply(h,Object(pe.a)(n[g]))}return l.a.createElement(ue.a,{defaultExpanded:!1},l.a.createElement(se.a,{expandIcon:l.a.createElement(fe.a,null)},l.a.createElement(Me.a,{onClick:function(e){return e.stopPropagation()},onFocus:function(e){return e.stopPropagation()},control:l.a.createElement(Pa,{title:a,items:t,allItems:n,onUpdateItems:function(e){c(e)}}),label:""}),l.a.createElement(te.a,{className:o.headerLabel},a," (",i,")")),l.a.createElement(me.a,null,l.a.createElement(Oa,{values:t,createChipLabel:r,onDeleteValue:function(e){var a=Object(pe.a)(t),n=a.findIndex((function(a){return a.name===e.name}));if(n<0)throw new Error("Could not find item '".concat(e.name,"' to delete in list '").concat(JSON.stringify(a),"'"));a.splice(n,1),c(a)}})))},za=function(){var e=B(),a=J("selectedCharacter"),t=a.gear,n=J("allGear"),c=function(e){var a=e.name,t=e.count,r=Ra(e,n);return parseInt(t)>1?"".concat(a," (").concat(r," x ").concat(t,")"):"".concat(a," (").concat(r,")")};return l.a.createElement(r.Fragment,null,function(e,a){var t=new Set,n=a.split("."),r=!0,l=!1,c=void 0;try{for(var o,i=Ca(e,a)[Symbol.iterator]();!(r=(o=i.next()).done);r=!0){var u=o.value.split(".");t.add(u[n.length])}}catch(s){l=!0,c=s}finally{try{r||null==i.return||i.return()}finally{if(l)throw c}}return Array.from(t)}(n,Ta).map((function(r){return l.a.createElement(Qa,{key:r,label:Object(he.a)(r),items:ja(t,"".concat(Ta,".").concat(r)),allItems:Ea(n,"".concat(Ta,".").concat(r)),createItemLabel:c,onUpdateItems:function(n){return function(n,r){var l=t.filter((function(e){return!e.path.startsWith("".concat(Ta,".").concat(n))}));l.push.apply(l,Object(pe.a)(r));var c=Object(i.a)({},a,{gear:l});e({type:L.UpdateCharacter,data:c})}(r,n)}})})))},$a=Object(X.a)({bar:{flexGrow:1,display:"flex"}}),Za=function(){var e=$a(),a=B(),t=J("selectedCharacter");Object(r.useEffect)((function(){fetch("/data/qualities.json").then((function(e){return e.json()})).then((function(e){var t=e;a({type:L.LoadQualities,data:t})})).catch((function(e){console.error("Error occured loading qualities: ".concat(e.message,"\n").concat(e.stack))})),fetch("/data/skills.json").then((function(e){return e.json()})).then((function(e){var t=e;a({type:L.LoadSkills,data:t})})),fetch("/data/contacts.json").then((function(e){return e.json()})).then((function(e){var t=e.all;a({type:L.LoadContacts,data:t})})),fetch("/data/magic.json").then((function(e){return e.json()})).then((function(e){var t=e.spells;a({type:L.LoadSpells,data:t})})),fetch("/data/gear.json").then((function(e){return e.json()})).then((function(e){var t=Ba(e);a({type:L.LoadGear,data:t})}))}),[a]);var n,c=Object(r.useState)(0),o=Object(u.a)(c,2),i=o[0],m=o[1],d=s(t);switch(i){case 0:n=l.a.createElement(Je,null);break;case 1:n=l.a.createElement(ia,null);break;case 2:n=l.a.createElement(_e,null);break;case 3:n=l.a.createElement(ba,null);break;case 4:n=d?l.a.createElement(ya,null):l.a.createElement(za,null);break;case 5:n=d?l.a.createElement(za,null):null;break;default:throw new Error("Unknown tab index ".concat(i))}var f=Object(r.useState)(!1),v=Object(u.a)(f,2),h=v[0],p=v[1];return l.a.createElement("div",null,l.a.createElement(M.a,{position:"sticky",color:"default"},l.a.createElement(H.a,null,l.a.createElement(R.a,{edge:"start",onClick:function(){p(!0)},"aria-label":"menu"},l.a.createElement(q.a,null)),l.a.createElement("div",{className:e.bar},l.a.createElement(ne,{character:t}),l.a.createElement(ra,null)),l.a.createElement(R.a,{"aria-label":"save",onClick:function(){a({type:L.SaveCharacter})},color:"secondary"},l.a.createElement(z.a,null)),l.a.createElement(R.a,{"aria-label":"clear",onClick:function(){a({type:L.ClearCharacter})},color:"secondary"},l.a.createElement(Z.a,null))),l.a.createElement(K.a,{value:i,onChange:function(e,a){m(a)}},l.a.createElement(Y.a,{label:"Character"}),l.a.createElement(Y.a,{label:"Attributes"}),l.a.createElement(Y.a,{label:"Skills"}),l.a.createElement(Y.a,{label:"Contacts"}),d?l.a.createElement(Y.a,{label:"Magic"}):null,l.a.createElement(Y.a,{label:"Gear"}))),n,l.a.createElement(G.a,{open:h,onClose:function(){p(!1)}},l.a.createElement(re,null)))},Ka=t(85),Ya=t(181),Xa=t(182),_a=Object(Ka.a)({palette:{type:"dark"}}),et=function(){var e=Object(r.useReducer)(W,D,(function(e){var a=function(){for(var e=[f()],a=0;a<localStorage.length;a++){var t=localStorage.key(a);if(null!==t&&/^character:\d+$/i.test(t)){var n=localStorage.getItem(t);if(n){var r=JSON.parse(n),l=r.key,c=r.name,o=r.streetName;e.push({key:l,name:c,streetName:o})}}}return e.sort((function(e,a){return e.key-a.key})),e}(),t=function(){var e=localStorage.getItem(b);return e?parseInt(e):-1}(),n=e.selectedCharacter;if(t>-1){var r=a.find((function(e){return e.key===t}));if(r){var l=p(r.key);l&&(n=l)}}return Object(i.a)({},e,{characters:a,selectedCharacter:n})})),a=Object(u.a)(e,2),t=a[0],n=a[1];return l.a.createElement(T.Provider,{value:n},l.a.createElement(F.Provider,{value:t},l.a.createElement(Ya.a,{theme:_a},l.a.createElement(Xa.a,null),l.a.createElement(Za,null))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(l.a.createElement(et,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[106,1,2]]]);
//# sourceMappingURL=main.7a69d90f.chunk.js.map