(this["webpackJsonpcyberpunk-character-creator"]=this["webpackJsonpcyberpunk-character-creator"]||[]).push([[0],{112:function(e,a,t){e.exports=t(128)},117:function(e,a,t){},128:function(e,a,t){"use strict";t.r(a);var n,r=t(0),l=t.n(r),c=t(13),o=t.n(c),i=(t(117),t(7)),u=t(14),s=t(9);function m(e){return void 0!==e.qualities.find((function(e){return"Adept"===e.name||"Magician"===e.name}))}!function(e){e.Dwarf="Dwarf",e.Elf="Elf",e.Human="Human",e.Ork="Ork",e.Troll="Troll"}(n||(n={}));var d=-1,f={key:d,name:"",streetName:"",metaType:n.Human,attributes:[{name:"Body",rating:3},{name:"Agility",rating:3},{name:"Reaction",rating:3},{name:"Strength",rating:3},{name:"Charisma",rating:3},{name:"Intuition",rating:3},{name:"Logic",rating:3},{name:"Willpower",rating:3},{name:"Edge",rating:3},{name:"Magic",rating:3}],qualities:[],activeSkills:[],knowledgeSkills:[],languageSkills:[],contacts:[],spells:[],gear:[]};function h(){return Object(i.a)({},f)}var v="character";function p(e){return"".concat(v,":").concat(e)}function g(e){if(-1===e)return h();var a=localStorage.getItem(p(e));return a?JSON.parse(a):void 0}function b(e){localStorage.setItem(p(e.key),JSON.stringify(e))}var y="selected-character";var E="custom-item";function C(e,a){return"".concat(E,":").concat(e,".").concat(a,"}")}function w(e){switch(e){case n.Human:return 0;case n.Ork:return 40;case n.Dwarf:return 50;case n.Elf:return 60;case n.Troll:return 80;default:throw new Error("Unknown meta-type '".concat(e,"'"))}}function k(e,a){var t=e.attributes.find((function(e){return e.name===a}));if(!t)throw new Error("Could not find attribute with name '".concat(a,"'"));return t.rating+O(e.metaType,t)}function O(e,a){switch(e){case n.Dwarf:switch(a.name){case"Body":return 1;case"Reaction":return-1;case"Strength":return 2;case"Willpower":return 1}break;case n.Elf:switch(a.name){case"Agility":return 1;case"Charisma":return 2}break;case n.Human:switch(a.name){case"Edge":return 1}break;case n.Ork:switch(a.name){case"Body":return 3;case"Strength":return 2;case"Charisma":case"Logic":return-1}break;case n.Troll:switch(a.name){case"Body":return 4;case"Agility":return-1;case"Strength":return 4;case"Charisma":return-2;case"Intuition":case"Logic":return-1}}return 0}function j(e){switch(e){case 1:return-25;case 2:return-15;case 3:return 0;case 4:return 20;case 5:return 45;case 6:return 75;case 7:return 110;default:throw new Error("Unsupported attribute rating ".concat(e))}}function S(e){var a=m(e),t=0,n=!0,r=!1,l=void 0;try{for(var c,o=e.attributes[Symbol.iterator]();!(n=(c=o.next()).done);n=!0){var i=c.value;("Magic"!==i.name||a)&&(t+=j(i.rating))}}catch(u){r=!0,l=u}finally{try{n||null==o.return||o.return()}finally{if(r)throw l}}return t}function N(e){switch(e){case-1:return 0;case 1:return 5;case 3:return 15;case 5:return 30;default:throw new Error("Unsupported skill rating ".concat(e))}}function x(e){return e.map((function(e){return N(e.rating)})).reduce((function(e,a){return e+a}),0)}function I(e){switch(e){case 1:return 2;case 3:return 7;case 5:return 15;default:throw new Error("Unsupported skill rating ".concat(e))}}function L(e){return e.map((function(e){return I(e.rating)})).reduce((function(e,a){return e+a}),0)}function A(e){var a=e.attributes.find((function(e){return"Intuition"===e.name}));if(void 0===a)throw new Error("Character '".concat(e.streetName,"' has no attribute 'Intuition'"));var t=e.attributes.find((function(e){return"Logic"===e.name}));if(void 0===t)throw new Error("Character '".concat(e.streetName,"' has no attribute 'Logic'"));return 10*(a.rating+t.rating)}function U(e){var a=x(e.activeSkills),t=L(e.knowledgeSkills),n=L(e.languageSkills),r=A(e);return a+Math.max(t+n-r,0)}var D=t(194),T=t(83);function W(e,a,t,n){for(var r=0,l=Object.keys(a);r<l.length;r++){var c=l[r],o="".concat(e,".").concat(c),i=a[c];Object(T.isArray)(i)?t[o]=n(o,i):W(o,i,t,n)}}var B=new Map;function F(e,a){var t="".concat(e.path,".").concat(e.name);if(B.has(t))return B.get(t);var n=a[e.path],r=n.find((function(a){return a.name===e.name}));if(!r)throw new Error("Could not find item with name '".concat(e.name,"' in list '").concat(JSON.stringify(n),"' under path '").concat(e.path,"'"));var l=parseInt(r.cost);return B.set(t,l),l}var V=new Map;function M(e,a){var t={},n=!0,r=!1,l=void 0;try{for(var c,o=R(e,a)[Symbol.iterator]();!(n=(c=o.next()).done);n=!0){var i=c.value;t[i]=e[i]}}catch(u){r=!0,l=u}finally{try{n||null==o.return||o.return()}finally{if(r)throw l}}return t}function R(e,a){for(var t=[],n=a.split("."),r=0,l=Object.keys(e);r<l.length;r++){var c=l[r],o=c.split(".");if(o.length<n.length)throw new Error("Child paths '".concat(c,"' must be longer than parent paths '").concat(a,"'"));for(var i=!0,u=0;u<n.length;u++)if(n[u]!==o[u]){i=!1;break}i&&t.push(c)}return t}var G="qualities";function J(e,a){var t=[],n=!0,r=!1,l=void 0;try{for(var c,o=a[Symbol.iterator]();!(n=(c=o.next()).done);n=!0){var i=c.value,u=i.Name,s=i.Cost;t.push({path:e,name:u,cost:s})}}catch(m){r=!0,l=m}finally{try{n||null==o.return||o.return()}finally{if(r)throw l}}return t}function H(e,a){var t=0,n=!0,r=!1,l=void 0;try{for(var c,o=e.qualities[Symbol.iterator]();!(n=(c=o.next()).done);n=!0){t+=F(c.value,a)}}catch(i){r=!0,l=i}finally{try{n||null==o.return||o.return()}finally{if(r)throw l}}return t}var P,Q="gear";function Z(e,a){var t=[],n=!0,r=!1,l=void 0;try{for(var c,o=a.map((function(a){return function(e,a){for(var t={path:e,name:"[NAME]",availability:"[AVAILABILITY]",cost:"[COST]",costLabel:"[COST]"},n=0,r=Object.keys(a);n<r.length;n++){var l=r[n],c=a[l];"Name"===l?t.name=c:"Availability"===l?t.availability=c:"Cost"===l?t.costLabel=c:t[l]=c}return t}(e,a)}))[Symbol.iterator]();!(n=(c=o.next()).done);n=!0){var i=c.value;/^([\w-\s]+)\s+\(([\w-\s]+(,\s*)?)+\)$/i.test(i.name)?t.push.apply(t,Object(s.a)(z(e,i))):t.push(i)}}catch(d){r=!0,l=d}finally{try{n||null==o.return||o.return()}finally{if(r)throw l}}for(var u=0,m=t;u<m.length;u++){q(m[u])}return t}function z(e,a){var t=[],n=/^([\w-\s]+)\s+\(((?:(?:[\w-\s]+)(?:,\s*)?)+)\)$/i.exec(a.name);if(null===n)throw new Error("Gear item's name '".concat(a.name,"' does not contain multiple ratings"));for(var r=n[1],l=n[2].split(",").map((function(e){return e.trim()})),c=l.length,o=0;o<c;o++){for(var i={path:e,name:"".concat(r," - ").concat(l[o]),availability:"[AVAILABILITY]",cost:"[COST]",costLabel:"[COST]"},u=0,s=Object.keys(a);u<s.length;u++){var m=s[u];if("name"!==m&&"cost"!==m){var d=a[m],f=d.split(",").map((function(e){return e.trim()}));if(1===f.length)i[m]=d;else{if(f.length!==c)throw new Error("Properties should have a single value or the same amount as there are version names ".concat(c," - found ").concat(f.length));i[m]=f[o]}}}t.push(i)}return t}function q(e){var a=/^(?:x|\+)?(\d+)\s*(?:\(([\w\s]+)\))?$/i.exec(e.costLabel);if(a){if(e.cost=a[1],isNaN(parseInt(e.cost)))throw new Error("Gear item '".concat(e.name,"' has unsupported cost label '").concat(e.costLabel,"'"))}else e.cost="0"}function $(e,a){var t=F(e,a),n=1;void 0!==e.grade&&(n*=Y(e.grade),n=Y(e.grade));var r=function(e,a){var t="".concat(e.path,".").concat(e.name);if(V.has(t))return V.get(t);var n=a[e.path],r=n.find((function(a){return a.name===e.name}));if(!r)throw new Error("Could not find item with name '".concat(e.name,"' in list '").concat(JSON.stringify(n),"' under path '").concat(e.path,"'"));var l=r.availability;return V.set(t,l),l}(e,a);return void 0!==r&&(n*=function(e){var a=X(e),t=a.rating,n=a.legality;return"F"===n?t<=6?1:t<=8?2:t<=10?5:t<=12?10:Number.NaN:"R"===n?t<=12?1:t<=14?2:t<=16?5:t<=18?10:Number.NaN:t<=18?1:t<=20?2:t<=22?5:t<=24?10:Number.NaN}(r)),t*n}function K(e,a){var t=a.name,n=a.count,r=a.grade,l={path:e,name:t,count:n,grade:r};return void 0===r&&delete l.grade,l}function Y(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:P.Alpha;switch(e){case P.Used:return.5;case P.Alpha:return 1;case P.Beta:return 5;case P.Delta:return 15;default:throw new Error("Unknown augmentation grade '".concat(e,"'"))}}function X(e){if("-"===e)return{rating:1,legality:"L"};var a=/^\+?(\d+)(R|F)?$/i.exec(e);return a?{rating:parseInt(a[1]),legality:a[2]||"L"}:(console.error("Unknown availability format '".concat(e,"' - falling back to standard cost")),{rating:1,legality:"L"})}function _(e,a){var t=0,n=!0,r=!1,l=void 0;try{for(var c,o=e.gear[Symbol.iterator]();!(n=(c=o.next()).done);n=!0){var i=c.value;t+=$(i,a)*parseInt(i.count)}}catch(u){r=!0,l=u}finally{try{n||null==o.return||o.return()}finally{if(r)throw l}}return t}function ee(e){return 5*Math.ceil(e/1e4)}!function(e){e.Used="Used",e.Alpha="Alpha",e.Beta="Beta",e.Delta="Delta"}(P||(P={}));var ae,te=500;function ne(){return{total:te,spent:0,available:te}}function re(e,a,t){var n=e.total,r=0;return r+=w(a.metaType),r+=H(a,t.allQualities),r+=S(a),r+=U(a),{total:n,spent:r+=ee(_(a,t.allGear)),available:n-r}}!function(e){e.UpdateCharacter="updateCharacter",e.ImportCharacter="importCharacter",e.ClearCharacter="clearCharacter",e.SelectCharacter="selectCharacter",e.LoadQualities="loadQualities",e.LoadSkills="loadSkills",e.LoadContacts="loadContacts",e.LoadSpells="loadSpells",e.LoadGear="loadGear",e.LoadCustomItems="loadCustomItems",e.AddCustomItem="addCustomItem"}(ae||(ae={}));var le=function(e,a){switch(a.type){case ae.UpdateCharacter:var t=a.data,n=oe(t,e),r=re(e.karma,t,e);return b(t),Object(i.a)({},e,{selectedCharacter:t,characters:n,karma:r});case ae.ImportCharacter:var l=a.data;b(l);var c=oe(l,e),o=re(e.karma,l,e);return Object(i.a)({},e,{selectedCharacter:l,characters:c,karma:o});case ae.ClearCharacter:S=e.selectedCharacter,localStorage.removeItem(p(S.key));var u=e.characters.filter((function(a){return a.key!==e.selectedCharacter.key})).map((function(e){return{key:e.key,name:e.name,streetName:e.streetName}}));return Object(i.a)({},e,{characters:u,selectedCharacter:h(),karma:ne()});case ae.SelectCharacter:var s=a.data,m=g(s.key);if(!m)throw new Error("Could not find saved character ".concat(JSON.stringify(s)));var d=re(e.karma,m,e);return Object(i.a)({},e,{selectedCharacter:m,karma:d});case ae.LoadQualities:var f=a.data;return Object(i.a)({},e,{allQualities:f});case ae.LoadSkills:var v=a.data;return Object(i.a)({},e,{allSkills:v});case ae.LoadContacts:var y=a.data;return Object(i.a)({},e,{allContacts:y});case ae.LoadGear:var E=a.data;return Object(i.a)({},e,{allGear:E});case ae.LoadSpells:var w=a.data;return Object(i.a)({},e,{allSpells:w});case ae.LoadCustomItems:var k=a.data;return Object(i.a)({},e,{customItems:k});case ae.AddCustomItem:var O=a.data;!function(e,a){var t=C(e,a.Name);localStorage.setItem(t,JSON.stringify(a))}(O.path,O.item);var j=Object(i.a)({},e.customItems);return j[O.path]=O.item,Object(i.a)({},e,{customItems:j})}var S;return Object(i.a)({},e)},ce={characters:[],selectedCharacter:h(),karma:ne(),allQualities:{positive:[],negative:[]},allSkills:{active:[],knowledge:[],language:[]},allContacts:[],allSpells:{combat:[],detection:[],health:[],illusion:[],manipulation:[]},allGear:{},customItems:{}};function oe(e,a){var t,n=Object(s.a)(a.characters);!function(e){return e.key===d}(e)?t=n.findIndex((function(a){return a.key===e.key})):(e.key=Date.now(),t=-1);var r=e.key,l=e.name,c=e.streetName;return-1===t?n.push({key:r,name:l,streetName:c}):n[t]={key:r,name:l,streetName:c},n}var ie=Object(r.createContext)((function(){})),ue=function(){return Object(r.useContext)(ie)},se=Object(r.createContext)(ce),me=function(e){return Object(r.useContext)(se)[e]},de=t(188),fe=t(189),he=t(132),ve=t(171),pe=t(199),ge=t(88),be=t.n(ge),ye=t(89),Ee=t.n(ye),Ce=t(193),we=t(190),ke=t(170),Oe=t(168),je=t(129),Se=t(169),Ne=t(38),xe=function(e){var a=e.character,t=a.name,n=a.streetName;return t||n?n?t?l.a.createElement(Ne.a,null,t," aka ",n):l.a.createElement(Ne.a,null,n):l.a.createElement(Ne.a,null,t):l.a.createElement(Ne.a,null,"= New Character =")},Ie=function(){var e=ue(),a=me("characters");return l.a.createElement(Oe.a,{subheader:l.a.createElement(Se.a,null,"Characters")},a.map((function(a){return l.a.createElement(je.a,{key:a.key,onClick:function(){return function(a){var t=a;e({type:ae.SelectCharacter,data:t})}(a)}},l.a.createElement(xe,{character:a}))})))},Le=t(195),Ae=t(196),Ue=t(181),De=[n.Human,n.Ork,n.Dwarf,n.Elf,n.Troll],Te=t(197),We=t(182),Be=t(184),Fe=t(183),Ve=t(45),Me=t.n(Ve),Re=t(200),Ge=Object(ke.a)({root:{display:"flex",flexDirection:"row",flexWrap:"wrap",justifyContent:"flex-start"},chip:{marginRight:10,marginBottom:10}}),Je=function(e){var a=e.values,t=e.createChipLabel,n=e.onDeleteValue,r=Ge();return l.a.createElement("div",{className:r.root},a.map((function(e){return l.a.createElement(ve.a,{key:e.name,badgeContent:e.count,invisible:"1"===e.count,color:"secondary",max:99,anchorOrigin:{vertical:"top",horizontal:"left"}},l.a.createElement(Re.a,{className:r.chip,color:"primary",label:t(e),onDelete:function(){return n(e)}}))})))};function He(e,a){var t=[],n=!0,r=!1,l=void 0;try{for(var c,o=e[Symbol.iterator]();!(n=(c=o.next()).done);n=!0){var i=c.value;(i.path===a||i.path.startsWith("".concat(a,".")))&&t.push(i)}}catch(u){r=!0,l=u}finally{try{n||null==o.return||o.return()}finally{if(r)throw l}}return t}var Pe=t(66),Qe=t.n(Pe),Ze=t(174),ze=t(177),qe=t(176),$e=t(173),Ke=t(172),Ye=t(130),Xe=t(93),_e=t(49),ea=t.n(_e),aa=t(54),ta=t.n(aa),na=Object(ke.a)({root:{minWidth:78,maxWidth:78,width:78}}),ra=function(e){var a=e.disabled,t=e.grade,n=e.onUpdateGrade,r=na();return l.a.createElement(Ye.a,{className:r.root,disabled:a,variant:"outlined",onClick:function(){return n(function(e){switch(e){case P.Used:return P.Alpha;case P.Alpha:return P.Beta;case P.Beta:return P.Delta;case P.Delta:return P.Used;default:throw new Error("Unknown augmentation grade '".concat(e,"'"))}}(t))}},t)};var la=Object(ke.a)({root:{display:"flex",flexDirection:"row",padding:10,margin:10},name:{width:500,textAlign:"left"},availability:{width:100,textAlign:"center"},cost:{width:200,textAlign:"center"}}),ca=function(e){var a=e.item,t=e.createCostLabel,n=e.onUpdateItem,r=la(),c=parseInt(a.count),o=t(a),u=c>0,s=a.path.startsWith(Q),m=a.path.startsWith(Q),d=!m||function(e){var a=X(e),t=a.rating,n=a.legality;switch(n){case"L":return t<=24;case"R":return t<=18;case"F":return t<=12;default:throw new Error("Unknown availability legality '".concat(n,"'"))}}(a.availability),f=a.path.startsWith("".concat(Q,".augmentations")),h=a.grade||P.Alpha;return l.a.createElement(Xe.a,{className:r.root,elevation:3},l.a.createElement(Ne.a,{className:r.name,style:{lineHeight:"36px"}},a.name),m?l.a.createElement(Ne.a,{className:r.availability,style:{lineHeight:"36px"}},a.availability):null,l.a.createElement("span",{className:r.cost},l.a.createElement(ve.a,{badgeContent:c,color:"secondary"},l.a.createElement(Ne.a,{style:{lineHeight:"36px"}},"(",o,")"))),l.a.createElement(Ke.a,null,s||!u?l.a.createElement(Ye.a,{onClick:function(){n(Object(i.a)({},a,{count:(c+1).toString()}))},disabled:!d},l.a.createElement(ea.a,null)):null,s||u?l.a.createElement(Ye.a,{onClick:function(){n(Object(i.a)({},a,{count:Math.max(c-1,0).toString()}))},disabled:!d},l.a.createElement(ta.a,null)):null,f?l.a.createElement(ra,{disabled:0===c,grade:h,onUpdateGrade:function(e){var t=Object(i.a)({},a,{grade:e});e===P.Alpha&&delete t.grade,n(t)}}):null))},oa=Object(ke.a)({items:{display:"flex",flexDirection:"column"}}),ia=function(e){var a=e.items,t=e.createCostLabel,n=e.onUpdateItems,c=oa(),o=function(e){var t=Object(s.a)(a);t[a.findIndex((function(a){return a.name===e.name}))]=e,n(t)};return l.a.createElement(r.Fragment,null,l.a.createElement($e.a,null),l.a.createElement("div",{className:c.items},a?a.map((function(e){return l.a.createElement(ca,{item:e,createCostLabel:t,onUpdateItem:o})})):l.a.createElement("div",null,"No items")))},ua=function(e){var a=e.open,t=e.onClose,n=e.title,c=e.allItems,o=e.createCostLabel,m=e.onUpdateAllItems,d=Object.keys(c),f=Object(s.a)(d),h=new Map,v=!0,p=!1,g=void 0;try{for(var b,y=f[Symbol.iterator]();!(v=(b=y.next()).done);v=!0){var E=b.value,C=E.split("."),w=C[C.length-1],k=Object(D.a)(w);h.set(E,k)}}catch(x){p=!0,g=x}finally{try{v||null==y.return||y.return()}finally{if(p)throw g}}var O=Object(r.useState)(f[0]),j=Object(u.a)(O,2),S=j[0],N=j[1];void 0===f.find((function(e){return e===S}))&&N(f[0]);return l.a.createElement(Ze.a,{open:a,onClose:t},l.a.createElement(qe.a,null,n),l.a.createElement(ze.a,null,f.length>1?l.a.createElement(Le.a,{id:"group",value:S,displayEmpty:!0,onChange:function(e){N(e.target.value)},variant:"outlined"},f.map((function(e){return l.a.createElement(Ue.a,{key:e,value:e},h.get(e))}))):null,l.a.createElement(ia,{label:h.get(S),items:c[S],createCostLabel:o,onUpdateItems:function(e){var a=Object(i.a)({},c);a[S]=e,m(a)}})))},sa=t(91),ma=function(e){var a=e.title,t=e.items,n=e.allItems,c=e.createCostLabel,o=e.onUpdateItems,i=Object(r.useState)(!1),m=Object(u.a)(i,2),d=m[0],f=m[1],h=function(e){var a,t=new Map,n=Object.keys(e).map((function(e){return e.split(".")}));if(n.length>1){var r=!1;for(a=0;!r;){if(a>=n[0].length)throw new Error("Searched through all path components and found no differences");for(var l=1;l<n.length;l++)if(n[0][a]!==n[l][a]){r=!0;break}a++}}else{if(1!==n.length)throw new Error("There are no paths");a=n[0].length-1}var c=!0,o=!1,i=void 0;try{for(var u,s=n[Symbol.iterator]();!(c=(u=s.next()).done);c=!0){var m=u.value,d=m.slice(0,a).join("."),f=m[a-1];t.set(d,Object(D.a)(f))}}catch(h){o=!0,i=h}finally{try{c||null==s.return||s.return()}finally{if(o)throw i}}return t}(n),v=[],p=!0,g=!1,b=void 0;try{for(var y,E=h.keys()[Symbol.iterator]();!(p=(y=E.next()).done);p=!0){var C=y.value;v.push(C)}}catch(Z){g=!0,b=Z}finally{try{p||null==E.return||E.return()}finally{if(g)throw b}}for(var w=Object(r.useState)(v[0]),k=Object(u.a)(w,2),O=k[0],j=k[1],S=Object(r.useState)(null),N=Object(u.a)(S,2),x=N[0],I=N[1],L=M(n,O),A={},U=!1,T=0,W=Object.keys(L);T<W.length;T++){var B=W[T];U=!0;var F=Object(s.a)(L[B]),V=He(t,O),R=!0,G=!1,J=void 0;try{for(var H,P=function(){var e=H.value,a=V.find((function(a){return a.name===e.name}));a?(e.count=a.count,e.grade=a.grade):e.count="0"},Q=F[Symbol.iterator]();!(R=(H=Q.next()).done);R=!0)P()}catch(Z){G=!0,J=Z}finally{try{R||null==Q.return||Q.return()}finally{if(G)throw J}}A[B]=F}return l.a.createElement(r.Fragment,null,l.a.createElement(he.a,{onClick:function(e){return I(e.currentTarget)},color:"secondary",size:"medium",disableRipple:!0},l.a.createElement(Qe.a,null)),l.a.createElement(sa.a,{anchorEl:x,open:Boolean(x),onClose:function(){return I(null)}},v.map((function(e){return l.a.createElement(Ue.a,{key:e,onClick:function(){!function(e){j(e),I(null),f(!0)}(e)}},Object(D.a)(h.get(e)))}))),U?l.a.createElement(ua,{open:d,onClose:function(){return f(!1)},title:"".concat(a," - ").concat(h.get(O)),allItems:A,createCostLabel:c,onUpdateAllItems:function(e){for(var a=Object(s.a)(t),n=function(){var t=l[r],n=!0,c=!1,o=void 0;try{for(var i,u=function(){var e=i.value,n=parseInt(e.count)>0,r=a.findIndex((function(a){return a.path===t&&a.name===e.name}));r>-1?n?a[r]=K(t,e):a.splice(r,1):n&&a.push(K(t,e))},s=e[t][Symbol.iterator]();!(n=(i=s.next()).done);n=!0)u()}catch(Z){c=!0,o=Z}finally{try{n||null==s.return||s.return()}finally{if(c)throw o}}},r=0,l=Object.keys(e);r<l.length;r++)n();o(a)}}):null)},da=Object(ke.a)({headerLabel:{lineHeight:3,fontWeight:700}}),fa=function(e){var a=e.label,t=e.items,n=e.allItems,r=e.createItemLabel,c=e.createItemCostLabel,o=e.onUpdateItems,i=da(),u=0,m=!0,d=!1,f=void 0;try{for(var h,v=t[Symbol.iterator]();!(m=(h=v.next()).done);m=!0){var p=h.value;u+=$(p,n)*parseInt(p.count)}}catch(C){d=!0,f=C}finally{try{m||null==v.return||v.return()}finally{if(d)throw f}}for(var g=[],b=0,y=Object.keys(n);b<y.length;b++){var E=y[b];g.push.apply(g,Object(s.a)(n[E]))}return l.a.createElement(Te.a,{defaultExpanded:!1},l.a.createElement(We.a,{expandIcon:l.a.createElement(Me.a,null)},l.a.createElement(Fe.a,{onClick:function(e){return e.stopPropagation()},onFocus:function(e){return e.stopPropagation()},control:l.a.createElement(ma,{title:a,items:t,allItems:n,createCostLabel:c,onUpdateItems:function(e){o(e)}}),label:""}),l.a.createElement(Ne.a,{className:i.headerLabel},a," (",u,")")),l.a.createElement(Be.a,null,l.a.createElement(Je,{values:t,createChipLabel:r,onDeleteValue:function(e){var a=Object(s.a)(t),n=a.findIndex((function(a){return a.name===e.name}));if(n<0)throw new Error("Could not find item '".concat(e.name,"' to delete in list '").concat(JSON.stringify(a),"'"));a.splice(n,1),o(a)}})))},ha=function(){var e=ue(),a=me("selectedCharacter"),t=a.qualities,n=me("allQualities"),r=function(e){var a=F(e,n);return a>0?"+".concat(a):"".concat(a)};return l.a.createElement(fa,{label:"Qualities",items:t,allItems:n,createItemLabel:function(e){var a=e.name,t=r(e);return"".concat(a," (").concat(t,")")},createItemCostLabel:r,onUpdateItems:function(t){var n=Object(i.a)({},a,{qualities:t});e({type:ae.UpdateCharacter,data:n})}})},va=Object(ke.a)({header:{display:"flex",flexDirection:"row",marginLeft:5,marginRight:5,marginBottom:10},field:{marginRight:10,marginTop:20},divider:{margin:5}}),pa=function(){var e=va(),a=ue(),t=me("selectedCharacter"),n=t.name,c=t.streetName,o=t.metaType,u=function(e){var t=e;a({type:ae.UpdateCharacter,data:t})};return l.a.createElement(r.Fragment,null,l.a.createElement("div",{className:e.header},l.a.createElement(Ae.a,{"id-":"name",label:"Name",value:n,onChange:function(e){return u(Object(i.a)({},t,{name:e.target.value}))},className:e.field,variant:"outlined"}),l.a.createElement(Ae.a,{"id-":"street-name",label:"Street Name",value:c,onChange:function(e){return u(Object(i.a)({},t,{streetName:e.target.value}))},className:e.field,variant:"outlined"}),l.a.createElement(Le.a,{id:"meta-type",value:o,displayEmpty:!0,onChange:function(e){return u(Object(i.a)({},t,{metaType:e.target.value}))},className:e.field,variant:"outlined"},De.map((function(e){return l.a.createElement(Ue.a,{key:e,value:e},e," (",w(e),")")})))),l.a.createElement(ha,null))};function ga(e,a){var t=[];for(var n in e)n.startsWith(a)&&t.push(e[n]);return t}var ba=t(185),ya=Object(ke.a)({content:{width:"100%"},header:{display:"flex"},name:{minWidth:300,maxWidth:300,textAlign:"left"},availability:{minWidth:100,maxWidth:100,textAlign:"center"},cost:{minWidth:100,maxWidth:100,textAlign:"right"},ul:{padding:0}}),Ea=function(e){var a=e.open,t=e.onClose,n=e.title,c=e.items,o=e.onItemSelectionChange,s=e.includeAvailability,m=e.includeCost,d=e.allowNewItems,f=e.allowMultiSelection,h=ya(),v=Object(r.useState)(""),p=Object(u.a)(v,2),g=p[0],b=p[1],y=Object(r.useState)(""),E=Object(u.a)(y,2),C=E[0],w=E[1],k=Object(r.useState)(""),O=Object(u.a)(k,2),j=O[0],S=O[1],N=function(e){var a=e.target.value;switch(e.target.id){case"new-item-name":b(a);break;case"new-item-availability":w(a);break;case"new-item-cost":S(a)}};return l.a.createElement(Ze.a,{open:a,onClose:t},l.a.createElement(qe.a,null,n),l.a.createElement(ze.a,{className:h.content},l.a.createElement(Oe.a,null,l.a.createElement(je.a,{key:"header",className:h.header},l.a.createElement(Ne.a,{className:h.name},"Name"),s?l.a.createElement(Ne.a,{className:h.availability},"i.availability"):null,m?l.a.createElement(Ne.a,{className:h.cost},"Cost"):null),d?l.a.createElement(je.a,{key:"new-item"},l.a.createElement(Ae.a,{id:"new-item-name",label:"Custom",value:g,onChange:N,className:h.name,variant:"outlined"}),s?l.a.createElement(Ae.a,{id:"new-item-availability",label:"Availability",value:C,onChange:N,className:h.availability,variant:"outlined"}):null,m?l.a.createElement(Ae.a,{id:"new-item-cost",label:"Cost",value:j,onChange:N,className:h.cost,variant:"outlined"}):null,l.a.createElement(he.a,{"aria-label":"create",onClick:function(){var e={Name:g,selected:!0};s&&(e.Availability=C),m&&(e.Cost=j),o(e),b(""),w(""),S("")},color:"secondary",size:"small"},l.a.createElement(ea.a,null))):null,c.map((function(e){return l.a.createElement(je.a,{key:e.Name},l.a.createElement(ba.a,{className:h.name},e.Name),s?l.a.createElement(ba.a,{className:h.availability},e.Availability):null,m?l.a.createElement(ba.a,{className:h.cost},e.Cost):null,f?l.a.createElement(r.Fragment,null,l.a.createElement(he.a,{"aria-label":"add",onClick:function(){return o(Object(i.a)({},e,{selected:!0}))},color:"secondary",size:"small"},l.a.createElement(ea.a,null)),l.a.createElement(he.a,{"aria-label":"remove",onClick:function(){return o(Object(i.a)({},e,{selected:!1}))},disabled:!e.selected,color:"secondary",size:"small"},l.a.createElement(ta.a,null))):l.a.createElement(he.a,{"aria-label":e.selected?"remove":"add",onClick:function(){return o(Object(i.a)({},e,{selected:!e.selected}))},color:"secondary",size:"small"},e.selected?l.a.createElement(ta.a,null):l.a.createElement(ea.a,null)))})))))},Ca=function(e){var a=e[Object.keys(e)[0]];if(void 0===a)throw new Error("Could not find a name for value '".concat(JSON.stringify(e),"'"));return a},wa=Object(ke.a)({editButton:{paddingLeft:10}}),ka=function(e){var a=e.breadcrums,t=e.values,n=e.selectedValueNames,c=e.addValue,o=e.removeValue,i=e.includeAvailability,s=void 0!==i&&i,m=e.includeCost,d=void 0!==m&&m,f=e.allowNewValues,h=void 0!==f&&f,v=e.createValue,p=e.allowMultiSelection,g=void 0!==p&&p,b=wa(),y=Object(r.useState)(!1),E=Object(u.a)(y,2),C=E[0],w=E[1],k=a.join(" - "),O=t.map((function(e){return function(e,a,t,n){var r=Ca(e),l=t?function(e){var a=e.Availability;return void 0===a?"-":a}(e):void 0,c=n?function(e){var a=e.Cost;return void 0===a?"0":a}(e):void 0,o=void 0!==a.find((function(e){return e===r}));return{Name:r,Cost:c,Availability:l,selected:o}}(e,n,s,d)}));return l.a.createElement(r.Fragment,null,l.a.createElement(he.a,{"aria-label":"add",onClick:function(){return w(!0)},color:"secondary",size:"medium",className:b.editButton,disableRipple:!0},l.a.createElement(Qe.a,null)),l.a.createElement(Ea,{open:C,onClose:function(){return w(!1)},title:k,items:O,onItemSelectionChange:function(e){var a=e.Name,n=e.Availability,r=e.Cost;if(e.selected){if(c(a),void 0===t.find((function(e){return Ca(e)===a}))){var l={Name:a,Availability:n,Cost:r};if(!v)throw new Error("Attempting to create new item '".concat(JSON.stringify(l),"' with no createValue prop"));v(l)}}else o(a)},includeAvailability:s,includeCost:d,allowNewItems:h,allowMultiSelection:g}))},Oa=t(202),ja=Object(ke.a)({root:{display:"flex",height:50},name:{width:200},slider:{width:300,marginRight:10}}),Sa=function(e){var a=e.property,t=e.onUpdate,n=e.min,r=e.max,c=e.step,o=e.formatDisplayValue,i=e.computeCost,u=a.name,s=a.rating,m=ja();return l.a.createElement("div",{className:m.root},l.a.createElement(Ne.a,{gutterBottom:!0,className:m.name},u),l.a.createElement("div",{className:m.slider},l.a.createElement(Oa.a,{step:c,min:n,max:r,value:s,marks:!0,valueLabelDisplay:"on",onChange:function(e,a){if(Array.isArray(a))throw new Error("Property element '".concat(e.target.id,"' has an array of values instead of a single value: [").concat(a.join(", "),"]"));t({name:u,rating:a})},valueLabelFormat:function(e,a){return o(e)}})),l.a.createElement(Ne.a,{gutterBottom:!0},"(",i(s),")"))},Na=function(e){var a=e.skill,t=e.onUpdate,n=e.computeCost;return l.a.createElement(Sa,{property:a,onUpdate:t,min:1,max:5,step:2,formatDisplayValue:function(e){return e.toString()},computeCost:n})},xa=Object(ke.a)({header:{display:"flex",flexDirection:"row",marginBottom:20,paddingLeft:16,paddingTop:12},headerLabel:{lineHeight:3,fontWeight:700}}),Ia=function(e){var a=e.breadcrums,t=e.skills,n=e.allSkills,c=e.headerLabel,o=e.computeSkillCost,i=e.onSkillsUpdated,u=xa(),m=ue(),d=me("customItems");t.sort((function(e,a){return e.name.localeCompare(a.name)}));var f=a.join(".");n.push.apply(n,Object(s.a)(ga(d,f))),n.sort((function(e,a){return e.Name.localeCompare(a.Name)}));var h=function(e){var a=Object(s.a)(t),n=t.findIndex((function(a){return a.name===e.name}));n>-1?e.rating>0?a[n]=e:a.splice(n,1):e.rating>0&&a.push(e),i(a)};return l.a.createElement(r.Fragment,null,l.a.createElement(Te.a,{defaultExpanded:!1},l.a.createElement(We.a,{expandIcon:l.a.createElement(Me.a,null)},l.a.createElement(Fe.a,{onClick:function(e){return e.stopPropagation()},onFocus:function(e){return e.stopPropagation()},control:l.a.createElement(ka,{breadcrums:a,values:n,selectedValueNames:t.map((function(e){return e.name})),addValue:function(e){h({name:e,rating:1})},removeValue:function(e){h({name:e,rating:-1})},allowNewValues:!0,createValue:function(e){var a={path:"".concat(f,".").concat(e.Name),item:e};m({type:ae.AddCustomItem,data:a})}}),label:""}),l.a.createElement(Ne.a,{className:u.headerLabel},c)),l.a.createElement(Be.a,null,l.a.createElement(Oe.a,null,t.map((function(e){return l.a.createElement(je.a,{key:e.name},l.a.createElement(Na,{skill:e,onUpdate:h,computeCost:o}))}))))))},La=["Skills","Active"],Aa=function(){var e=ue(),a=me("selectedCharacter"),t=me("allSkills"),n=a.activeSkills,r=x(n),c="Active Skills (".concat(r,")"),o=Object(s.a)(t.active);return l.a.createElement(Ia,{breadcrums:La,skills:n,allSkills:o,headerLabel:c,computeSkillCost:N,onSkillsUpdated:function(t){var n=Object(i.a)({},a,{activeSkills:t});e({type:ae.UpdateCharacter,data:n})}})},Ua=["Skills","Knowledge"],Da=function(){var e=ue(),a=me("selectedCharacter"),t=me("allSkills"),n=a.knowledgeSkills,r=L(n),c=A(a),o=r-c,u="Knowledge Skills (".concat(r," - ").concat(c," = ").concat(o,")"),m=Object(s.a)(t.knowledge);return l.a.createElement(Ia,{breadcrums:Ua,skills:n,allSkills:m,headerLabel:u,computeSkillCost:I,onSkillsUpdated:function(t){var n=Object(i.a)({},a,{knowledgeSkills:t});e({type:ae.UpdateCharacter,data:n})}})},Ta=["Skills","Language"],Wa=function(){var e=ue(),a=me("selectedCharacter"),t=me("allSkills"),n=a.languageSkills,r=L(n),c="Language Skills (".concat(r,") + Native"),o=Object(s.a)(t.language);return l.a.createElement(Ia,{breadcrums:Ta,skills:n,allSkills:o,headerLabel:c,computeSkillCost:I,onSkillsUpdated:function(t){var n=Object(i.a)({},a,{languageSkills:t});e({type:ae.UpdateCharacter,data:n})}})},Ba=function(){return l.a.createElement(r.Fragment,null,l.a.createElement(Aa,null),l.a.createElement(Da,null),l.a.createElement(Wa,null))},Fa=t(68),Va=t.n(Fa),Ma=Object(ke.a)({badge:{marginLeft:50}}),Ra=function(){var e=Ma(),a=me("karma"),t=a.total,n=a.spent,c=a.available;return l.a.createElement(r.Fragment,null,l.a.createElement(ve.a,{className:e.badge,badgeContent:t,color:"primary",max:999,showZero:!0},l.a.createElement(Va.a,null)),l.a.createElement(ve.a,{className:e.badge,badgeContent:n,color:"secondary",max:999,showZero:!0},l.a.createElement(Va.a,null)),l.a.createElement(ve.a,{className:e.badge,badgeContent:c,color:"primary",max:999,showZero:!0},l.a.createElement(Va.a,null)))},Ga=function(e){var a=e.attribute,t=e.metaType,n=e.onUpdate,r=O(t,a);return l.a.createElement(Sa,{property:a,onUpdate:n,min:1,max:7,step:1,formatDisplayValue:function(e){return(e+r).toString()},computeCost:j})},Ja=Object(ke.a)({header:{marginBottom:20,paddingLeft:16,paddingTop:12,fontWeight:700}}),Ha=function(){var e=ue(),a=me("selectedCharacter"),t=Ja(),n=a.attributes,c=a.metaType,o=n.filter((function(e){return m(a)||"Magic"!==e.name})),u=S(a),d=function(t){var r=Object(s.a)(n),l=r.findIndex((function(e){return e.name===t.name}));r[l]=t,e({type:ae.UpdateCharacter,data:Object(i.a)({},a,{attributes:r})})};return l.a.createElement(r.Fragment,null,l.a.createElement(Ne.a,{className:t.header},"Attributes (",u,")"),l.a.createElement(Oe.a,null,o.map((function(e){return l.a.createElement(je.a,{key:e.name},l.a.createElement(Ga,{attribute:e,metaType:c,onUpdate:d}))}))))},Pa=function(){return l.a.createElement(Ha,null)};function Qa(e){switch(e){case 1:return 2;case 3:return 7;case 5:return 15;default:throw new Error}}function Za(e){var a=0;return a+=Qa(e.connection),a+=Qa(e.loyalty)}function za(e){return e.contacts.map((function(e){return Za(e)})).reduce((function(e,a){return e+a}),0)}var qa=Object(ke.a)({headerLabel:{fontWeight:700},details:{display:"flex",flexDirection:"column"},rating:{marginTop:30}}),$a=function(e){var a=e.contact,t=e.onUpdate,n=qa(),c=Za(a),o={name:"Connection",rating:a.connection},u={name:"Loyalty",rating:a.loyalty};return l.a.createElement(r.Fragment,null,l.a.createElement(Te.a,{defaultExpanded:!1},l.a.createElement(We.a,{expandIcon:l.a.createElement(Me.a,null)},l.a.createElement(Ne.a,{className:n.headerLabel},a.name," (",c,")")),l.a.createElement(Be.a,null,l.a.createElement("div",{className:n.details},l.a.createElement("div",{className:n.rating},l.a.createElement(Sa,{property:o,onUpdate:function(e){var n=Object(i.a)({},a,{connection:e.rating});t(n)},min:1,max:3,step:2,formatDisplayValue:function(e){return e.toString()},computeCost:Qa})),l.a.createElement("div",{className:n.rating},l.a.createElement(Sa,{property:u,onUpdate:function(e){var n=Object(i.a)({},a,{loyalty:e.rating});t(n)},min:1,max:5,step:2,formatDisplayValue:function(e){return e.toString()},computeCost:Qa}))))))},Ka=Object(ke.a)({header:{display:"flex",flexDirection:"row"},headerLabel:{lineHeight:3,fontWeight:700}}),Ya=["Contacts"],Xa=Ya.join("."),_a=function(){var e=Ka(),a=ue(),t=me("selectedCharacter"),n=me("allContacts"),c=me("customItems"),o=t.contacts;o.sort((function(e,a){return e.name.localeCompare(a.name)}));var u=za(t),m=function(e){var a=e.attributes.find((function(e){return"Charisma"===e.name}));if(void 0===a)throw new Error("Character '".concat(e.streetName,"' has no attribute 'Charisma'"));var t=e.attributes.find((function(e){return"Willpower"===e.name}));if(void 0===t)throw new Error("Character '".concat(e.streetName,"' has no attribute 'Willpower'"));return 10*(a.rating+t.rating)}(t),d=u-m,f="Contacts (".concat(u," - ").concat(m," = ").concat(d,")");n.push.apply(n,Object(s.a)(ga(c,Xa))),n.sort((function(e,a){return e.Name.localeCompare(a.Name)}));var h=function(e){var n=Object(s.a)(o),r=o.findIndex((function(a){return a.name===e.name}));r>-1?e.connection>0&&e.loyalty>0?n[r]=e:n.splice(r,1):e.connection>0&&e.loyalty>0&&n.push(e);var l=Object(i.a)({},t,{contacts:n});a({type:ae.UpdateCharacter,data:l})};return l.a.createElement(r.Fragment,null,l.a.createElement("div",{className:e.header},l.a.createElement(ka,{breadcrums:Ya,values:n,selectedValueNames:o.map((function(e){return e.name})),addValue:function(e){h({name:e,connection:1,loyalty:1})},removeValue:function(e){h({name:e,connection:-1,loyalty:-1})},allowNewValues:!0,createValue:function(e){var t={path:"".concat(Xa,".").concat(e.Name),item:e};a({type:ae.AddCustomItem,data:t})}}),l.a.createElement(Ne.a,{className:e.headerLabel},f)),l.a.createElement(Oe.a,null,o.map((function(e){return l.a.createElement($a,{key:e.name,contact:e,onUpdate:h})}))))},et=function(){return l.a.createElement(_a,null)},at=function(){var e=ue(),a=me("selectedCharacter"),t=a.spells,n=me("allSpells");return l.a.createElement(fa,{label:"Spells",items:t,allItems:n,createItemLabel:function(e){var a=e.name;return"".concat(a," (5)")},createItemCostLabel:function(e){return"5"},onUpdateItems:function(t){var n=Object(i.a)({},a,{spells:t});e({type:ae.UpdateCharacter,data:n})}})},tt=function(){var e=ue(),a=me("selectedCharacter"),t=a.gear,n=me("allGear"),c=function(e){var a=$(e,n);return"".concat(a,"\xa5")},o=function(e){var a=e.name,t=c(e),n="".concat(a," (").concat(t,")");return e.path.startsWith("".concat(Q,".augmentations"))&&(n+=" [".concat(e.grade||P.Alpha,"]")),n};return l.a.createElement(r.Fragment,null,function(e,a){var t=new Set,n=a.split("."),r=!0,l=!1,c=void 0;try{for(var o,i=R(e,a)[Symbol.iterator]();!(r=(o=i.next()).done);r=!0){var u=o.value.split(".");t.add(u[n.length])}}catch(s){l=!0,c=s}finally{try{r||null==i.return||i.return()}finally{if(l)throw c}}return Array.from(t)}(n,Q).map((function(r){return l.a.createElement(fa,{key:r,label:Object(D.a)(r),items:He(t,"".concat(Q,".").concat(r)),allItems:M(n,"".concat(Q,".").concat(r)),createItemLabel:o,createItemCostLabel:c,onUpdateItems:function(n){return function(n,r){var l=t.filter((function(e){return!e.path.startsWith("".concat(Q,".").concat(n))}));l.push.apply(l,Object(s.a)(r));var c=Object(i.a)({},a,{gear:l});e({type:ae.UpdateCharacter,data:c})}(r,n)}})})))},nt="spells";function rt(e,a){var t=[],n=!0,r=!1,l=void 0;try{for(var c,o=a[Symbol.iterator]();!(n=(c=o.next()).done);n=!0){var i=c.value.Name;t.push({path:e,name:i,cost:"5"})}}catch(u){r=!0,l=u}finally{try{n||null==o.return||o.return()}finally{if(r)throw l}}return t}var lt=t(203),ct=Object(ke.a)((function(e){return{root:{display:"flex",flexDirection:"row",marginLeft:10,marginTop:10},name:{lineHeight:"40px"},value:{marginLeft:5,color:e.palette.getContrastText(e.palette.primary.main),backgroundColor:e.palette.primary.main}}})),ot=function(e){var a=e.name,t=e.value,n=ct();return l.a.createElement("div",{className:n.root},l.a.createElement(Ne.a,{className:n.name},a),l.a.createElement(lt.a,{className:n.value},t))},it=Object(ke.a)({header:{marginTop:10,marginLeft:5},section:{display:"flex",flexDirection:"row",marginBottom:10}}),ut=function(){var e,a=it(),t=me("selectedCharacter"),c=k(t,"Body"),o=k(t,"Agility"),i=k(t,"Reaction"),u=k(t,"Intuition"),s=k(t,"Willpower"),m=(null===(e=t.activeSkills.find((function(e){return"Athletics"===e.name})))||void 0===e?void 0:e.rating)||0,d=i+u,f=8+Math.ceil(c/2),h=8+Math.ceil(s/2),v=o;t.metaType!==n.Dwarf&&(v+=1);var p=v+m;t.metaType!==n.Dwarf&&(p+=2);var g=2*p;return l.a.createElement(r.Fragment,null,l.a.createElement(Ne.a,{className:a.header},"Initiative"),l.a.createElement($e.a,null),l.a.createElement("div",{className:a.section},l.a.createElement(ot,{name:"Initiative",value:d}),l.a.createElement(ot,{name:"Initiative Passes",value:1})),l.a.createElement(Ne.a,{className:a.header},"Condition Monitor"),l.a.createElement($e.a,null),l.a.createElement("div",{className:a.section},l.a.createElement(ot,{name:"Physical Boxes",value:f}),l.a.createElement(ot,{name:"Stun Boxes",value:h})),l.a.createElement(Ne.a,{className:a.header},"Movement"),l.a.createElement($e.a,null),l.a.createElement("div",{className:a.section},l.a.createElement(ot,{name:"Sneaking",value:v}),l.a.createElement(ot,{name:"Walking",value:p}),l.a.createElement(ot,{name:"Running",value:g})))},st=t(186),mt=t(187),dt=function(e){var a=e.open,t=e.onChoice,n=e.content,r=function(){t(!1)};return l.a.createElement(Ze.a,{open:a,onClose:r},l.a.createElement(ze.a,null,l.a.createElement(st.a,null,n)),l.a.createElement(mt.a,null,l.a.createElement(Ye.a,{onClick:function(){t(!0)},color:"secondary",variant:"outlined"},"Yes"),l.a.createElement(Ye.a,{onClick:r,color:"secondary",variant:"outlined",autoFocus:!0},"No")))},ft=t(86),ht=t.n(ft),vt=t(198),pt=function(e){var a=e.filename,t=e.generateData;return l.a.createElement(vt.a,{title:"Export Character"},l.a.createElement(he.a,{onClick:function(){var e=t(),n=document.createElement("a");n.setAttribute("href","data:application/json;charset=utf-8,"+encodeURIComponent(e)),n.setAttribute("download",a),n.style.display="none",document.body.appendChild(n),n.click(),document.body.removeChild(n)},color:"secondary"},l.a.createElement(ht.a,null)))},gt=t(87),bt=t.n(gt),yt=function(e){var a=e.saveData;return l.a.createElement(r.Fragment,null,l.a.createElement("input",{accept:"application/json",hidden:!0,id:"import-file",type:"file",onChange:function(e){var t=e.target.files;if(t&&0!==t.length){var n=t[0],r=new FileReader;r.onload=function(e){if(!e.target)throw new Error("Failed to load data from file '".concat(n.name,"'"));var t=e.target.result;if(!t)throw new Error("File '".concat(n.name,"' has no data"));a(t)},r.readAsText(n)}else console.log("No files selected")}}),l.a.createElement("label",{htmlFor:"import-file"},l.a.createElement(vt.a,{title:"Import Character"},l.a.createElement(he.a,{color:"secondary",component:"span"},l.a.createElement(bt.a,null)))))},Et=Object(ke.a)({bar:{flexGrow:1,display:"flex"}}),Ct=function(){var e=Et(),a=ue(),t=me("selectedCharacter"),n=me("allQualities"),c=me("allGear"),o=Object(r.useState)(!1),i=Object(u.a)(o,2),s=i[0],d=i[1],f=Object(r.useState)(0),h=Object(u.a)(f,2),v=h[0],p=h[1];Object(r.useEffect)((function(){fetch("data/qualities.json").then((function(e){return e.json()})).then((function(e){var t=function(e){var a={};return W(G,e,a,J),a}(e);a({type:ae.LoadQualities,data:t})})).catch((function(e){console.error("Error occured loading qualities: ".concat(e.message,"\n").concat(e.stack))})),fetch("data/skills.json").then((function(e){return e.json()})).then((function(e){var t=e;a({type:ae.LoadSkills,data:t})})).catch((function(e){console.error("Error occured loading skills: ".concat(e.message,"\n").concat(e.stack))})),fetch("data/contacts.json").then((function(e){return e.json()})).then((function(e){var t=e.all;a({type:ae.LoadContacts,data:t})})).catch((function(e){console.error("Error occured loading contacts: ".concat(e.message,"\n").concat(e.stack))})),fetch("data/magic.json").then((function(e){return e.json()})).then((function(e){var t=function(e){var a={};return W(nt,e,a,rt),a}(e.spells);a({type:ae.LoadSpells,data:t})})).catch((function(e){console.error("Error occured loading magic: ".concat(e.message,"\n").concat(e.stack))})),fetch("data/gear.json").then((function(e){return e.json()})).then((function(e){var t=function(e){var a={};return W(Q,e,a,Z),a}(e);a({type:ae.LoadGear,data:t})})).catch((function(e){console.error("Error occured loading gear: ".concat(e.message,"\n").concat(e.stack))}))}),[a]);var g,b=Object(r.useState)(!1),y=Object(u.a)(b,2),E=y[0],C=y[1],k=w(t.metaType)+H(t,n),O=S(t),j=U(t),N=za(t),x=5*t.spells.length,I=_(t,c),L=ee(I);g=I<1e3?"".concat(I,"\xa5"):I<1e6?"".concat(Math.round(I/100)/10,"K \xa5"):"".concat(Math.round(I/1e5)/10,"M \xa5");var A,D=m(t);switch(v){case 0:A=l.a.createElement(pa,null);break;case 1:A=l.a.createElement(Pa,null);break;case 2:A=l.a.createElement(Ba,null);break;case 3:A=l.a.createElement(et,null);break;case 4:A=l.a.createElement(tt,null);break;case 5:A=l.a.createElement(at,null);break;case 6:A=l.a.createElement(ut,null);break;default:throw new Error("Unknown tab index ".concat(v))}var T="".concat(t.streetName,".json");return l.a.createElement("div",null,l.a.createElement(de.a,{position:"sticky",color:"default"},l.a.createElement(fe.a,null,l.a.createElement(vt.a,{title:"Characters"},l.a.createElement(he.a,{edge:"start",onClick:function(){d(!0)},"aria-label":"characters"},l.a.createElement(be.a,null))),l.a.createElement("div",{className:e.bar},l.a.createElement(xe,{character:t}),l.a.createElement(Ra,null)),l.a.createElement(yt,{saveData:function(e){var t=JSON.parse(e);a({type:ae.ImportCharacter,data:t})}}),l.a.createElement(pt,{filename:T,generateData:function(){return JSON.stringify(t)}}),l.a.createElement(he.a,{"aria-label":"clear",onClick:function(){C(!0)},color:"secondary"},l.a.createElement(Ee.a,null))),l.a.createElement(Ce.a,{value:v,onChange:function(e,a){p(a)},variant:"scrollable"},l.a.createElement(we.a,{label:l.a.createElement(ve.a,{badgeContent:k,color:"default",showZero:!0,max:999},"Character")}),l.a.createElement(we.a,{label:l.a.createElement(ve.a,{badgeContent:O,color:"default",showZero:!0,max:999},"Attributes")}),l.a.createElement(we.a,{label:l.a.createElement(ve.a,{badgeContent:j,color:"default",showZero:!0,max:999},"Skills")}),l.a.createElement(we.a,{label:l.a.createElement(ve.a,{badgeContent:N,color:"default",showZero:!0,max:999},"Contacts")}),l.a.createElement(we.a,{label:l.a.createElement(ve.a,{badgeContent:g,color:"default",showZero:!0,max:1e6,anchorOrigin:{vertical:"top",horizontal:"left"}},l.a.createElement(ve.a,{badgeContent:L,color:"default",showZero:!0,max:999,anchorOrigin:{vertical:"top",horizontal:"right"}},"Gear"))}),l.a.createElement(we.a,{disabled:!D,label:l.a.createElement(ve.a,{badgeContent:x,color:"default",showZero:!0,max:999},"Magic")}),l.a.createElement(we.a,{label:"Combat"}))),A,l.a.createElement(pe.a,{open:s,onClose:function(){d(!1)}},l.a.createElement(Ie,null)),l.a.createElement(dt,{open:E,onChoice:function(e){e&&a({type:ae.ClearCharacter}),C(!1)},content:"Are you sure you want to delete this character? All data will be lost forever."}))},wt=t(90),kt=t(191),Ot=t(192),jt=Object(wt.a)({palette:{type:"dark"}}),St=function(){var e=Object(r.useReducer)(le,ce,(function(e){var a=function(){for(var e=[h()],a=0;a<localStorage.length;a++){var t=localStorage.key(a);if(null!==t&&/^character:\d+$/i.test(t)){var n=localStorage.getItem(t);if(n){var r=JSON.parse(n),l=r.key,c=r.name,o=r.streetName;e.push({key:l,name:c,streetName:o})}}}return e.sort((function(e,a){return e.key-a.key})),e}(),t=function(){var e=localStorage.getItem(y);return e?parseInt(e):-1}(),n=e.selectedCharacter;if(t>-1){var r=a.find((function(e){return e.key===t}));if(r){var l=g(r.key);l&&(n=l)}}return Object(i.a)({},e,{characters:a,selectedCharacter:n})})),a=Object(u.a)(e,2),t=a[0],n=a[1];return l.a.createElement(ie.Provider,{value:n},l.a.createElement(se.Provider,{value:t},l.a.createElement(kt.a,{theme:jt},l.a.createElement(Ot.a,null),l.a.createElement(Ct,null))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(l.a.createElement(St,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[112,1,2]]]);
//# sourceMappingURL=main.0d340691.chunk.js.map